import{j as n,r as f,R as Ft,w as Pi,S as nn,C as qt,P as ka,W as an,a as on,A as cn,D as Js,G as ln,b as Mi,c as dn,M as $e,B as ve,T as ja,d as un,e as Kt,f as ht,g as vs,h as Na,i as Ca,k as Zs,V as Yt,O as Ei,l as Ae,m as Ra,n as Ti,E as Ai,L as Li,o as Oi,p as Ks,q as Ii,s as Di,t as Mn,u as Fi,v as zi,x as $i,y as En,z as Bi,F as Vi,H as Ui,I as Wi}from"./three-vendor-CpS0e4Eo.js";import{a as Gi}from"./react-vendor-D3F3s8fL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();const Qt=new WeakMap,qs=new WeakMap,er={current:[]};let _r=!1,ks=0;const bs=new Set,Ds=new Map;function Pa(e){const t=Array.from(e).sort((s,r)=>s instanceof Xt&&s.options.deps.includes(r)?1:r instanceof Xt&&r.options.deps.includes(s)?-1:0);for(const s of t){if(er.current.includes(s))continue;er.current.push(s),s.recompute();const r=qs.get(s);if(r)for(const a of r){const i=Qt.get(a);i&&Pa(i)}}}function Hi(e){const t={prevVal:e.prevState,currentVal:e.state};for(const s of e.listeners)s(t)}function Zi(e){const t={prevVal:e.prevState,currentVal:e.state};for(const s of e.listeners)s(t)}function Ma(e){if(ks>0&&!Ds.has(e)&&Ds.set(e,e.prevState),bs.add(e),!(ks>0)&&!_r)try{for(_r=!0;bs.size>0;){const t=Array.from(bs);bs.clear();for(const s of t){const r=Ds.get(s)??s.prevState;s.prevState=r,Hi(s)}for(const s of t){const r=Qt.get(s);r&&(er.current.push(s),Pa(r))}for(const s of t){const r=Qt.get(s);if(r)for(const a of r)Zi(a)}}}finally{_r=!1,er.current=[],Ds.clear()}}function js(e){ks++;try{e()}finally{if(ks--,ks===0){const t=bs.values().next().value;t&&Ma(t)}}}function Ki(e){return typeof e=="function"}class Tr{constructor(t,s){this.listeners=new Set,this.subscribe=r=>{var a,i;this.listeners.add(r);const o=(i=(a=this.options)==null?void 0:a.onSubscribe)==null?void 0:i.call(a,r,this);return()=>{this.listeners.delete(r),o?.()}},this.prevState=t,this.state=t,this.options=s}setState(t){var s,r,a;this.prevState=this.state,(s=this.options)!=null&&s.updateFn?this.state=this.options.updateFn(this.prevState)(t):Ki(t)?this.state=t(this.prevState):this.state=t,(a=(r=this.options)==null?void 0:r.onUpdate)==null||a.call(r),Ma(this)}}class Xt{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const s=this.options.deps.length,r=new Array(s),a=new Array(s);for(let i=0;i<s;i++){const o=this.options.deps[i];r[i]=o.prevState,a[i]=o.state}return this.lastSeenDepValues=a,{prevDepVals:r,currDepVals:a,prevVal:this.prevState??void 0}},this.recompute=()=>{var s,r;this.prevState=this.state;const a=this.getDepVals();this.state=this.options.fn(a),(r=(s=this.options).onUpdate)==null||r.call(s)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof Xt&&i.checkIfRecalculationNeededDeeply();let s=!1;const r=this.lastSeenDepValues,{currDepVals:a}=this.getDepVals();for(let i=0;i<a.length;i++)if(a[i]!==r[i]){s=!0;break}s&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const s of this._subscriptions)s()}),this.subscribe=s=>{var r,a;this.listeners.add(s);const i=(a=(r=this.options).onSubscribe)==null?void 0:a.call(r,s,this);return()=>{this.listeners.delete(s),i?.()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const s of t)if(s instanceof Xt)s.registerOnGraph(),this.registerOnGraph(s.options.deps);else if(s instanceof Tr){let r=Qt.get(s);r||(r=new Set,Qt.set(s,r)),r.add(this);let a=qs.get(this);a||(a=new Set,qs.set(this,a)),a.add(s)}}unregisterFromGraph(t=this.options.deps){for(const s of t)if(s instanceof Xt)this.unregisterFromGraph(s.options.deps);else if(s instanceof Tr){const r=Qt.get(s);r&&r.delete(this);const a=qs.get(this);a&&a.delete(s)}}}const kt="__TSR_index",Tn="popstate",An="beforeunload";function qi(e){let t=e.getLocation();const s=new Set,r=o=>{t=e.getLocation(),s.forEach(c=>c({location:t,action:o}))},a=o=>{e.notifyOnIndexChange??!0?r(o):t=e.getLocation()},i=async({task:o,navigateOpts:c,...l})=>{if(c?.ignoreBlocker??!1){o();return}const u=e.getBlockers?.()??[],h=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&u.length&&h)for(const m of u){const g=tr(l.path,l.state);if(await m.blockerFn({currentLocation:t,nextLocation:g,action:l.type})){e.onBlocked?.();return}}o()};return{get location(){return t},get length(){return e.getLength()},subscribers:s,subscribe:o=>(s.add(o),()=>{s.delete(o)}),push:(o,c,l)=>{const d=t.state[kt];c=Ln(d+1,c),i({task:()=>{e.pushState(o,c),r({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:o,state:c})},replace:(o,c,l)=>{const d=t.state[kt];c=Ln(d,c),i({task:()=>{e.replaceState(o,c),r({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:o,state:c})},go:(o,c)=>{i({task:()=>{e.go(o),a({type:"GO",index:o})},navigateOpts:c,type:"GO"})},back:o=>{i({task:()=>{e.back(o?.ignoreBlocker??!1),a({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{i({task:()=>{e.forward(o?.ignoreBlocker??!1),a({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>t.state[kt]!==0,createHref:o=>e.createHref(o),block:o=>{if(!e.setBlockers)return()=>{};const c=e.getBlockers?.()??[];return e.setBlockers([...c,o]),()=>{const l=e.getBlockers?.()??[];e.setBlockers?.(l.filter(d=>d!==o))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:r}}function Ln(e,t){t||(t={});const s=hn();return{...t,key:s,__TSR_key:s,[kt]:e}}function Yi(e){const t=typeof document<"u"?window:void 0,s=t.history.pushState,r=t.history.replaceState;let a=[];const i=()=>a,o=C=>a=C,c=(C=>C),l=(()=>tr(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const C=hn();t.history.replaceState({[kt]:0,key:C,__TSR_key:C},"")}let d=l(),u,h=!1,m=!1,g=!1,p=!1;const x=()=>d;let j,L;const K=()=>{j&&(P._ignoreSubscribers=!0,(j.isPush?t.history.pushState:t.history.replaceState)(j.state,"",j.href),P._ignoreSubscribers=!1,j=void 0,L=void 0,u=void 0)},D=(C,B,te)=>{const y=c(B);L||(u=d),d=tr(B,te),j={href:y,state:te,isPush:j?.isPush||C==="push"},L||(L=Promise.resolve().then(()=>K()))},V=C=>{d=l(),P.notify({type:C})},ee=async()=>{if(m){m=!1;return}const C=l(),B=C.state[kt]-d.state[kt],te=B===1,y=B===-1,M=!te&&!y||h;h=!1;const H=M?"GO":y?"BACK":"FORWARD",k=M?{type:"GO",index:B}:{type:y?"BACK":"FORWARD"};if(g)g=!1;else{const T=i();if(typeof document<"u"&&T.length){for(const $ of T)if(await $.blockerFn({currentLocation:d,nextLocation:C,action:H})){m=!0,t.history.go(1),P.notify(k);return}}}d=l(),P.notify(k)},G=C=>{if(p){p=!1;return}let B=!1;const te=i();if(typeof document<"u"&&te.length)for(const y of te){const M=y.enableBeforeUnload??!0;if(M===!0){B=!0;break}if(typeof M=="function"&&M()===!0){B=!0;break}}if(B)return C.preventDefault(),C.returnValue=""},P=qi({getLocation:x,getLength:()=>t.history.length,pushState:(C,B)=>D("push",C,B),replaceState:(C,B)=>D("replace",C,B),back:C=>(C&&(g=!0),p=!0,t.history.back()),forward:C=>{C&&(g=!0),p=!0,t.history.forward()},go:C=>{h=!0,t.history.go(C)},createHref:C=>c(C),flush:K,destroy:()=>{t.history.pushState=s,t.history.replaceState=r,t.removeEventListener(An,G,{capture:!0}),t.removeEventListener(Tn,ee)},onBlocked:()=>{u&&d!==u&&(d=u)},getBlockers:i,setBlockers:o,notifyOnIndexChange:!1});return t.addEventListener(An,G,{capture:!0}),t.addEventListener(Tn,ee),t.history.pushState=function(...C){const B=s.apply(t.history,C);return P._ignoreSubscribers||V("PUSH"),B},t.history.replaceState=function(...C){const B=r.apply(t.history,C);return P._ignoreSubscribers||V("REPLACE"),B},P}function tr(e,t){const s=e.indexOf("#"),r=e.indexOf("?"),a=hn();return{href:e,pathname:e.substring(0,s>0?r>0?Math.min(s,r):s:r>0?r:e.length),hash:s>-1?e.substring(s):"",search:r>-1?e.slice(r,s===-1?void 0:s):"",state:t||{[kt]:0,key:a,__TSR_key:a}}}function hn(){return(Math.random()+1).toString(36).substring(7)}function Ar(e){return e[e.length-1]}function Qi(e){return typeof e=="function"}function Lt(e,t){return Qi(e)?e(t):e}const Xi=Object.prototype.hasOwnProperty;function Ke(e,t){if(e===t)return e;const s=t,r=Dn(e)&&Dn(s);if(!r&&!(sr(e)&&sr(s)))return s;const a=r?e:On(e);if(!a)return s;const i=r?s:On(s);if(!i)return s;const o=a.length,c=i.length,l=r?new Array(c):{};let d=0;for(let u=0;u<c;u++){const h=r?u:i[u],m=e[h],g=s[h];if(m===g){l[h]=m,(r?u<o:Xi.call(e,h))&&d++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){l[h]=g;continue}const p=Ke(m,g);l[h]=p,p===m&&d++}return o===c&&d===o?e:l}function On(e){const t=[],s=Object.getOwnPropertyNames(e);for(const a of s){if(!Object.prototype.propertyIsEnumerable.call(e,a))return!1;t.push(a)}const r=Object.getOwnPropertySymbols(e);for(const a of r){if(!Object.prototype.propertyIsEnumerable.call(e,a))return!1;t.push(a)}return t}function sr(e){if(!In(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const s=t.prototype;return!(!In(s)||!s.hasOwnProperty("isPrototypeOf"))}function In(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ot(e,t,s){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0,a=e.length;r<a;r++)if(!Ot(e[r],t[r],s))return!1;return!0}if(sr(e)&&sr(t)){const r=s?.ignoreUndefined??!0;if(s?.partial){for(const o in t)if((!r||t[o]!==void 0)&&!Ot(e[o],t[o],s))return!1;return!0}let a=0;if(!r)a=Object.keys(e).length;else for(const o in e)e[o]!==void 0&&a++;let i=0;for(const o in t)if((!r||t[o]!==void 0)&&(i++,i>a||!Ot(e[o],t[o],s)))return!1;return a===i}return!1}function Jt(e){let t,s;const r=new Promise((a,i)=>{t=a,s=i});return r.status="pending",r.resolve=a=>{r.status="resolved",r.value=a,t(a),e?.(a)},r.reject=a=>{r.status="rejected",s(a)},r}function jt(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}var Ji="Invariant failed";function gt(e,t){if(!e)throw new Error(Ji)}const at=0,zt=1,es=2,ts=3;function pt(e){return mn(e.filter(t=>t!==void 0).join("/"))}function mn(e){return e.replace(/\/{2,}/g,"/")}function fn(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Nt(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function Lr(e){return Nt(fn(e))}function rr(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function eo(e,t,s){return rr(e,s)===rr(t,s)}function to(e){const{type:t,value:s}=e;if(t===at)return s;const{prefixSegment:r,suffixSegment:a}=e;if(t===zt){const i=s.substring(1);if(r&&a)return`${r}{$${i}}${a}`;if(r)return`${r}{$${i}}`;if(a)return`{$${i}}${a}`}if(t===ts){const i=s.substring(1);return r&&a?`${r}{-$${i}}${a}`:r?`${r}{-$${i}}`:a?`{-$${i}}${a}`:`{-$${i}}`}if(t===es){if(r&&a)return`${r}{$}${a}`;if(r)return`${r}{$}`;if(a)return`{$}${a}`}return s}function so({base:e,to:t,trailingSlash:s="never",parseCache:r}){let a=Ea(e,r).slice();const i=gr(t,r);a.length>1&&Ar(a)?.value==="/"&&a.pop();for(let l=0,d=i.length;l<d;l++){const u=i[l],h=u.value;h==="/"?l?l===d-1&&a.push(u):a=[u]:h===".."?a.pop():h==="."||a.push(u)}a.length>1&&(Ar(a).value==="/"?s==="never"&&a.pop():s==="always"&&a.push({type:at,value:"/"}));const o=a.map(to);return pt(o)}const Ea=(e,t)=>Ta(e,t,!0),gr=(e,t)=>Ta(e,t,!1),Ta=(e,t,s)=>{if(!e)return[];const r=t?.get(e);if(r)return r;const a=co(e,s);return t?.set(e,a),a},ro=/^\$.{1,}$/,no=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,ao=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,io=/^\$$/,oo=/^(.*?)\{\$\}(.*)$/;function co(e,t){e=mn(e);const s=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),s.push({type:at,value:"/"})),!e)return s;const r=e.split("/").filter(Boolean);return s.push(...r.map(a=>{const i=!t&&a.slice(-1)==="_"?a.slice(0,-1):a,o=i.match(oo);if(o){const d=o[1],u=o[2];return{type:es,value:"$",prefixSegment:d||void 0,suffixSegment:u||void 0}}const c=i.match(ao);if(c){const d=c[1],u=c[2],h=c[3];return{type:ts,value:u,prefixSegment:d||void 0,suffixSegment:h||void 0}}const l=i.match(no);if(l){const d=l[1],u=l[2],h=l[3];return{type:zt,value:""+u,prefixSegment:d||void 0,suffixSegment:h||void 0}}if(ro.test(i)){const d=i.substring(1);return{type:zt,value:"$"+d,prefixSegment:void 0,suffixSegment:void 0}}return io.test(i)?{type:es,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:at,value:i.includes("%25")?i.split("%25").map(d=>decodeURI(d)).join("%25"):decodeURI(i)}})),e.slice(-1)==="/"&&(e=e.substring(1),s.push({type:at,value:"/"})),s}function Fs({path:e,params:t,leaveWildcards:s,leaveParams:r,decodeCharMap:a,parseCache:i}){const o=gr(e,i);function c(h){const m=t[h],g=typeof m=="string";return h==="*"||h==="_splat"?g?encodeURI(m):m:g?lo(m,a):m}let l=!1;const d={},u=pt(o.map(h=>{if(h.type===at)return h.value;if(h.type===es){d._splat=t._splat,d["*"]=t._splat;const m=h.prefixSegment||"",g=h.suffixSegment||"";if(!("_splat"in t))return l=!0,s?`${m}${h.value}${g}`:m||g?`${m}${g}`:void 0;const p=c("_splat");return s?`${m}${h.value}${p??""}${g}`:`${m}${p}${g}`}if(h.type===zt){const m=h.value.substring(1);!l&&!(m in t)&&(l=!0),d[m]=t[m];const g=h.prefixSegment||"",p=h.suffixSegment||"";if(r){const x=c(h.value);return`${g}${h.value}${x??""}${p}`}return`${g}${c(m)??"undefined"}${p}`}if(h.type===ts){const m=h.value.substring(1),g=h.prefixSegment||"",p=h.suffixSegment||"";if(!(m in t)||t[m]==null)return s?`${g}${m}${p}`:g||p?`${g}${p}`:void 0;if(d[m]=t[m],r){const x=c(h.value);return`${g}${h.value}${x??""}${p}`}return s?`${g}${m}${c(m)??""}${p}`:`${g}${c(m)??""}${p}`}return h.value}));return{usedParams:d,interpolatedPath:u,isMissingParams:l}}function lo(e,t){let s=encodeURIComponent(e);if(t)for(const[r,a]of t)s=s.replaceAll(r,a);return s}function Or(e,t,s){const r=uo(e,t,s);if(!(t.to&&!r))return r??{}}function uo(e,{to:t,fuzzy:s,caseSensitive:r},a){const i=t,o=Ea(e.startsWith("/")?e:`/${e}`,a),c=gr(i.startsWith("/")?i:`/${i}`,a),l={};return ho(o,c,l,s,r)?l:void 0}function ho(e,t,s,r,a){let i=0,o=0;for(;i<e.length||o<t.length;){const c=e[i],l=t[o];if(l){if(l.type===es){const d=e.slice(i);let u;if(l.prefixSegment||l.suffixSegment){if(!c)return!1;const h=l.prefixSegment||"",m=l.suffixSegment||"",g=c.value;if("prefixSegment"in l&&!g.startsWith(h)||"suffixSegment"in l&&!e[e.length-1]?.value.endsWith(m))return!1;let p=decodeURI(pt(d.map(x=>x.value)));h&&p.startsWith(h)&&(p=p.slice(h.length)),m&&p.endsWith(m)&&(p=p.slice(0,p.length-m.length)),u=p}else u=decodeURI(pt(d.map(h=>h.value)));return s["*"]=u,s._splat=u,!0}if(l.type===at){if(l.value==="/"&&!c?.value){o++;continue}if(c){if(a){if(l.value!==c.value)return!1}else if(l.value.toLowerCase()!==c.value.toLowerCase())return!1;i++,o++;continue}else return!1}if(l.type===zt){if(!c||c.value==="/")return!1;let d="",u=!1;if(l.prefixSegment||l.suffixSegment){const h=l.prefixSegment||"",m=l.suffixSegment||"",g=c.value;if(h&&!g.startsWith(h)||m&&!g.endsWith(m))return!1;let p=g;h&&p.startsWith(h)&&(p=p.slice(h.length)),m&&p.endsWith(m)&&(p=p.slice(0,p.length-m.length)),d=decodeURIComponent(p),u=!0}else d=decodeURIComponent(c.value),u=!0;u&&(s[l.value.substring(1)]=d,i++),o++;continue}if(l.type===ts){if(!c){o++;continue}if(c.value==="/"){o++;continue}let d="",u=!1;if(l.prefixSegment||l.suffixSegment){const h=l.prefixSegment||"",m=l.suffixSegment||"",g=c.value;if((!h||g.startsWith(h))&&(!m||g.endsWith(m))){let p=g;h&&p.startsWith(h)&&(p=p.slice(h.length)),m&&p.endsWith(m)&&(p=p.slice(0,p.length-m.length)),d=decodeURIComponent(p),u=!0}}else{let h=!0;for(let m=o+1;m<t.length;m++){const g=t[m];if(g?.type===at&&g.value===c.value){h=!1;break}if(g?.type===zt||g?.type===es){e.length<t.length&&(h=!1);break}}h&&(d=decodeURIComponent(c.value),u=!0)}u&&(s[l.value.substring(1)]=d,i++),o++;continue}}if(i<e.length&&o>=t.length)return s["**"]=pt(e.slice(i).map(d=>d.value)),!!r&&t[t.length-1]?.value!=="/";if(o<t.length&&i>=e.length){for(let d=o;d<t.length;d++)if(t[d]?.type!==ts)return!1;break}break}return!0}const mo=.75,fo=1,po=.5,go=.4,xo=.25,yo=.2,vo=.05,bo=.02,wo=.01,Fn=2e-4,zn=1e-4;function $n(e,t){return e.prefixSegment&&e.suffixSegment?t+vo+Fn*e.prefixSegment.length+zn*e.suffixSegment.length:e.prefixSegment?t+bo+Fn*e.prefixSegment.length:e.suffixSegment?t+wo+zn*e.suffixSegment.length:t}function _o(e){const t=[];return e.forEach((r,a)=>{if(r.isRoot||!r.path)return;const i=fn(r.fullPath);let o=gr(i),c=0;for(;o.length>c+1&&o[c]?.value==="/";)c++;c>0&&(o=o.slice(c));let l=0,d=!1;const u=o.map((h,m)=>{if(h.value==="/")return mo;if(h.type===at)return fo;let g;h.type===zt?g=po:h.type===ts?(g=go,l++):g=xo;for(let p=m+1;p<o.length;p++){const x=o[p];if(x.type===at&&x.value!=="/")return d=!0,$n(h,g+yo)}return $n(h,g)});t.push({child:r,trimmed:i,parsed:o,index:a,scores:u,optionalParamCount:l,hasStaticAfter:d})}),t.sort((r,a)=>{const i=Math.min(r.scores.length,a.scores.length);for(let o=0;o<i;o++)if(r.scores[o]!==a.scores[o])return a.scores[o]-r.scores[o];if(r.scores.length!==a.scores.length){if(r.optionalParamCount!==a.optionalParamCount){if(r.hasStaticAfter===a.hasStaticAfter)return r.optionalParamCount-a.optionalParamCount;if(r.hasStaticAfter&&!a.hasStaticAfter)return-1;if(!r.hasStaticAfter&&a.hasStaticAfter)return 1}return a.scores.length-r.scores.length}for(let o=0;o<i;o++)if(r.parsed[o].value!==a.parsed[o].value)return r.parsed[o].value>a.parsed[o].value?1:-1;return r.index-a.index}).map((r,a)=>(r.child.rank=a,r.child))}function So({routeTree:e,initRoute:t}){const s={},r={},a=o=>{o.forEach((c,l)=>{t?.(c,l);const d=s[c.id];if(gt(!d,`Duplicate routes found with id: ${String(c.id)}`),s[c.id]=c,!c.isRoot&&c.path){const h=Nt(c.fullPath);(!r[h]||c.fullPath.endsWith("/"))&&(r[h]=c)}const u=c.children;u?.length&&a(u)})};a([e]);const i=_o(Object.values(s));return{routesById:s,routesByPath:r,flatRoutes:i}}function ct(e){return!!e?.isNotFound}function ko(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const nr="tsr-scroll-restoration-v1_3",jo=(e,t)=>{let s;return(...r)=>{s||(s=setTimeout(()=>{e(...r),s=null},t))}};function No(){const e=ko();if(!e)return null;const t=e.getItem(nr);let s=t?JSON.parse(t):{};return{state:s,set:r=>(s=Lt(r,s)||s,e.setItem(nr,JSON.stringify(s)))}}const zs=No(),Ir=e=>e.state.__TSR_key||e.href;function Co(e){const t=[];let s;for(;s=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(s.children,e)+1})`),e=s;return`${t.reverse().join(" > ")}`.toLowerCase()}let ar=!1;function Aa({storageKey:e,key:t,behavior:s,shouldScrollRestoration:r,scrollToTopSelectors:a,location:i}){let o;try{o=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(d){console.error(d);return}const c=t||window.history.state?.__TSR_key,l=o[c];ar=!0;e:{if(r&&l&&Object.keys(l).length>0){for(const h in l){const m=l[h];if(h==="window")window.scrollTo({top:m.scrollY,left:m.scrollX,behavior:s});else if(h){const g=document.querySelector(h);g&&(g.scrollLeft=m.scrollX,g.scrollTop=m.scrollY)}}break e}const d=(i??window.location).hash.split("#",2)[1];if(d){const h=window.history.state?.__hashScrollIntoViewOptions??!0;if(h){const m=document.getElementById(d);m&&m.scrollIntoView(h)}break e}const u={top:0,left:0,behavior:s};if(window.scrollTo(u),a)for(const h of a){if(h==="window")continue;const m=typeof h=="function"?h():document.querySelector(h);m&&m.scrollTo(u)}}ar=!1}function Ro(e,t){if(!zs&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!zs))return;e.isScrollRestorationSetup=!0,ar=!1;const r=e.options.getScrollRestorationKey||Ir;window.history.scrollRestoration="manual";const a=i=>{if(ar||!e.isScrollRestoring)return;let o="";if(i.target===document||i.target===window)o="window";else{const l=i.target.getAttribute("data-scroll-restoration-id");l?o=`[data-scroll-restoration-id="${l}"]`:o=Co(i.target)}const c=r(e.state.location);zs.set(l=>{const d=l[c]||={},u=d[o]||={};if(o==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(o){const h=document.querySelector(o);h&&(u.scrollX=h.scrollLeft||0,u.scrollY=h.scrollTop||0)}return l})};typeof document<"u"&&document.addEventListener("scroll",jo(a,100),!0),e.subscribe("onRendered",i=>{const o=r(i.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(Aa({storageKey:nr,key:o,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&zs.set(c=>(c[o]||={},c)))})}function Po(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const s=document.getElementById(e.state.location.hash);s&&s.scrollIntoView(t)}}}function Mo(e,t=String){const s=new URLSearchParams;for(const r in e){const a=e[r];a!==void 0&&s.set(r,t(a))}return s.toString()}function Sr(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function Eo(e){const t=new URLSearchParams(e),s={};for(const[r,a]of t.entries()){const i=s[r];i==null?s[r]=Sr(a):Array.isArray(i)?i.push(Sr(a)):s[r]=[i,Sr(a)]}return s}const To=Lo(JSON.parse),Ao=Oo(JSON.stringify,JSON.parse);function Lo(e){return t=>{t[0]==="?"&&(t=t.substring(1));const s=Eo(t);for(const r in s){const a=s[r];if(typeof a=="string")try{s[r]=e(a)}catch{}}return s}}function Oo(e,t){const s=typeof t=="function";function r(a){if(typeof a=="object"&&a!==null)try{return e(a)}catch{}else if(s&&typeof a=="string")try{return t(a),e(a)}catch{}return a}return a=>{const i=Mo(a,r);return i?`?${i}`:""}}const Ye="__root__";function Io(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const s=new Response(null,{status:e.statusCode,headers:t});if(s.options=e,e.throw)throw s;return s}function nt(e){return e instanceof Response&&!!e.options}function Do(e){const t=new Map;let s,r;const a=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,r&&(r.next=i,i.prev=r)):(i.next.prev=void 0,s=i.next,i.next=void 0,r&&(i.prev=r,r.next=i)),r=i)};return{get(i){const o=t.get(i);if(o)return a(o),o.value},set(i,o){if(t.size>=e&&s){const l=s;t.delete(l.key),l.next&&(s=l.next,l.next.prev=void 0),l===r&&(r=void 0)}const c=t.get(i);if(c)c.value=o,a(c);else{const l={key:i,value:o,prev:r};r&&(r.next=l),r=l,s||(s=l),t.set(i,l)}}}}const Ys=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},xr=(e,t)=>!!(e.preload&&!e.router.state.matches.some(s=>s.id===t)),La=(e,t)=>{const s=e.router.routesById[t.routeId??""]??e.router.routeTree;!s.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(s.options.notFoundComponent=e.router.options.defaultNotFoundComponent),gt(s.options.notFoundComponent);const r=e.matches.find(a=>a.routeId===s.id);gt(r,"Could not find match for route: "+s.id),e.updateMatch(r.id,a=>({...a,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&s.parentRoute&&(t.routeId=s.parentRoute.id,La(e,t))},_t=(e,t,s)=>{if(!(!nt(s)&&!ct(s))){if(nt(s)&&s.redirectHandled&&!s.options.reloadDocument)throw s;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const r=nt(s)?"redirected":"notFound";e.updateMatch(t.id,a=>({...a,status:r,isFetching:!1,error:s})),ct(s)&&!s.routeId&&(s.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw nt(s)?(e.rendered=!0,s.options._fromLocation=e.location,s.redirectHandled=!0,s=e.router.resolveRedirect(s),s):(La(e,s),s)}},Oa=(e,t)=>{const s=e.router.getMatch(t);return!!(!e.router.isServer&&s._nonReactive.dehydrated||e.router.isServer&&s.ssr===!1)},ds=(e,t,s,r)=>{const{id:a,routeId:i}=e.matches[t],o=e.router.looseRoutesById[i];if(s instanceof Promise)throw s;s.routerCode=r,e.firstBadMatchIndex??=t,_t(e,e.router.getMatch(a),s);try{o.options.onError?.(s)}catch(c){s=c,_t(e,e.router.getMatch(a),s)}e.updateMatch(a,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:s,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},Fo=(e,t,s,r)=>{const a=e.router.getMatch(t),i=e.matches[s-1]?.id,o=i?e.router.getMatch(i):void 0;if(e.router.isShell()){a.ssr=t===Ye;return}if(o?.ssr===!1){a.ssr=!1;return}const c=g=>g===!0&&o?.ssr==="data-only"?"data-only":g,l=e.router.options.defaultSsr??!0;if(r.options.ssr===void 0){a.ssr=c(l);return}if(typeof r.options.ssr!="function"){a.ssr=c(r.options.ssr);return}const{search:d,params:u}=a,h={search:$s(d,a.searchError),params:$s(u,a.paramsError),location:e.location,matches:e.matches.map(g=>({index:g.index,pathname:g.pathname,fullPath:g.fullPath,staticData:g.staticData,id:g.id,routeId:g.routeId,search:$s(g.search,g.searchError),params:$s(g.params,g.paramsError),ssr:g.ssr}))},m=r.options.ssr(h);if(jt(m))return m.then(g=>{a.ssr=c(g??l)});a.ssr=c(m??l)},Ia=(e,t,s,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const a=s.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!xr(e,t)&&(s.options.loader||s.options.beforeLoad||za(s))&&typeof a=="number"&&a!==1/0&&(s.options.pendingComponent??e.router.options?.defaultPendingComponent))){const o=setTimeout(()=>{Ys(e)},a);r._nonReactive.pendingTimeout=o}},zo=(e,t,s)=>{const r=e.router.getMatch(t);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;Ia(e,t,s,r);const a=()=>{const i=e.router.getMatch(t);i.preload&&(i.status==="redirected"||i.status==="notFound")&&_t(e,i,i.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(a):a()},$o=(e,t,s,r)=>{const a=e.router.getMatch(t),i=a._nonReactive.loadPromise;a._nonReactive.loadPromise=Jt(()=>{i?.resolve()});const{paramsError:o,searchError:c}=a;o&&ds(e,s,o,"PARSE_PARAMS"),c&&ds(e,s,c,"VALIDATE_SEARCH"),Ia(e,t,r,a);const l=new AbortController,d=e.matches[s-1]?.id,m={...(d?e.router.getMatch(d):void 0)?.context??e.router.options.context??void 0,...a.__routeContext};let g=!1;const p=()=>{g||(g=!0,e.updateMatch(t,P=>({...P,isFetching:"beforeLoad",fetchCount:P.fetchCount+1,abortController:l,context:m})))},x=()=>{a._nonReactive.beforeLoadPromise?.resolve(),a._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,P=>({...P,isFetching:!1}))};if(!r.options.beforeLoad){js(()=>{p(),x()});return}a._nonReactive.beforeLoadPromise=Jt();const{search:j,params:L,cause:K}=a,D=xr(e,t),V={search:j,abortController:l,params:L,preload:D,context:m,location:e.location,navigate:P=>e.router.navigate({...P,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:D?"preload":K,matches:e.matches,...e.router.options.additionalContext},ee=P=>{if(P===void 0){js(()=>{p(),x()});return}(nt(P)||ct(P))&&(p(),ds(e,s,P,"BEFORE_LOAD")),js(()=>{p(),e.updateMatch(t,C=>({...C,__beforeLoadContext:P,context:{...C.context,...P}})),x()})};let G;try{if(G=r.options.beforeLoad(V),jt(G))return p(),G.catch(P=>{ds(e,s,P,"BEFORE_LOAD")}).then(ee)}catch(P){p(),ds(e,s,P,"BEFORE_LOAD")}ee(G)},Bo=(e,t)=>{const{id:s,routeId:r}=e.matches[t],a=e.router.looseRoutesById[r],i=()=>{if(e.router.isServer){const l=Fo(e,s,t,a);if(jt(l))return l.then(c)}return c()},o=()=>$o(e,s,t,a),c=()=>{if(Oa(e,s))return;const l=zo(e,s,a);return jt(l)?l.then(o):o()};return i()},Ns=(e,t,s)=>{const r=e.router.getMatch(t);if(!r||!s.options.head&&!s.options.scripts&&!s.options.headers)return;const a={matches:e.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([s.options.head?.(a),s.options.scripts?.(a),s.options.headers?.(a)]).then(([i,o,c])=>{const l=i?.meta,d=i?.links,u=i?.scripts,h=i?.styles;return{meta:l,links:d,headScripts:u,headers:c,scripts:o,styles:h}})},Da=(e,t,s,r)=>{const a=e.matchPromises[s-1],{params:i,loaderDeps:o,abortController:c,context:l,cause:d}=e.router.getMatch(t),u=xr(e,t);return{params:i,deps:o,preload:!!u,parentMatchPromise:a,abortController:c,context:l,location:e.location,navigate:h=>e.router.navigate({...h,_fromLocation:e.location}),cause:u?"preload":d,route:r,...e.router.options.additionalContext}},Bn=async(e,t,s,r)=>{try{const a=e.router.getMatch(t);try{(!e.router.isServer||a.ssr===!0)&&Fa(r);const i=r.options.loader?.(Da(e,t,s,r)),o=r.options.loader&&jt(i);if(!!(o||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||a._nonReactive.minPendingPromise)&&e.updateMatch(t,h=>({...h,isFetching:"loader"})),r.options.loader){const h=o?await i:i;_t(e,e.router.getMatch(t),h),h!==void 0&&e.updateMatch(t,m=>({...m,loaderData:h}))}r._lazyPromise&&await r._lazyPromise;const l=Ns(e,t,r),d=l?await l:void 0,u=a._nonReactive.minPendingPromise;u&&await u,r._componentsPromise&&await r._componentsPromise,e.updateMatch(t,h=>({...h,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...d}))}catch(i){let o=i;const c=a._nonReactive.minPendingPromise;c&&await c,_t(e,e.router.getMatch(t),i);try{r.options.onError?.(i)}catch(u){o=u,_t(e,e.router.getMatch(t),u)}const l=Ns(e,t,r),d=l?await l:void 0;e.updateMatch(t,u=>({...u,error:o,status:"error",isFetching:!1,...d}))}}catch(a){const i=e.router.getMatch(t);if(i){const o=Ns(e,t,r);if(o){const c=await o;e.updateMatch(t,l=>({...l,...c}))}i._nonReactive.loaderPromise=void 0}_t(e,i,a)}},Vo=async(e,t)=>{const{id:s,routeId:r}=e.matches[t];let a=!1,i=!1;const o=e.router.looseRoutesById[r];if(Oa(e,s)){if(e.router.isServer){const d=Ns(e,s,o);if(d){const u=await d;e.updateMatch(s,h=>({...h,...u}))}return e.router.getMatch(s)}}else{const d=e.router.getMatch(s);if(d._nonReactive.loaderPromise){if(d.status==="success"&&!e.sync&&!d.preload)return d;await d._nonReactive.loaderPromise;const u=e.router.getMatch(s);u.error&&_t(e,u,u.error)}else{const u=Date.now()-d.updatedAt,h=xr(e,s),m=h?o.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:o.options.staleTime??e.router.options.defaultStaleTime??0,g=o.options.shouldReload,p=typeof g=="function"?g(Da(e,s,t,o)):g,x=!!h&&!e.router.state.matches.some(D=>D.id===s),j=e.router.getMatch(s);j._nonReactive.loaderPromise=Jt(),x!==j.preload&&e.updateMatch(s,D=>({...D,preload:x}));const{status:L,invalid:K}=j;if(a=L==="success"&&(K||(p??u>m)),!(h&&o.options.preload===!1))if(a&&!e.sync)i=!0,(async()=>{try{await Bn(e,s,t,o);const D=e.router.getMatch(s);D._nonReactive.loaderPromise?.resolve(),D._nonReactive.loadPromise?.resolve(),D._nonReactive.loaderPromise=void 0}catch(D){nt(D)&&await e.router.navigate(D.options)}})();else if(L!=="success"||a&&e.sync)await Bn(e,s,t,o);else{const D=Ns(e,s,o);if(D){const V=await D;e.updateMatch(s,ee=>({...ee,...V}))}}}}const c=e.router.getMatch(s);i||(c._nonReactive.loaderPromise?.resolve(),c._nonReactive.loadPromise?.resolve()),clearTimeout(c._nonReactive.pendingTimeout),c._nonReactive.pendingTimeout=void 0,i||(c._nonReactive.loaderPromise=void 0),c._nonReactive.dehydrated=void 0;const l=i?c.isFetching:!1;return l!==c.isFetching||c.invalid!==!1?(e.updateMatch(s,d=>({...d,isFetching:l,invalid:!1})),e.router.getMatch(s)):c};async function Vn(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(s=>s._forcePending)&&Ys(t);try{for(let a=0;a<t.matches.length;a++){const i=Bo(t,a);jt(i)&&await i}const s=t.firstBadMatchIndex??t.matches.length;for(let a=0;a<s;a++)t.matchPromises.push(Vo(t,a));await Promise.all(t.matchPromises);const r=Ys(t);jt(r)&&await r}catch(s){if(ct(s)&&!t.preload){const r=Ys(t);throw jt(r)&&await r,s}if(nt(s))throw s}return t.matches}async function Fa(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:s,...r}=t.options;Object.assign(e.options,r),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const s=[];for(const r of $a){const a=e.options[r]?.preload;a&&s.push(a())}if(s.length)return Promise.all(s).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function $s(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function za(e){for(const t of $a)if(e.options[t]?.preload)return!0;return!1}const $a=["component","errorComponent","pendingComponent","notFoundComponent"];function Uo(e){return{input:({url:t})=>{for(const s of e)t=Ba(s,t);return t},output:({url:t})=>{for(let s=e.length-1;s>=0;s--)t=Va(e[s],t);return t}}}function Wo(e){const t=Lr(e.basepath),s=new RegExp(`^/${t}/`,e.caseSensitive?"":"i");return{input:({url:r})=>(r.pathname=r.pathname.replace(s,"/"),r),output:({url:r})=>(r.pathname=pt(["/",t,r.pathname]),r)}}function Ba(e,t){const s=e?.input?.({url:t});if(s){if(typeof s=="string")return new URL(s);if(s instanceof URL)return s}return t}function Va(e,t){const s=e?.output?.({url:t});if(s){if(typeof s=="string")return new URL(s);if(s instanceof URL)return s}return t}function It(e){const t=e.resolvedLocation,s=e.location,r=t?.pathname!==s.pathname,a=t?.href!==s.href,i=t?.hash!==s.hash;return{fromLocation:t,toLocation:s,pathChanged:r,hrefChanged:a,hashChanged:i}}class Go{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=s=>s(),this.update=s=>{if(s.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info."),this.options={...this.options,...s},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(r=>[encodeURIComponent(r),r])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=Yi())),this.options.basepath){const r=Wo({basepath:this.options.basepath});this.options.rewrite?this.rewrite=Uo([r,this.options.rewrite]):this.rewrite=r}else this.rewrite=this.options.rewrite;this.origin=this.options.origin,this.origin||(this.isServer?this.origin="http://localhost":this.origin=window.origin),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new Tr(Zo(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(r=>!["redirected"].includes(r.status))}}}),Ro(this)),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:s,routesByPath:r,flatRoutes:a}=So({routeTree:this.routeTree,initRoute:(o,c)=>{o.init({originalIndex:c})}});this.routesById=s,this.routesByPath=r,this.flatRoutes=a;const i=this.options.notFoundRoute;i&&(i.init({originalIndex:99999999999}),this.routesById[i.id]=i)},this.subscribe=(s,r)=>{const a={eventType:s,fn:r};return this.subscribers.add(a),()=>{this.subscribers.delete(a)}},this.emit=s=>{this.subscribers.forEach(r=>{r.eventType===s.type&&r.fn(s)})},this.parseLocation=(s,r)=>{const a=({href:l,state:d})=>{const u=new URL(l,this.origin),h=Ba(this.rewrite,u),m=this.options.parseSearch(h.search),g=this.options.stringifySearch(m);h.search=g;const p=h.href.replace(h.origin,""),{pathname:x,hash:j}=h;return{href:p,publicHref:l,url:h.href,pathname:x,searchStr:g,search:Ke(r?.search,m),hash:j.split("#").reverse()[0]??"",state:Ke(r?.state,d)}},i=a(s),{__tempLocation:o,__tempKey:c}=i.state;if(o&&(!c||c===this.tempLocationKey)){const l=a(o);return l.state.key=i.state.key,l.state.__TSR_key=i.state.__TSR_key,delete l.state.__tempLocation,{...l,maskedLocation:i}}return i},this.resolvePathWithBase=(s,r)=>so({base:s,to:mn(r),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(s,r,a)=>typeof s=="string"?this.matchRoutesInternal({pathname:s,search:r},a):this.matchRoutesInternal(s,r),this.parsePathnameCache=Do(1e3),this.getMatchedRoutes=(s,r)=>Ko({pathname:s,routePathname:r,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=s=>{const r=this.getMatch(s);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{this.state.pendingMatches?.forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=s=>{const r=(i={})=>{const o=i._fromLocation||this.latestLocation,c=this.matchRoutes(o,{_buildLocation:!0}),l=Ar(c);i.from;const d=i.unsafeRelative==="path"?o.pathname:i.from??l.fullPath,u=this.resolvePathWithBase(d,"."),h=l.search,m={...l.params},g=i.to?this.resolvePathWithBase(u,`${i.to}`):this.resolvePathWithBase(u,"."),p=i.params===!1||i.params===null?{}:(i.params??!0)===!0?m:Object.assign(m,Lt(i.params,m)),x=Fs({path:g,params:p,parseCache:this.parsePathnameCache}).interpolatedPath,j=this.matchRoutes(x,void 0,{_buildLocation:!0}).map(te=>this.looseRoutesById[te.routeId]);if(Object.keys(p).length>0)for(const te of j){const y=te.options.params?.stringify??te.options.stringifyParams;y&&Object.assign(p,y(p))}const L=Fs({path:g,params:p,leaveWildcards:!1,leaveParams:s.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let K=h;if(s._includeValidateSearch&&this.options.search?.strict){const te={};j.forEach(y=>{if(y.options.validateSearch)try{Object.assign(te,Dr(y.options.validateSearch,{...te,...K}))}catch{}}),K=te}K=qo({search:K,dest:i,destRoutes:j,_includeValidateSearch:s._includeValidateSearch}),K=Ke(h,K);const D=this.options.stringifySearch(K),V=i.hash===!0?o.hash:i.hash?Lt(i.hash,o.hash):void 0,ee=V?`#${V}`:"";let G=i.state===!0?o.state:i.state?Lt(i.state,o.state):{};G=Ke(o.state,G);const P=`${L}${D}${ee}`,C=new URL(P,this.origin),B=Va(this.rewrite,C);return{publicHref:B.pathname+B.search+B.hash,href:P,url:B.href,pathname:L,search:K,searchStr:D,state:G,hash:V??"",unmaskOnReload:i.unmaskOnReload}},a=(i={},o)=>{const c=r(i);let l=o?r(o):void 0;if(!l){let d={};const u=this.options.routeMasks?.find(h=>{const m=Or(c.pathname,{to:h.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return m?(d=m,!0):!1});if(u){const{from:h,...m}=u;o={from:s.from,...m,params:d},l=r(o)}}return l&&(c.maskedLocation=l),c};return s.mask?a(s,{from:s.from,...s.mask}):a(s)},this.commitLocation=({viewTransition:s,ignoreBlocker:r,...a})=>{const i=()=>{const l=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];l.forEach(u=>{a.state[u]=this.latestLocation.state[u]});const d=Ot(a.state,this.latestLocation.state);return l.forEach(u=>{delete a.state[u]}),d},o=Nt(this.latestLocation.href)===Nt(a.href),c=this.commitLocationPromise;if(this.commitLocationPromise=Jt(()=>{c?.resolve()}),o&&i())this.load();else{let{maskedLocation:l,hashScrollIntoView:d,...u}=a;l&&(u={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=s,this.history[a.replace?"replace":"push"](u.publicHref,u.state,{ignoreBlocker:r})}return this.resetNextScroll=a.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:s,resetScroll:r,hashScrollIntoView:a,viewTransition:i,ignoreBlocker:o,href:c,...l}={})=>{if(c){const u=this.history.location.state.__TSR_index,h=tr(c,{__TSR_index:s?u:u+1});l.to=h.pathname,l.search=this.options.parseSearch(h.search),l.hash=h.hash.slice(1)}const d=this.buildLocation({...l,_includeValidateSearch:!0});return this.commitLocation({...d,viewTransition:i,replace:s,resetScroll:r,hashScrollIntoView:a,ignoreBlocker:o})},this.navigate=({to:s,reloadDocument:r,href:a,...i})=>{if(!r&&a)try{new URL(`${a}`),r=!0}catch{}return r?(a||(a=this.buildLocation({to:s,...i}).href),i.replace?window.location.replace(a):window.location.href=a,Promise.resolve()):this.buildAndCommitLocation({...i,href:a,to:s,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),a=i=>{try{return encodeURI(decodeURI(i))}catch{return i}};if(Lr(a(this.latestLocation.href))!==Lr(a(r.href)))throw Io({href:r.href})}const s=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:s,cachedMatches:r.cachedMatches.filter(a=>!s.some(i=>i.id===a.id))}))},this.load=async s=>{let r,a,i;for(i=new Promise(o=>{this.startTransition(async()=>{try{this.beforeLoad();const c=this.latestLocation,l=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...It({resolvedLocation:l,location:c})}),this.emit({type:"onBeforeLoad",...It({resolvedLocation:l,location:c})}),await Vn({router:this,sync:s?.sync,matches:this.state.pendingMatches,location:c,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let d,u,h;js(()=>{this.__store.setState(m=>{const g=m.matches,p=m.pendingMatches||m.matches;return d=g.filter(x=>!p.some(j=>j.id===x.id)),u=p.filter(x=>!g.some(j=>j.id===x.id)),h=g.filter(x=>p.some(j=>j.id===x.id)),{...m,isLoading:!1,loadedAt:Date.now(),matches:p,pendingMatches:void 0,cachedMatches:[...m.cachedMatches,...d.filter(x=>x.status!=="error")]}}),this.clearExpiredCache()}),[[d,"onLeave"],[u,"onEnter"],[h,"onStay"]].forEach(([m,g])=>{m.forEach(p=>{this.looseRoutesById[p.routeId].options[g]?.(p)})})})}})}catch(c){nt(c)?(r=c,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):ct(c)&&(a=c),this.__store.setState(l=>({...l,statusCode:r?r.status:a?404:l.matches.some(d=>d.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===i&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(o=>({...o,statusCode:404}))},this.startViewTransition=s=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let a;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,o=this.state.resolvedLocation,c=typeof r.types=="function"?r.types(It({resolvedLocation:o,location:i})):r.types;a={update:s,types:c}}else a=s;document.startViewTransition(a)}else s()},this.updateMatch=(s,r)=>{const a=this.state.pendingMatches?.some(i=>i.id===s)?"pendingMatches":this.state.matches.some(i=>i.id===s)?"matches":this.state.cachedMatches.some(i=>i.id===s)?"cachedMatches":"";a&&this.__store.setState(i=>({...i,[a]:i[a]?.map(o=>o.id===s?r(o):o)}))},this.getMatch=s=>{const r=a=>a.id===s;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=s=>{const r=a=>s?.filter?.(a)??!0?{...a,invalid:!0,...s?.forcePending||a.status==="error"?{status:"pending",error:void 0}:void 0}:a;return this.__store.setState(a=>({...a,matches:a.matches.map(r),cachedMatches:a.cachedMatches.map(r),pendingMatches:a.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:s?.sync})},this.resolveRedirect=s=>(s.options.href||(s.options.href=this.buildLocation(s.options).href,s.headers.set("Location",s.options.href)),s.headers.get("Location")||s.headers.set("Location",s.options.href),s),this.clearCache=s=>{const r=s?.filter;r!==void 0?this.__store.setState(a=>({...a,cachedMatches:a.cachedMatches.filter(i=>!r(i))})):this.__store.setState(a=>({...a,cachedMatches:[]}))},this.clearExpiredCache=()=>{const s=r=>{const a=this.looseRoutesById[r.routeId];if(!a.options.loader)return!0;const i=(r.preload?a.options.preloadGcTime??this.options.defaultPreloadGcTime:a.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=i};this.clearCache({filter:s})},this.loadRouteChunk=Fa,this.preloadRoute=async s=>{const r=this.buildLocation(s);let a=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:s});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),o=new Set([...i,...this.state.cachedMatches.map(c=>c.id)]);js(()=>{a.forEach(c=>{o.has(c.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,c]}))})});try{return a=await Vn({router:this,matches:a,location:r,preload:!0,updateMatch:(c,l)=>{i.has(c)?a=a.map(d=>d.id===c?l(d):d):this.updateMatch(c,l)}}),a}catch(c){if(nt(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:r});ct(c)||console.error(c);return}},this.matchRoute=(s,r)=>{const a={...s,to:s.to?this.resolvePathWithBase(s.from||"",s.to):void 0,params:s.params||{},leaveParams:!0},i=this.buildLocation(a);if(r?.pending&&this.state.status!=="pending")return!1;const c=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,l=Or(c.pathname,{...r,to:i.pathname},this.parsePathnameCache);return!l||s.params&&!Ot(l,s.params,{partial:!0})?!1:l&&(r?.includeSearch??!0)?Ot(c.search,i.search,{partial:!0})?l:!1:l},this.hasNotFoundMatch=()=>this.__store.state.matches.some(s=>s.status==="notFound"||s.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??Ao,parseSearch:t.parseSearch??To}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,s){const{foundRoute:r,matchedRoutes:a,routeParams:i}=this.getMatchedRoutes(t.pathname,s?.dest?.to);let o=!1;(r?r.path!=="/"&&i["**"]:Nt(t.pathname))&&(this.options.notFoundRoute?a.push(this.options.notFoundRoute):o=!0);const c=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let u=a.length-1;u>=0;u--){const h=a[u];if(h.children)return h.id}return Ye}})(),l=[],d=u=>u?.id?u.context??this.options.context??void 0:this.options.context??void 0;return a.forEach((u,h)=>{const m=l[h-1],[g,p,x]=(()=>{const M=m?.search??t.search,H=m?._strictSearch??void 0;try{const k=Dr(u.options.validateSearch,{...M})??void 0;return[{...M,...k},{...H,...k},void 0]}catch(k){let T=k;if(k instanceof ir||(T=new ir(k.message,{cause:k})),s?.throwOnError)throw T;return[M,{},T]}})(),j=u.options.loaderDeps?.({search:g})??"",L=j?JSON.stringify(j):"",{interpolatedPath:K,usedParams:D}=Fs({path:u.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),V=Fs({path:u.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+L,ee=this.getMatch(V),G=this.state.matches.find(M=>M.routeId===u.id),P=ee?._strictParams??D;let C;if(!ee){const M=u.options.params?.parse??u.options.parseParams;if(M)try{Object.assign(P,M(P))}catch(H){if(C=new Ho(H.message,{cause:H}),s?.throwOnError)throw C}}Object.assign(i,P);const B=G?"stay":"enter";let te;if(ee)te={...ee,cause:B,params:G?Ke(G.params,i):i,_strictParams:P,search:Ke(G?G.search:ee.search,g),_strictSearch:p};else{const M=u.options.loader||u.options.beforeLoad||u.lazyFn||za(u)?"pending":"success";te={id:V,index:h,routeId:u.id,params:G?Ke(G.params,i):i,_strictParams:P,pathname:K,updatedAt:Date.now(),search:G?Ke(G.search,g):g,_strictSearch:p,searchError:void 0,status:M,isFetching:!1,error:void 0,paramsError:C,__routeContext:void 0,_nonReactive:{loadPromise:Jt()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:B,loaderDeps:G?Ke(G.loaderDeps,j):j,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:u.options.staticData||{},fullPath:u.fullPath}}s?.preload||(te.globalNotFound=c===u.id),te.searchError=x;const y=d(m);te.context={...y,...te.__routeContext,...te.__beforeLoadContext},l.push(te)}),l.forEach((u,h)=>{const m=this.looseRoutesById[u.routeId];if(!this.getMatch(u.id)&&s?._buildLocation!==!0){const p=l[h-1],x=d(p);if(m.options.context){const j={deps:u.loaderDeps,params:u.params,context:x??{},location:t,navigate:L=>this.navigate({...L,_fromLocation:t}),buildLocation:this.buildLocation,cause:u.cause,abortController:u.abortController,preload:!!u.preload,matches:l};u.__routeContext=m.options.context(j)??void 0}u.context={...x,...u.__routeContext,...u.__beforeLoadContext}}}),l}}class ir extends Error{}class Ho extends Error{}function Zo(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Dr(e,t){if(e==null)return{};if("~standard"in e){const s=e["~standard"].validate(t);if(s instanceof Promise)throw new ir("Async validation not supported");if(s.issues)throw new ir(JSON.stringify(s.issues,void 0,2),{cause:s});return s.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function Ko({pathname:e,routePathname:t,caseSensitive:s,routesByPath:r,routesById:a,flatRoutes:i,parseCache:o}){let c={};const l=Nt(e),d=g=>Or(l,{to:g.fullPath,caseSensitive:g.options?.caseSensitive??s,fuzzy:!0},o);let u=t!==void 0?r[t]:void 0;if(u)c=d(u);else{let g;for(const p of i){const x=d(p);if(x)if(p.path!=="/"&&x["**"])g||(g={foundRoute:p,routeParams:x});else{u=p,c=x;break}}!u&&g&&(u=g.foundRoute,c=g.routeParams)}let h=u||a[Ye];const m=[h];for(;h.parentRoute;)h=h.parentRoute,m.push(h);return m.reverse(),{matchedRoutes:m,routeParams:c,foundRoute:u}}function qo({search:e,dest:t,destRoutes:s,_includeValidateSearch:r}){const a=s.reduce((c,l)=>{const d=[];if("search"in l.options)l.options.search?.middlewares&&d.push(...l.options.search.middlewares);else if(l.options.preSearchFilters||l.options.postSearchFilters){const u=({search:h,next:m})=>{let g=h;"preSearchFilters"in l.options&&l.options.preSearchFilters&&(g=l.options.preSearchFilters.reduce((x,j)=>j(x),h));const p=m(g);return"postSearchFilters"in l.options&&l.options.postSearchFilters?l.options.postSearchFilters.reduce((x,j)=>j(x),p):p};d.push(u)}if(r&&l.options.validateSearch){const u=({search:h,next:m})=>{const g=m(h);try{return{...g,...Dr(l.options.validateSearch,g)??void 0}}catch{return g}};d.push(u)}return c.concat(d)},[])??[],i=({search:c})=>t.search?t.search===!0?c:Lt(t.search,c):{};a.push(i);const o=(c,l)=>{if(c>=a.length)return l;const d=a[c];return d({search:l,next:h=>o(c+1,h)})};return o(0,e)}const Yo="Error preloading route! ";class Ua{constructor(t){if(this.init=s=>{this.originalIndex=s.originalIndex;const r=this.options,a=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),a?this._path=Ye:this.parentRoute||gt(!1);let i=a?Ye:r?.path;i&&i!=="/"&&(i=fn(i));const o=r?.id||i;let c=a?Ye:pt([this.parentRoute.id===Ye?"":this.parentRoute.id,o]);i===Ye&&(i="/"),c!==Ye&&(c=pt(["/",c]));const l=c===Ye?"/":pt([this.parentRoute.fullPath,i]);this._path=i,this._id=c,this._fullPath=l,this._to=l},this.clone=s=>{this._path=s._path,this._id=s._id,this._fullPath=s._fullPath,this._to=s._to,this.options.getParentRoute=s.options.getParentRoute,this.children=s.children},this.addChildren=s=>this._addFileChildren(s),this._addFileChildren=s=>(Array.isArray(s)&&(this.children=s),typeof s=="object"&&s!==null&&(this.children=Object.values(s)),this),this._addFileTypes=()=>this,this.updateLoader=s=>(Object.assign(this.options,s),this),this.update=s=>(Object.assign(this.options,s),this),this.lazy=s=>(this.lazyFn=s,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class Qo extends Ua{constructor(t){super(t)}}function pn(e){const t=e.errorComponent??yr;return n.jsx(Xo,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:s,reset:r})=>s?f.createElement(t,{error:s,reset:r}):e.children})}class Xo extends f.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,s){s.error&&s.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,s){this.props.onCatch&&this.props.onCatch(t,s)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function yr({error:e}){const[t,s]=f.useState(!1);return n.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[n.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),n.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>s(r=>!r),children:t?"Hide Error":"Show Error"})]}),n.jsx("div",{style:{height:".25rem"}}),t?n.jsx("div",{children:n.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?n.jsx("code",{children:e.message}):null})}):null]})}function Jo({children:e,fallback:t=null}){return ec()?n.jsx(Ft.Fragment,{children:e}):n.jsx(Ft.Fragment,{children:t})}function ec(){return Ft.useSyncExternalStore(tc,()=>!0,()=>!1)}function tc(){return()=>{}}function sc(e,t=s=>s){return Pi.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,rc)}function rc(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!t.has(r)||!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const s=Un(e);if(s.length!==Un(t).length)return!1;for(let r=0;r<s.length;r++)if(!Object.prototype.hasOwnProperty.call(t,s[r])||!Object.is(e[s[r]],t[s[r]]))return!1;return!0}function Un(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const kr=f.createContext(null);function Wa(){return typeof document>"u"?kr:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=kr,kr)}function He(e){const t=f.useContext(Wa());return e?.warn,t}function Ve(e){const t=He({warn:e?.router===void 0}),s=e?.router||t,r=f.useRef(void 0);return sc(s.__store,a=>{if(e?.select){if(e.structuralSharing??s.options.defaultStructuralSharing){const i=Ke(r.current,e.select(a));return r.current=i,i}return e.select(a)}return a})}const vr=f.createContext(void 0),nc=f.createContext(void 0);function lt(e){const t=f.useContext(e.from?nc:vr);return Ve({select:r=>{const a=r.matches.find(i=>e.from?e.from===i.routeId:i.id===t);if(gt(!((e.shouldThrow??!0)&&!a),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),a!==void 0)return e.select?e.select(a):a},structuralSharing:e.structuralSharing})}function gn(e){return lt({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function xn(e){const{select:t,...s}=e;return lt({...s,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function yn(e){return lt({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const s=e.strict===!1?t.params:t._strictParams;return e.select?e.select(s):s}})}function vn(e){return lt({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}function bn(e){const t=He();return f.useCallback(s=>t.navigate({...s,from:s.from??e?.from}),[e?.from,t])}var ac=Gi();const Bs=typeof window<"u"?f.useLayoutEffect:f.useEffect;function jr(e){const t=f.useRef({value:e,prev:null}),s=t.current.value;return e!==s&&(t.current={value:e,prev:s}),t.current.prev}function ic(e,t,s={},r={}){f.useEffect(()=>{if(!e.current||r.disabled||typeof IntersectionObserver!="function")return;const a=new IntersectionObserver(([i])=>{t(i)},s);return a.observe(e.current),()=>{a.disconnect()}},[t,s,r.disabled,e])}function oc(e){const t=f.useRef(null);return f.useImperativeHandle(e,()=>t.current,[]),t}function cc(e,t){const s=He(),[r,a]=f.useState(!1),i=f.useRef(!1),o=oc(t),{activeProps:c,inactiveProps:l,activeOptions:d,to:u,preload:h,preloadDelay:m,hashScrollIntoView:g,replace:p,startTransition:x,resetScroll:j,viewTransition:L,children:K,target:D,disabled:V,style:ee,className:G,onClick:P,onFocus:C,onMouseEnter:B,onMouseLeave:te,onTouchStart:y,ignoreBlocker:M,params:H,search:k,hash:T,state:$,mask:re,reloadDocument:A,unsafeRelative:J,from:je,_fromLocation:Q,...Ce}=e,oe=Ve({select:he=>he.location.search,structuralSharing:!0}),we=e.from,ke=f.useMemo(()=>({...e,from:we}),[s,oe,we,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),_e=f.useMemo(()=>s.buildLocation({...ke}),[s,ke]),w=f.useMemo(()=>{if(V)return;let he=_e.maskedLocation?_e.maskedLocation.url:_e.url,be=!1;return s.origin&&(he.startsWith(s.origin)?he=he.replace(s.origin,"")||"/":be=!0),{href:he,external:be}},[V,_e.maskedLocation,_e.url,s.origin]),_=f.useMemo(()=>{if(w?.external)return w.href;try{return new URL(u),u}catch{}},[u,w]),N=e.reloadDocument||_?!1:h??s.options.defaultPreload,b=m??s.options.defaultPreloadDelay??0,q=Ve({select:he=>{if(_)return!1;if(d?.exact){if(!eo(he.location.pathname,_e.pathname,s.basepath))return!1}else{const be=rr(he.location.pathname,s.basepath),Le=rr(_e.pathname,s.basepath);if(!(be.startsWith(Le)&&(be.length===Le.length||be[Le.length]==="/")))return!1}return(d?.includeSearch??!0)&&!Ot(he.location.search,_e.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?he.location.hash===_e.hash:!0}}),fe=f.useCallback(()=>{s.preloadRoute({...ke}).catch(he=>{console.warn(he),console.warn(Yo)})},[s,ke]),ie=f.useCallback(he=>{he?.isIntersecting&&fe()},[fe]);ic(o,ie,mc,{disabled:!!V||N!=="viewport"}),f.useEffect(()=>{i.current||!V&&N==="render"&&(fe(),i.current=!0)},[V,fe,N]);const X=he=>{const be=he.currentTarget.target,Le=D!==void 0?D:be;if(!V&&!fc(he)&&!he.defaultPrevented&&(!Le||Le==="_self")&&he.button===0){he.preventDefault(),ac.flushSync(()=>{a(!0)});const Ze=s.subscribe("onResolved",()=>{Ze(),a(!1)});s.navigate({...ke,replace:p,resetScroll:j,hashScrollIntoView:g,startTransition:x,viewTransition:L,ignoreBlocker:M})}};if(_)return{...Ce,ref:o,href:_,...K&&{children:K},...D&&{target:D},...V&&{disabled:V},...ee&&{style:ee},...G&&{className:G},...P&&{onClick:P},...C&&{onFocus:C},...B&&{onMouseEnter:B},...te&&{onMouseLeave:te},...y&&{onTouchStart:y}};const xe=he=>{V||N&&fe()},ye=xe,Ee=he=>{if(!(V||!N))if(!b)fe();else{const be=he.target;if(us.has(be))return;const Le=setTimeout(()=>{us.delete(be),fe()},b);us.set(be,Le)}},Ie=he=>{if(V||!N||!b)return;const be=he.target,Le=us.get(be);Le&&(clearTimeout(Le),us.delete(be))},Re=q?Lt(c,{})??lc:Nr,tt=q?Nr:Lt(l,{})??Nr,ze=[G,Re.className,tt.className].filter(Boolean).join(" "),Ue=(ee||Re.style||tt.style)&&{...ee,...Re.style,...tt.style};return{...Ce,...Re,...tt,href:w?.href,ref:o,onClick:hs([P,X]),onFocus:hs([C,xe]),onMouseEnter:hs([B,Ee]),onMouseLeave:hs([te,Ie]),onTouchStart:hs([y,ye]),disabled:!!V,target:D,...Ue&&{style:Ue},...ze&&{className:ze},...V&&dc,...q&&uc,...r&&hc}}const Nr={},lc={className:"active"},dc={role:"link","aria-disabled":!0},uc={"data-status":"active","aria-current":"page"},hc={"data-transitioning":"transitioning"},us=new WeakMap,mc={rootMargin:"100px"},hs=e=>t=>{for(const s of e)if(s){if(t.defaultPrevented)return;s(t)}},or=f.forwardRef((e,t)=>{const{_asChild:s,...r}=e,{type:a,ref:i,...o}=cc(r,t),c=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return s===void 0&&delete o.disabled,f.createElement(s||"a",{...o,ref:i},c)});function fc(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}class pc extends Ua{constructor(t){super(t),this.useMatch=s=>lt({select:s?.select,from:this.id,structuralSharing:s?.structuralSharing}),this.useRouteContext=s=>lt({...s,from:this.id,select:r=>s?.select?s.select(r.context):r.context}),this.useSearch=s=>vn({select:s?.select,structuralSharing:s?.structuralSharing,from:this.id}),this.useParams=s=>yn({select:s?.select,structuralSharing:s?.structuralSharing,from:this.id}),this.useLoaderDeps=s=>xn({...s,from:this.id}),this.useLoaderData=s=>gn({...s,from:this.id}),this.useNavigate=()=>bn({from:this.fullPath}),this.Link=Ft.forwardRef((s,r)=>n.jsx(or,{ref:r,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}}function Bt(e){return new pc(e)}class gc extends Qo{constructor(t){super(t),this.useMatch=s=>lt({select:s?.select,from:this.id,structuralSharing:s?.structuralSharing}),this.useRouteContext=s=>lt({...s,from:this.id,select:r=>s?.select?s.select(r.context):r.context}),this.useSearch=s=>vn({select:s?.select,structuralSharing:s?.structuralSharing,from:this.id}),this.useParams=s=>yn({select:s?.select,structuralSharing:s?.structuralSharing,from:this.id}),this.useLoaderDeps=s=>xn({...s,from:this.id}),this.useLoaderData=s=>gn({...s,from:this.id}),this.useNavigate=()=>bn({from:this.fullPath}),this.Link=Ft.forwardRef((s,r)=>n.jsx(or,{ref:r,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}}function xc(e){return new gc(e)}function Wn(e){return typeof e=="object"?new Gn(e,{silent:!0}).createRoute(e):new Gn(e,{silent:!0}).createRoute}class Gn{constructor(t,s){this.path=t,this.createRoute=r=>{this.silent;const a=Bt(r);return a.isRoot=!1,a},this.silent=s?.silent}}class Hn{constructor(t){this.useMatch=s=>lt({select:s?.select,from:this.options.id,structuralSharing:s?.structuralSharing}),this.useRouteContext=s=>lt({from:this.options.id,select:r=>s?.select?s.select(r.context):r.context}),this.useSearch=s=>vn({select:s?.select,structuralSharing:s?.structuralSharing,from:this.options.id}),this.useParams=s=>yn({select:s?.select,structuralSharing:s?.structuralSharing,from:this.options.id}),this.useLoaderDeps=s=>xn({...s,from:this.options.id}),this.useLoaderData=s=>gn({...s,from:this.options.id}),this.useNavigate=()=>{const s=He();return bn({from:s.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function Zn(e){return typeof e=="object"?new Hn(e):t=>new Hn({id:e,...t})}function yc(){const e=He(),t=f.useRef({router:e,mounted:!1}),[s,r]=f.useState(!1),{hasPendingMatches:a,isLoading:i}=Ve({select:h=>({isLoading:h.isLoading,hasPendingMatches:h.matches.some(m=>m.status==="pending")}),structuralSharing:!0}),o=jr(i),c=i||s||a,l=jr(c),d=i||a,u=jr(d);return e.startTransition=h=>{r(!0),f.startTransition(()=>{h(),r(!1)})},f.useEffect(()=>{const h=e.history.subscribe(e.load),m=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Nt(e.latestLocation.href)!==Nt(m.href)&&e.commitLocation({...m,replace:!0}),()=>{h()}},[e,e.history]),Bs(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(m){console.error(m)}})()},[e]),Bs(()=>{o&&!i&&e.emit({type:"onLoad",...It(e.state)})},[o,e,i]),Bs(()=>{u&&!d&&e.emit({type:"onBeforeRouteMount",...It(e.state)})},[d,u,e]),Bs(()=>{l&&!c&&(e.emit({type:"onResolved",...It(e.state)}),e.__store.setState(h=>({...h,status:"idle",resolvedLocation:h.location})),Po(e))},[c,l,e]),null}function vc(e){const t=Ve({select:s=>`not-found-${s.location.pathname}-${s.status}`});return n.jsx(pn,{getResetKey:()=>t,onCatch:(s,r)=>{if(ct(s))e.onCatch?.(s,r);else throw s},errorComponent:({error:s})=>{if(ct(s))return e.fallback?.(s);throw s},children:e.children})}function bc(){return n.jsx("p",{children:"Not Found"})}function Ht(e){return n.jsx(n.Fragment,{children:e.children})}function Ga(e,t,s){return t.options.notFoundComponent?n.jsx(t.options.notFoundComponent,{data:s}):e.options.defaultNotFoundComponent?n.jsx(e.options.defaultNotFoundComponent,{data:s}):n.jsx(bc,{})}function wc({children:e}){const t=He();return t.isServer?n.jsx("script",{nonce:t.options.ssr?.nonce,className:"$tsr",dangerouslySetInnerHTML:{__html:[e].filter(Boolean).join(`
`)+";$_TSR.c()"}}):null}function _c(){const e=He();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const s=(e.options.getScrollRestorationKey||Ir)(e.latestLocation),r=s!==Ir(e.latestLocation)?s:void 0,a={storageKey:nr,shouldScrollRestoration:!0};return r&&(a.key=r),n.jsx(wc,{children:`(${Aa.toString()})(${JSON.stringify(a)})`})}const Ha=f.memo(function({matchId:t}){const s=He(),r=Ve({select:L=>{const K=L.matches.find(D=>D.id===t);return gt(K),{routeId:K.routeId,ssr:K.ssr,_displayPending:K._displayPending}},structuralSharing:!0}),a=s.routesById[r.routeId],i=a.options.pendingComponent??s.options.defaultPendingComponent,o=i?n.jsx(i,{}):null,c=a.options.errorComponent??s.options.defaultErrorComponent,l=a.options.onCatch??s.options.defaultOnCatch,d=a.isRoot?a.options.notFoundComponent??s.options.notFoundRoute?.options.component:a.options.notFoundComponent,u=r.ssr===!1||r.ssr==="data-only",h=(!a.isRoot||a.options.wrapInSuspense||u)&&(a.options.wrapInSuspense??i??(a.options.errorComponent?.preload||u))?f.Suspense:Ht,m=c?pn:Ht,g=d?vc:Ht,p=Ve({select:L=>L.loadedAt}),x=Ve({select:L=>{const K=L.matches.findIndex(D=>D.id===t);return L.matches[K-1]?.routeId}}),j=a.isRoot?a.options.shellComponent??Ht:Ht;return n.jsxs(j,{children:[n.jsx(vr.Provider,{value:t,children:n.jsx(h,{fallback:o,children:n.jsx(m,{getResetKey:()=>p,errorComponent:c||yr,onCatch:(L,K)=>{if(ct(L))throw L;l?.(L,K)},children:n.jsx(g,{fallback:L=>{if(!d||L.routeId&&L.routeId!==r.routeId||!L.routeId&&!a.isRoot)throw L;return f.createElement(d,L)},children:u||r._displayPending?n.jsx(Jo,{fallback:o,children:n.jsx(Kn,{matchId:t})}):n.jsx(Kn,{matchId:t})})})})}),x===Ye&&s.options.scrollRestoration?n.jsxs(n.Fragment,{children:[n.jsx(Sc,{}),n.jsx(_c,{})]}):null]})});function Sc(){const e=He(),t=f.useRef(void 0);return n.jsx("script",{suppressHydrationWarning:!0,ref:s=>{s&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...It(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const Kn=f.memo(function({matchId:t}){const s=He(),{match:r,key:a,routeId:i}=Ve({select:l=>{const d=l.matches.find(p=>p.id===t),u=d.routeId,m=(s.routesById[u].options.remountDeps??s.options.defaultRemountDeps)?.({routeId:u,loaderDeps:d.loaderDeps,params:d._strictParams,search:d._strictSearch});return{key:m?JSON.stringify(m):void 0,routeId:u,match:{id:d.id,status:d.status,error:d.error,_forcePending:d._forcePending,_displayPending:d._displayPending}}},structuralSharing:!0}),o=s.routesById[i],c=f.useMemo(()=>{const l=o.options.component??s.options.defaultComponent;return l?n.jsx(l,{},a):n.jsx(Za,{})},[a,o.options.component,s.options.defaultComponent]);if(r._displayPending)throw s.getMatch(r.id)?._nonReactive.displayPendingPromise;if(r._forcePending)throw s.getMatch(r.id)?._nonReactive.minPendingPromise;if(r.status==="pending"){const l=o.options.pendingMinMs??s.options.defaultPendingMinMs;if(l){const d=s.getMatch(r.id);if(d&&!d._nonReactive.minPendingPromise&&!s.isServer){const u=Jt();d._nonReactive.minPendingPromise=u,setTimeout(()=>{u.resolve(),d._nonReactive.minPendingPromise=void 0},l)}}throw s.getMatch(r.id)?._nonReactive.loadPromise}if(r.status==="notFound")return gt(ct(r.error)),Ga(s,o,r.error);if(r.status==="redirected")throw gt(nt(r.error)),s.getMatch(r.id)?._nonReactive.loadPromise;if(r.status==="error"){if(s.isServer){const l=(o.options.errorComponent??s.options.defaultErrorComponent)||yr;return n.jsx(l,{error:r.error,reset:void 0,info:{componentStack:""}})}throw r.error}return c}),Za=f.memo(function(){const t=He(),s=f.useContext(vr),r=Ve({select:d=>d.matches.find(u=>u.id===s)?.routeId}),a=t.routesById[r],i=Ve({select:d=>{const h=d.matches.find(m=>m.id===s);return gt(h),h.globalNotFound}}),o=Ve({select:d=>{const u=d.matches,h=u.findIndex(m=>m.id===s);return u[h+1]?.id}}),c=t.options.defaultPendingComponent?n.jsx(t.options.defaultPendingComponent,{}):null;if(i)return Ga(t,a,void 0);if(!o)return null;const l=n.jsx(Ha,{matchId:o});return s===Ye?n.jsx(f.Suspense,{fallback:c,children:l}):l});function kc(){const e=He(),t=e.options.defaultPendingComponent?n.jsx(e.options.defaultPendingComponent,{}):null,s=e.isServer||typeof document<"u"&&e.ssr?Ht:f.Suspense,r=n.jsxs(s,{fallback:t,children:[!e.isServer&&n.jsx(yc,{}),n.jsx(jc,{})]});return e.options.InnerWrap?n.jsx(e.options.InnerWrap,{children:r}):r}function jc(){const e=He(),t=Ve({select:a=>a.matches[0]?.id}),s=Ve({select:a=>a.loadedAt}),r=t?n.jsx(Ha,{matchId:t}):null;return n.jsx(vr.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?r:n.jsx(pn,{getResetKey:()=>s,errorComponent:yr,onCatch:a=>{a.message||a.toString()},children:r})})}const Nc=e=>new Cc(e);class Cc extends Go{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=Wn,globalThis.createLazyFileRoute=Zn):typeof window<"u"&&(window.createFileRoute=Wn,window.createLazyFileRoute=Zn);function Rc({router:e,children:t,...s}){Object.keys(s).length>0&&e.update({...e.options,...s,context:{...e.options.context,...s.context}});const r=Wa(),a=n.jsx(r.Provider,{value:e,children:t});return e.options.Wrap?n.jsx(e.options.Wrap,{children:a}):a}function Pc({router:e,...t}){return n.jsx(Rc,{router:e,...t,children:n.jsx(kc,{})})}function Mc(e){return Ve({select:t=>t.location})}var br=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ec={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Tc=class{#e=Ec;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Fr=new Tc;function Ac(e){setTimeout(e,0)}var wr=typeof window>"u"||"Deno"in globalThis;function Xe(){}function Lc(e,t){return typeof e=="function"?e(t):e}function Oc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ic(e,t){return Math.max(e+(t||0)-Date.now(),0)}function zr(e,t){return typeof e=="function"?e(t):e}function Dc(e,t){return typeof e=="function"?e(t):e}function qn(e,t){const{type:s="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:c}=e;if(o){if(r){if(t.queryHash!==wn(o,t.options))return!1}else if(!Ps(t.queryKey,o))return!1}if(s!=="all"){const l=t.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||a&&a!==t.state.fetchStatus||i&&!i(t))}function Yn(e,t){const{exact:s,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(Rs(t.options.mutationKey)!==Rs(i))return!1}else if(!Ps(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function wn(e,t){return(t?.queryKeyHashFn||Rs)(e)}function Rs(e){return JSON.stringify(e,(t,s)=>$r(s)?Object.keys(s).sort().reduce((r,a)=>(r[a]=s[a],r),{}):s)}function Ps(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Ps(e[s],t[s])):!1}var Fc=Object.prototype.hasOwnProperty;function Ka(e,t){if(e===t)return e;const s=Qn(e)&&Qn(t);if(!s&&!($r(e)&&$r(t)))return t;const a=(s?e:Object.keys(e)).length,i=s?t:Object.keys(t),o=i.length,c=s?new Array(o):{};let l=0;for(let d=0;d<o;d++){const u=s?d:i[d],h=e[u],m=t[u];if(h===m){c[u]=h,(s?d<a:Fc.call(e,u))&&l++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){c[u]=m;continue}const g=Ka(h,m);c[u]=g,g===h&&l++}return a===o&&l===a?e:c}function Qn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $r(e){if(!Xn(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Xn(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Xn(e){return Object.prototype.toString.call(e)==="[object Object]"}function zc(e){return new Promise(t=>{Fr.setTimeout(t,e)})}function $c(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Ka(e,t):t}function Bc(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function Vc(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var _n=Symbol();function qa(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===_n?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Uc=class extends br{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!wr&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ya=new Uc;function Wc(){let e,t;const s=new Promise((a,i)=>{e=a,t=i});s.status="pending",s.catch(()=>{});function r(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},s.reject=a=>{r({status:"rejected",reason:a}),t(a)},s}var Gc=Ac;function Hc(){let e=[],t=0,s=c=>{c()},r=c=>{c()},a=Gc;const i=c=>{t?e.push(c):a(()=>{s(c)})},o=()=>{const c=e;e=[],c.length&&a(()=>{r(()=>{c.forEach(l=>{s(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||o()}return l},batchCalls:c=>(...l)=>{i(()=>{c(...l)})},schedule:i,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var Be=Hc(),Zc=class extends br{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!wr&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},cr=new Zc;function Kc(e){return Math.min(1e3*2**e,3e4)}function Qa(e){return(e??"online")==="online"?cr.isOnline():!0}var Br=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Xa(e){let t=!1,s=0,r;const a=Wc(),i=()=>a.status!=="pending",o=x=>{if(!i()){const j=new Br(x);m(j),e.onCancel?.(j)}},c=()=>{t=!0},l=()=>{t=!1},d=()=>Ya.isFocused()&&(e.networkMode==="always"||cr.isOnline())&&e.canRun(),u=()=>Qa(e.networkMode)&&e.canRun(),h=x=>{i()||(r?.(),a.resolve(x))},m=x=>{i()||(r?.(),a.reject(x))},g=()=>new Promise(x=>{r=j=>{(i()||d())&&x(j)},e.onPause?.()}).then(()=>{r=void 0,i()||e.onContinue?.()}),p=()=>{if(i())return;let x;const j=s===0?e.initialPromise:void 0;try{x=j??e.fn()}catch(L){x=Promise.reject(L)}Promise.resolve(x).then(h).catch(L=>{if(i())return;const K=e.retry??(wr?0:3),D=e.retryDelay??Kc,V=typeof D=="function"?D(s,L):D,ee=K===!0||typeof K=="number"&&s<K||typeof K=="function"&&K(s,L);if(t||!ee){m(L);return}s++,e.onFail?.(s,L),zc(V).then(()=>d()?void 0:g()).then(()=>{t?m(L):p()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r?.(),a),cancelRetry:c,continueRetry:l,canStart:u,start:()=>(u()?p():g().then(p),a)}}var Ja=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Oc(this.gcTime)&&(this.#e=Fr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(wr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Fr.clearTimeout(this.#e),this.#e=void 0)}},qc=class extends Ja{#e;#t;#s;#n;#r;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#s=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Jn(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Jn(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){const s=$c(this.state.data,e,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Xe).catch(Xe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Dc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_n||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>zr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ic(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(l=>l.options.queryFn);c&&this.setOptions(c.options)}const s=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},a=()=>{const c=qa(this.options,t),d=(()=>{const u={client:this.#n,queryKey:this.queryKey,meta:this.meta};return r(u),u})();return this.#o=!1,this.options.persister?this.options.persister(c,d,this):c(d)},o=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return r(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=Xa({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof Br&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(c,l)=>{this.#a({type:"failed",failureCount:c,error:l})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const c=await this.#r.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Br){if(c.silent)return this.#r.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Yc(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const a=e.error;return{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Be.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function Yc(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qa(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Jn(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function ea(e){return{onFetch:(t,s)=>{const r=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},l=0;const d=async()=>{let u=!1;const h=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=qa(t.options,t.fetchOptions),g=async(p,x,j)=>{if(u)return Promise.reject();if(x==null&&p.pages.length)return Promise.resolve(p);const K=(()=>{const G={client:t.client,queryKey:t.queryKey,pageParam:x,direction:j?"backward":"forward",meta:t.options.meta};return h(G),G})(),D=await m(K),{maxPages:V}=t.options,ee=j?Vc:Bc;return{pages:ee(p.pages,D,V),pageParams:ee(p.pageParams,x,V)}};if(a&&i.length){const p=a==="backward",x=p?Qc:ta,j={pages:i,pageParams:o},L=x(r,j);c=await g(j,L,p)}else{const p=e??i.length;do{const x=l===0?o[0]??r.initialPageParam:ta(r,c);if(l>0&&x==null)break;c=await g(c,x),l++}while(l<p)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=d}}}function ta(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function Qc(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}var Xc=class extends Ja{#e;#t;#s;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||Jc(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=Xa({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#r({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const r=this.state.status==="pending",a=!this.#n.canStart();try{if(r)t();else{this.#r({type:"pending",variables:e,isPaused:a}),await this.#s.config.onMutate?.(e,this,s);const o=await this.options.onMutate?.(e,s);o!==this.state.context&&this.#r({type:"pending",context:o,variables:e,isPaused:a})}const i=await this.#n.start();return await this.#s.config.onSuccess?.(i,e,this.state.context,this,s),await this.options.onSuccess?.(i,e,this.state.context,s),await this.#s.config.onSettled?.(i,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(i,null,e,this.state.context,s),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#s.config.onError?.(i,e,this.state.context,this,s),await this.options.onError?.(i,e,this.state.context,s),await this.#s.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,i,e,this.state.context,s),i}finally{this.#r({type:"error",error:i})}}finally{this.#s.runNext(this)}}#r(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Be.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function Jc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var el=class extends br{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(e,t,s){const r=new Xc({client:e,mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){this.#e.add(e);const t=Vs(e);if(typeof t=="string"){const s=this.#t.get(t);s?s.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Vs(e);if(typeof t=="string"){const s=this.#t.get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Vs(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(a=>a.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=Vs(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Be.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Yn(t,s))}findAll(e={}){return this.getAll().filter(t=>Yn(e,t))}notify(e){Be.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Be.batch(()=>Promise.all(e.map(t=>t.continue().catch(Xe))))}};function Vs(e){return e.options.scope?.id}var tl=class extends br{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){const r=t.queryKey,a=t.queryHash??wn(r,t);let i=this.get(a);return i||(i=new qc({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Be.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>qn(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>qn(e,s)):t}notify(e){Be.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Be.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Be.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},sl=class{#e;#t;#s;#n;#r;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new tl,this.#t=e.mutationCache||new el,this.#s=e.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=Ya.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=cr.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=this.#e.build(this,t),r=s.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(zr(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(r.queryHash)?.state.data,o=Lc(t,i);if(o!==void 0)return this.#e.build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return Be.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Be.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=this.#e;return Be.batch(()=>(s.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},r=Be.batch(()=>this.#e.findAll(e).map(a=>a.cancel(s)));return Promise.all(r).then(Xe).catch(Xe)}invalidateQueries(e,t={}){return Be.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},r=Be.batch(()=>this.#e.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(Xe)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xe)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=this.#e.build(this,t);return s.isStaleByTime(zr(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Xe).catch(Xe)}fetchInfiniteQuery(e){return e.behavior=ea(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Xe).catch(Xe)}ensureInfiniteQueryData(e){return e.behavior=ea(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return cr.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#n.set(Rs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],s={};return t.forEach(r=>{Ps(e,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(e,t){this.#r.set(Rs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],s={};return t.forEach(r=>{Ps(e,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=wn(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===_n&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},rl=f.createContext(void 0),nl=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(rl.Provider,{value:e,children:t}));function ei(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=ei(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function al(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=ei(e))&&(r&&(r+=" "),r+=t);return r}const Sn="-",il=e=>{const t=cl(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const c=o.split(Sn);return c[0]===""&&c.length!==1&&c.shift(),ti(c,t)||ol(o)},getConflictingClassGroupIds:(o,c)=>{const l=s[o]||[];return c&&r[o]?[...l,...r[o]]:l}}},ti=(e,t)=>{if(e.length===0)return t.classGroupId;const s=e[0],r=t.nextPart.get(s),a=r?ti(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Sn);return t.validators.find(({validator:o})=>o(i))?.classGroupId},sa=/^\[(.+)\]$/,ol=e=>{if(sa.test(e)){const t=sa.exec(e)[1],s=t?.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},cl=e=>{const{theme:t,classGroups:s}=e,r={nextPart:new Map,validators:[]};for(const a in s)Vr(s[a],r,a,t);return r},Vr=(e,t,s,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:ra(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(ll(a)){Vr(a(r),t,s,r);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{Vr(o,ra(t,i),s,r)})})},ra=(e,t)=>{let s=e;return t.split(Sn).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},ll=e=>e.isThemeGetter,dl=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const a=(i,o)=>{s.set(i,o),t++,t>e&&(t=0,r=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},Ur="!",Wr=":",ul=Wr.length,hl=e=>{const{prefix:t,experimentalParseClassName:s}=e;let r=a=>{const i=[];let o=0,c=0,l=0,d;for(let p=0;p<a.length;p++){let x=a[p];if(o===0&&c===0){if(x===Wr){i.push(a.slice(l,p)),l=p+ul;continue}if(x==="/"){d=p;continue}}x==="["?o++:x==="]"?o--:x==="("?c++:x===")"&&c--}const u=i.length===0?a:a.substring(l),h=ml(u),m=h!==u,g=d&&d>l?d-l:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+Wr,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(s){const a=r;r=i=>s({className:i,parseClassName:a})}return r},ml=e=>e.endsWith(Ur)?e.substring(0,e.length-1):e.startsWith(Ur)?e.substring(1):e,fl=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},pl=e=>({cache:dl(e.cacheSize),parseClassName:hl(e),sortModifiers:fl(e),...il(e)}),gl=/\s+/,xl=(e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],c=e.trim().split(gl);let l="";for(let d=c.length-1;d>=0;d-=1){const u=c[d],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:x}=s(u);if(h){l=u+(l.length>0?" "+l:l);continue}let j=!!x,L=r(j?p.substring(0,x):p);if(!L){if(!j){l=u+(l.length>0?" "+l:l);continue}if(L=r(p),!L){l=u+(l.length>0?" "+l:l);continue}j=!1}const K=i(m).join(":"),D=g?K+Ur:K,V=D+L;if(o.includes(V))continue;o.push(V);const ee=a(L,j);for(let G=0;G<ee.length;++G){const P=ee[G];o.push(D+P)}l=u+(l.length>0?" "+l:l)}return l};function yl(){let e=0,t,s,r="";for(;e<arguments.length;)(t=arguments[e++])&&(s=si(t))&&(r&&(r+=" "),r+=s);return r}const si=e=>{if(typeof e=="string")return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=si(e[r]))&&(s&&(s+=" "),s+=t);return s};function vl(e,...t){let s,r,a,i=o;function o(l){const d=t.reduce((u,h)=>h(u),e());return s=pl(d),r=s.cache.get,a=s.cache.set,i=c,c(l)}function c(l){const d=r(l);if(d)return d;const u=xl(l,s);return a(l,u),u}return function(){return i(yl.apply(null,arguments))}}const Te=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},ri=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ni=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bl=/^\d+\/\d+$/,wl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_l=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sl=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,kl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ut=e=>bl.test(e),de=e=>!!e&&!Number.isNaN(Number(e)),vt=e=>!!e&&Number.isInteger(Number(e)),Cr=e=>e.endsWith("%")&&de(e.slice(0,-1)),ut=e=>wl.test(e),Nl=()=>!0,Cl=e=>_l.test(e)&&!Sl.test(e),ai=()=>!1,Rl=e=>kl.test(e),Pl=e=>jl.test(e),Ml=e=>!U(e)&&!W(e),El=e=>os(e,ci,ai),U=e=>ri.test(e),Tt=e=>os(e,li,Cl),Rr=e=>os(e,Il,de),na=e=>os(e,ii,ai),Tl=e=>os(e,oi,Pl),Us=e=>os(e,di,Rl),W=e=>ni.test(e),ms=e=>cs(e,li),Al=e=>cs(e,Dl),aa=e=>cs(e,ii),Ll=e=>cs(e,ci),Ol=e=>cs(e,oi),Ws=e=>cs(e,di,!0),os=(e,t,s)=>{const r=ri.exec(e);return r?r[1]?t(r[1]):s(r[2]):!1},cs=(e,t,s=!1)=>{const r=ni.exec(e);return r?r[1]?t(r[1]):s:!1},ii=e=>e==="position"||e==="percentage",oi=e=>e==="image"||e==="url",ci=e=>e==="length"||e==="size"||e==="bg-size",li=e=>e==="length",Il=e=>e==="number",Dl=e=>e==="family-name",di=e=>e==="shadow",Fl=()=>{const e=Te("color"),t=Te("font"),s=Te("text"),r=Te("font-weight"),a=Te("tracking"),i=Te("leading"),o=Te("breakpoint"),c=Te("container"),l=Te("spacing"),d=Te("radius"),u=Te("shadow"),h=Te("inset-shadow"),m=Te("text-shadow"),g=Te("drop-shadow"),p=Te("blur"),x=Te("perspective"),j=Te("aspect"),L=Te("ease"),K=Te("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ee=()=>[...V(),W,U],G=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],C=()=>[W,U,l],B=()=>[Ut,"full","auto",...C()],te=()=>[vt,"none","subgrid",W,U],y=()=>["auto",{span:["full",vt,W,U]},vt,W,U],M=()=>[vt,"auto",W,U],H=()=>["auto","min","max","fr",W,U],k=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],T=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...C()],re=()=>[Ut,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],A=()=>[e,W,U],J=()=>[...V(),aa,na,{position:[W,U]}],je=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",Ll,El,{size:[W,U]}],Ce=()=>[Cr,ms,Tt],oe=()=>["","none","full",d,W,U],we=()=>["",de,ms,Tt],ke=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],w=()=>[de,Cr,aa,na],_=()=>["","none",p,W,U],N=()=>["none",de,W,U],b=()=>["none",de,W,U],q=()=>[de,W,U],fe=()=>[Ut,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ut],breakpoint:[ut],color:[Nl],container:[ut],"drop-shadow":[ut],ease:["in","out","in-out"],font:[Ml],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ut],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ut],shadow:[ut],spacing:["px",de],text:[ut],"text-shadow":[ut],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ut,U,W,j]}],container:["container"],columns:[{columns:[de,U,W,c]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ee()}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[vt,"auto",W,U]}],basis:[{basis:[Ut,"full","auto",c,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[de,Ut,"auto","initial","none",U]}],grow:[{grow:["",de,W,U]}],shrink:[{shrink:["",de,W,U]}],order:[{order:[vt,"first","last","none",W,U]}],"grid-cols":[{"grid-cols":te()}],"col-start-end":[{col:y()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":te()}],"row-start-end":[{row:y()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...k(),"normal"]}],"justify-items":[{"justify-items":[...T(),"normal"]}],"justify-self":[{"justify-self":["auto",...T()]}],"align-content":[{content:["normal",...k()]}],"align-items":[{items:[...T(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...T(),{baseline:["","last"]}]}],"place-content":[{"place-content":k()}],"place-items":[{"place-items":[...T(),"baseline"]}],"place-self":[{"place-self":["auto",...T()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[c,"screen",...re()]}],"min-w":[{"min-w":[c,"screen","none",...re()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[o]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",s,ms,Tt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,W,Rr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cr,U]}],"font-family":[{font:[Al,U,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,W,U]}],"line-clamp":[{"line-clamp":[de,"none",W,Rr]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",W,U]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",W,U]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[de,"from-font","auto",W,Tt]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[de,"auto",W,U]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",W,U]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",W,U]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:je()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},vt,W,U],radial:["",W,U],conic:[vt,W,U]},Ol,Tl]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:Ce()}],"gradient-via-pos":[{via:Ce()}],"gradient-to-pos":[{to:Ce()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ke(),"hidden","none"]}],"divide-style":[{divide:[...ke(),"hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:[...ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[de,W,U]}],"outline-w":[{outline:["",de,ms,Tt]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",u,Ws,Us]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",h,Ws,Us]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[de,Tt]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",m,Ws,Us]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[de,W,U]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[de]}],"mask-image-linear-from-pos":[{"mask-linear-from":w()}],"mask-image-linear-to-pos":[{"mask-linear-to":w()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":w()}],"mask-image-t-to-pos":[{"mask-t-to":w()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":w()}],"mask-image-r-to-pos":[{"mask-r-to":w()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":w()}],"mask-image-b-to-pos":[{"mask-b-to":w()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":w()}],"mask-image-l-to-pos":[{"mask-l-to":w()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":w()}],"mask-image-x-to-pos":[{"mask-x-to":w()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":w()}],"mask-image-y-to-pos":[{"mask-y-to":w()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[W,U]}],"mask-image-radial-from-pos":[{"mask-radial-from":w()}],"mask-image-radial-to-pos":[{"mask-radial-to":w()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[de]}],"mask-image-conic-from-pos":[{"mask-conic-from":w()}],"mask-image-conic-to-pos":[{"mask-conic-to":w()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:je()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",W,U]}],filter:[{filter:["","none",W,U]}],blur:[{blur:_()}],brightness:[{brightness:[de,W,U]}],contrast:[{contrast:[de,W,U]}],"drop-shadow":[{"drop-shadow":["","none",g,Ws,Us]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",de,W,U]}],"hue-rotate":[{"hue-rotate":[de,W,U]}],invert:[{invert:["",de,W,U]}],saturate:[{saturate:[de,W,U]}],sepia:[{sepia:["",de,W,U]}],"backdrop-filter":[{"backdrop-filter":["","none",W,U]}],"backdrop-blur":[{"backdrop-blur":_()}],"backdrop-brightness":[{"backdrop-brightness":[de,W,U]}],"backdrop-contrast":[{"backdrop-contrast":[de,W,U]}],"backdrop-grayscale":[{"backdrop-grayscale":["",de,W,U]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[de,W,U]}],"backdrop-invert":[{"backdrop-invert":["",de,W,U]}],"backdrop-opacity":[{"backdrop-opacity":[de,W,U]}],"backdrop-saturate":[{"backdrop-saturate":[de,W,U]}],"backdrop-sepia":[{"backdrop-sepia":["",de,W,U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",W,U]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[de,"initial",W,U]}],ease:[{ease:["linear","initial",L,W,U]}],delay:[{delay:[de,W,U]}],animate:[{animate:["none",K,W,U]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,W,U]}],"perspective-origin":[{"perspective-origin":ee()}],rotate:[{rotate:N()}],"rotate-x":[{"rotate-x":N()}],"rotate-y":[{"rotate-y":N()}],"rotate-z":[{"rotate-z":N()}],scale:[{scale:b()}],"scale-x":[{"scale-x":b()}],"scale-y":[{"scale-y":b()}],"scale-z":[{"scale-z":b()}],"scale-3d":["scale-3d"],skew:[{skew:q()}],"skew-x":[{"skew-x":q()}],"skew-y":[{"skew-y":q()}],transform:[{transform:[W,U,"","none","gpu","cpu"]}],"transform-origin":[{origin:ee()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fe()}],"translate-x":[{"translate-x":fe()}],"translate-y":[{"translate-y":fe()}],"translate-z":[{"translate-z":fe()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",W,U]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",W,U]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[de,ms,Tt,Rr]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},zl=vl(Fl);function Fe(...e){return zl(al(e))}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bl=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,r)=>r?r.toUpperCase():s.toLowerCase()),ia=e=>{const t=Bl(e);return t.charAt(0).toUpperCase()+t.slice(1)},ui=(...e)=>e.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim(),Vl=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ul={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...c},l)=>f.createElement("svg",{ref:l,...Ul,width:t,height:t,stroke:e,strokeWidth:r?Number(s)*24/Number(t):s,className:ui("lucide",a),...!i&&!Vl(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(e,t)=>{const s=f.forwardRef(({className:r,...a},i)=>f.createElement(Wl,{ref:i,iconNode:t,className:ui(`lucide-${$l(ia(e))}`,`lucide-${e}`,r),...a}));return s.displayName=ia(e),s};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Hl=le("arrow-left",Gl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Cs=le("box",Zl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],oa=le("camera",Kl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Yl=le("chart-column",ql);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fs=le("circle-check-big",Ql);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Gs=le("circle-x",Xl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dt=le("circle",Jl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],td=le("clock",ed);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5v14a9 3 0 0 0 18 0V5",key:"aqi0yr"}]],hi=le("cylinder",sd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gr=le("download",rd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ad=le("eye-off",nd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kn=le("eye",id);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],cd=le("folder-open",od);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Hr=le("folder",ld);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],jn=le("grid-3x3",dd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],mi=le("layers",ud);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ps=le("lightbulb",hd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],fd=le("list",md);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zr=le("loader-circle",pd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],xd=le("lock-open",gd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vd=le("lock",yd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=[["path",{d:"M5 12h14",key:"1ays0h"}]],wt=le("minus",bd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],_d=le("mouse-pointer",wd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],fi=le("move-3d",Sd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],jd=le("palette",kd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Cd=le("panel-left-close",Nd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Pd=le("panel-left",Rd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Je=le("plus",Md);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Td=le("refresh-cw",Ed);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],pi=le("rocket",Ad);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Od=le("rotate-ccw",Ld);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Dd=le("rotate-cw",Id);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Nn=le("save",Fd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],$d=le("scale",zd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Vd=le("search",Bd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],At=le("settings",Ud);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],Gd=le("shapes",Wd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ms=le("trash-2",Hd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Kd=le("upload",Zd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yd=le("zap",qd),me=f.forwardRef(({className:e,variant:t="default",size:s="default",...r},a)=>n.jsx("button",{className:Fe("inline-flex items-center justify-center whitespace-nowrap font-medium focus-ring transition-smooth","disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 shadow-md":t==="default"||t==="primary","bg-surface text-text border border-muted hover:bg-muted active:bg-muted/80":t==="surface","text-text hover:bg-muted active:bg-muted/80":t==="ghost","bg-danger text-primary-foreground hover:bg-danger/90 active:bg-danger/80 shadow-md":t==="danger"||t==="destructive","border border-primary text-primary hover:bg-primary hover:text-primary-foreground active:bg-primary/80":t==="outline","text-primary underline-offset-4 hover:underline":t==="link","bg-secondary text-secondary-foreground hover:bg-secondary/80":t==="secondary"},{"h-8 px-3 text-sm rounded-sm":s==="sm","h-10 px-4 text-sm rounded-md":s==="default"||s==="md","h-12 px-6 text-base rounded-lg":s==="lg","h-10 w-10 rounded-md":s==="icon"},e),ref:a,...r}));me.displayName="Button";const gi=({className:e})=>{const[t,s]=f.useState(!1);f.useEffect(()=>{const a=localStorage.getItem("theme"),i=window.matchMedia("(prefers-color-scheme: dark)").matches,o=a==="dark"||a===null&&i;s(o),o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);const r=()=>{const a=!t;s(a),a?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return n.jsx(me,{variant:"ghost",size:"icon",onClick:r,className:Fe("focus-ring",e),"aria-label":t?"Switch to light mode":"Switch to dark mode",children:t?n.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):n.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})},Qd=[{name:"Design",href:"/design",icon:pi},{name:"CAD Studio",href:"/cad",icon:At},{name:"Analysis",href:"/analysis",icon:Yl},{name:"Collections",href:"/collections",icon:cd}];function Xd(){const e=Mc();return n.jsxs("div",{className:"min-h-screen bg-background text-foreground space-gradient",children:[n.jsx("nav",{className:"nav-container shadow-lg",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs(or,{to:"/design",className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-blue-600 rounded-lg flex items-center justify-center",children:n.jsx(pi,{className:"w-5 h-5 text-white"})}),n.jsx("div",{children:n.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-primary to-blue-400 bg-clip-text text-transparent",children:"NASA Habitat Designer"})})]})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex items-center space-x-8",children:Qd.map(t=>{const s=t.icon,r=e.pathname===t.href||t.href==="/design"&&e.pathname==="/";return n.jsxs(or,{to:t.href,className:Fe("inline-flex items-center gap-2 px-1 pt-1 text-sm font-medium transition-colors",r?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:border-border"),children:[n.jsx(s,{className:"w-4 h-4"}),t.name]},t.name)})}),n.jsx(gi,{})]})]})})}),n.jsx("main",{className:"flex-1 bg-background",children:n.jsx(Za,{})})]})}const st=f.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Fe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));st.displayName="Card";const mt=f.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Fe("flex flex-col space-y-1.5 p-6",e),...t}));mt.displayName="CardHeader";const ft=f.forwardRef(({className:e,...t},s)=>n.jsx("h3",{ref:s,className:Fe("text-2xl font-semibold leading-none tracking-tight",e),...t}));ft.displayName="CardTitle";const Jd=f.forwardRef(({className:e,...t},s)=>n.jsx("p",{ref:s,className:Fe("text-sm text-muted-foreground",e),...t}));Jd.displayName="CardDescription";const rt=f.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Fe("p-6 pt-0",e),...t}));rt.displayName="CardContent";const eu=f.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Fe("flex items-center p-6 pt-0",e),...t}));eu.displayName="CardFooter";const Kr=f.forwardRef(({className:e,type:t,...s},r)=>n.jsx("input",{type:t,className:Fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));Kr.displayName="Input";const ws=f.forwardRef(({className:e,...t},s)=>n.jsx("label",{ref:s,className:Fe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));ws.displayName="Label";const Qs=f.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,role:"alert",className:Fe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",e),...t}));Qs.displayName="Alert";const Xs=f.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Fe("text-sm [&_p]:leading-relaxed",e),...t}));Xs.displayName="AlertDescription";const Pr=[{name:"Falcon 9",inner_diameter_m:5.2,inner_height_m:13.1,shape:"OGIVE"},{name:"Falcon Heavy (5.2m)",inner_diameter_m:5.2,inner_height_m:13.1,shape:"OGIVE"},{name:"New Glenn",inner_diameter_m:7,inner_height_m:22,shape:"OGIVE"},{name:"SLS Blk-1",inner_diameter_m:8.4,inner_height_m:27,shape:"CYLINDRICAL"},{name:"Starship (cargo bay)",inner_diameter_m:8,inner_height_m:18,shape:"CYLINDRICAL"}],gs=[{type:"CREW_SLEEP",label:"Crew Bunk",defaultSize:{w_m:2,l_m:2.2,h_m:2.1},icon:"bed"},{type:"HYGIENE",label:"Hygiene Bay",defaultSize:{w_m:2,l_m:2,h_m:2.2},icon:"shower"},{type:"WASTE",label:"Waste Compartment",defaultSize:{w_m:1.8,l_m:1.8,h_m:2.2},icon:"trash"},{type:"EXERCISE",label:"Exercise (ARED)",defaultSize:{w_m:3,l_m:4,h_m:2.5},icon:"dumbbell"},{type:"FOOD_PREP",label:"Galley",defaultSize:{w_m:3,l_m:3,h_m:2.2},icon:"utensils"},{type:"ECLSS",label:"ECLSS Pallets",defaultSize:{w_m:3,l_m:2.5,h_m:2.3},icon:"fan"},{type:"MEDICAL",label:"Med Bay",defaultSize:{w_m:2.5,l_m:2.5,h_m:2.3},icon:"first-aid"},{type:"MAINTENANCE",label:"Maint. Bench",defaultSize:{w_m:2.5,l_m:2.5,h_m:2.3},icon:"wrench"},{type:"STOWAGE",label:"Stowage Rack",defaultSize:{w_m:2.5,l_m:3.5,h_m:2.3},icon:"boxes"},{type:"RECREATION",label:"Recreation",defaultSize:{w_m:2,l_m:2,h_m:2.2},icon:"gamepad"},{type:"WORKSTATION",label:"Workstation",defaultSize:{w_m:2.2,l_m:2.2,h_m:2.2},icon:"monitor"},{type:"AIRLOCK",label:"Airlock",defaultSize:{w_m:2,l_m:2.2,h_m:2.3},icon:"door"},{type:"GLOVEBOX",label:"Glovebox",defaultSize:{w_m:1.4,l_m:1.8,h_m:2},icon:"flask"},{type:"TRASH_MGMT",label:"Trash Mgmt",defaultSize:{w_m:1.5,l_m:2,h_m:2},icon:"recycle"},{type:"COMMON_AREA",label:"Common Area",defaultSize:{w_m:3,l_m:3,h_m:2.2},icon:"users"},{type:"CUSTOM_CAD",label:"Custom CAD Module",defaultSize:{w_m:2,l_m:2,h_m:2},icon:"settings"}];var ge;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function s(a){throw new Error}e.assertNever=s,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),o={};for(const c of i)o[c]=a[c];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ge||(ge={}));var ca;(function(e){e.mergeShapes=(t,s)=>({...t,...s})})(ca||(ca={}));const Z=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bt=e=>{switch(typeof e){case"undefined":return Z.undefined;case"string":return Z.string;case"number":return Number.isNaN(e)?Z.nan:Z.number;case"boolean":return Z.boolean;case"function":return Z.function;case"bigint":return Z.bigint;case"symbol":return Z.symbol;case"object":return Array.isArray(e)?Z.array:e===null?Z.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Z.promise:typeof Map<"u"&&e instanceof Map?Z.map:typeof Set<"u"&&e instanceof Set?Z.set:typeof Date<"u"&&e instanceof Date?Z.date:Z.object;default:return Z.unknown}},E=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xt extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(s(o));else{let c=r,l=0;for(;l<o.path.length;){const d=o.path[l];l===o.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(s(o))):c[d]=c[d]||{_errors:[]},c=c[d],l++}}};return a(this),r}static assert(t){if(!(t instanceof xt))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=s=>s.message){const s={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];s[i]=s[i]||[],s[i].push(t(a))}else r.push(t(a));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}xt.create=e=>new xt(e);const qr=(e,t)=>{let s;switch(e.code){case E.invalid_type:e.received===Z.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case E.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,ge.jsonStringifyReplacer)}`;break;case E.unrecognized_keys:s=`Unrecognized key(s) in object: ${ge.joinValues(e.keys,", ")}`;break;case E.invalid_union:s="Invalid input";break;case E.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${ge.joinValues(e.options)}`;break;case E.invalid_enum_value:s=`Invalid enum value. Expected ${ge.joinValues(e.options)}, received '${e.received}'`;break;case E.invalid_arguments:s="Invalid function arguments";break;case E.invalid_return_type:s="Invalid function return type";break;case E.invalid_date:s="Invalid date";break;case E.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:ge.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case E.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case E.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case E.custom:s="Invalid input";break;case E.invalid_intersection_types:s="Intersection results could not be merged";break;case E.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case E.not_finite:s="Number must be finite";break;default:s=t.defaultError,ge.assertNever(e)}return{message:s}};let tu=qr;function su(){return tu}const ru=e=>{const{data:t,path:s,errorMaps:r,issueData:a}=e,i=[...s,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let c="";const l=r.filter(d=>!!d).slice().reverse();for(const d of l)c=d(o,{data:t,defaultError:c}).message;return{...a,path:i,message:c}};function z(e,t){const s=su(),r=ru({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===qr?void 0:qr].filter(a=>!!a)});e.common.issues.push(r)}class Ge{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,s){const r=[];for(const a of s){if(a.status==="aborted")return ne;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,s){const r=[];for(const a of s){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Ge.mergeObjectSync(t,r)}static mergeObjectSync(t,s){const r={};for(const a of s){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return ne;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const ne=Object.freeze({status:"aborted"}),_s=e=>({status:"dirty",value:e}),Qe=e=>({status:"valid",value:e}),la=e=>e.status==="aborted",da=e=>e.status==="dirty",ss=e=>e.status==="valid",lr=e=>typeof Promise<"u"&&e instanceof Promise;var Y;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Y||(Y={}));class Rt{constructor(t,s,r,a){this._cachedPath=[],this.parent=t,this.data=s,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ua=(e,t)=>{if(ss(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new xt(e.common.issues);return this._error=s,this._error}}};function ue(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:r,description:a}=e;if(t&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,c)=>{const{message:l}=e;return o.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:l??s??c.defaultError}},description:a}}class pe{get description(){return this._def.description}_getType(t){return bt(t.data)}_getOrReturnCtx(t,s){return s||{common:t.parent.common,data:t.data,parsedType:bt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ge,ctx:{common:t.parent.common,data:t.data,parsedType:bt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const s=this._parse(t);if(lr(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(t){const s=this._parse(t);return Promise.resolve(s)}parse(t,s){const r=this.safeParse(t,s);if(r.success)return r.data;throw r.error}safeParse(t,s){const r={common:{issues:[],async:s?.async??!1,contextualErrorMap:s?.errorMap},path:s?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bt(t)},a=this._parseSync({data:t,path:r.path,parent:r});return ua(r,a)}"~validate"(t){const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bt(t)};if(!this["~standard"].async)try{const r=this._parseSync({data:t,path:[],parent:s});return ss(r)?{value:r.value}:{issues:s.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(r=>ss(r)?{value:r.value}:{issues:s.common.issues})}async parseAsync(t,s){const r=await this.safeParseAsync(t,s);if(r.success)return r.data;throw r.error}async safeParseAsync(t,s){const r={common:{issues:[],contextualErrorMap:s?.errorMap,async:!0},path:s?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bt(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(lr(a)?a:Promise.resolve(a));return ua(r,i)}refine(t,s){const r=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,i)=>{const o=t(a),c=()=>i.addIssue({code:E.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(t,s){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof s=="function"?s(r,a):s),!1))}_refinement(t){return new as({schema:this,typeName:ae.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Ct.create(this,this._def)}nullable(){return is.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return it.create(this)}promise(){return mr.create(this,this._def)}or(t){return ur.create([this,t],this._def)}and(t){return hr.create(this,t,this._def)}transform(t){return new as({...ue(this._def),schema:this,typeName:ae.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const s=typeof t=="function"?t:()=>t;return new Jr({...ue(this._def),innerType:this,defaultValue:s,typeName:ae.ZodDefault})}brand(){return new Nu({typeName:ae.ZodBranded,type:this,...ue(this._def)})}catch(t){const s=typeof t=="function"?t:()=>t;return new en({...ue(this._def),innerType:this,catchValue:s,typeName:ae.ZodCatch})}describe(t){const s=this.constructor;return new s({...this._def,description:t})}pipe(t){return Cn.create(this,t)}readonly(){return tn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const nu=/^c[^\s-]{8,}$/i,au=/^[0-9a-z]+$/,iu=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ou=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cu=/^[a-z0-9_-]{21}$/i,lu=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,du=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hu="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Mr;const mu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,pu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,gu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xu=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xi="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vu=new RegExp(`^${xi}$`);function yi(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}function bu(e){return new RegExp(`^${yi(e)}$`)}function wu(e){let t=`${xi}T${yi(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function _u(e,t){return!!((t==="v4"||!t)&&mu.test(e)||(t==="v6"||!t)&&pu.test(e))}function Su(e,t){if(!lu.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function ku(e,t){return!!((t==="v4"||!t)&&fu.test(e)||(t==="v6"||!t)&&gu.test(e))}class St extends pe{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Z.string){const i=this._getOrReturnCtx(t);return z(i,{code:E.invalid_type,expected:Z.string,received:i.parsedType}),ne}const r=new Ge;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),z(a,{code:E.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),z(a,{code:E.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,c=t.data.length<i.value;(o||c)&&(a=this._getOrReturnCtx(t,a),o?z(a,{code:E.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&z(a,{code:E.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")uu.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"email",code:E.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Mr||(Mr=new RegExp(hu,"u")),Mr.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"emoji",code:E.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")ou.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"uuid",code:E.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")cu.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"nanoid",code:E.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")nu.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"cuid",code:E.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")au.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"cuid2",code:E.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")iu.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"ulid",code:E.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),z(a,{validation:"url",code:E.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"regex",code:E.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),z(a,{code:E.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),z(a,{code:E.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),z(a,{code:E.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?wu(i).test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{code:E.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?vu.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{code:E.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?bu(i).test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{code:E.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?du.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"duration",code:E.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?_u(t.data,i.version)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"ip",code:E.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?Su(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"jwt",code:E.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?ku(t.data,i.version)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"cidr",code:E.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?xu.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"base64",code:E.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?yu.test(t.data)||(a=this._getOrReturnCtx(t,a),z(a,{validation:"base64url",code:E.invalid_string,message:i.message}),r.dirty()):ge.assertNever(i);return{status:r.value,value:t.data}}_regex(t,s,r){return this.refinement(a=>t.test(a),{validation:s,code:E.invalid_string,...Y.errToObj(r)})}_addCheck(t){return new St({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Y.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Y.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Y.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Y.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Y.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Y.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Y.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Y.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Y.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Y.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Y.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Y.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Y.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...Y.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Y.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Y.errToObj(t)})}regex(t,s){return this._addCheck({kind:"regex",regex:t,...Y.errToObj(s)})}includes(t,s){return this._addCheck({kind:"includes",value:t,position:s?.position,...Y.errToObj(s?.message)})}startsWith(t,s){return this._addCheck({kind:"startsWith",value:t,...Y.errToObj(s)})}endsWith(t,s){return this._addCheck({kind:"endsWith",value:t,...Y.errToObj(s)})}min(t,s){return this._addCheck({kind:"min",value:t,...Y.errToObj(s)})}max(t,s){return this._addCheck({kind:"max",value:t,...Y.errToObj(s)})}length(t,s){return this._addCheck({kind:"length",value:t,...Y.errToObj(s)})}nonempty(t){return this.min(1,Y.errToObj(t))}trim(){return new St({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new St({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new St({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxLength(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}St.create=e=>new St({checks:[],typeName:ae.ZodString,coerce:e?.coerce??!1,...ue(e)});function ju(e,t){const s=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=s>r?s:r,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class rs extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Z.number){const i=this._getOrReturnCtx(t);return z(i,{code:E.invalid_type,expected:Z.number,received:i.parsedType}),ne}let r;const a=new Ge;for(const i of this._def.checks)i.kind==="int"?ge.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),z(r,{code:E.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),z(r,{code:E.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),z(r,{code:E.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?ju(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),z(r,{code:E.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),z(r,{code:E.not_finite,message:i.message}),a.dirty()):ge.assertNever(i);return{status:a.value,value:t.data}}gte(t,s){return this.setLimit("min",t,!0,Y.toString(s))}gt(t,s){return this.setLimit("min",t,!1,Y.toString(s))}lte(t,s){return this.setLimit("max",t,!0,Y.toString(s))}lt(t,s){return this.setLimit("max",t,!1,Y.toString(s))}setLimit(t,s,r,a){return new rs({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:Y.toString(a)}]})}_addCheck(t){return new rs({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Y.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:Y.toString(s)})}finite(t){return this._addCheck({kind:"finite",message:Y.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(t)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ge.isInteger(t.value))}get isFinite(){let t=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(s)&&Number.isFinite(t)}}rs.create=e=>new rs({checks:[],typeName:ae.ZodNumber,coerce:e?.coerce||!1,...ue(e)});class Es extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Z.bigint)return this._getInvalidInput(t);let r;const a=new Ge;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),z(r,{code:E.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),z(r,{code:E.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),z(r,{code:E.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ge.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const s=this._getOrReturnCtx(t);return z(s,{code:E.invalid_type,expected:Z.bigint,received:s.parsedType}),ne}gte(t,s){return this.setLimit("min",t,!0,Y.toString(s))}gt(t,s){return this.setLimit("min",t,!1,Y.toString(s))}lte(t,s){return this.setLimit("max",t,!0,Y.toString(s))}lt(t,s){return this.setLimit("max",t,!1,Y.toString(s))}setLimit(t,s,r,a){return new Es({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:Y.toString(a)}]})}_addCheck(t){return new Es({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:Y.toString(s)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}Es.create=e=>new Es({checks:[],typeName:ae.ZodBigInt,coerce:e?.coerce??!1,...ue(e)});class Yr extends pe{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Z.boolean){const r=this._getOrReturnCtx(t);return z(r,{code:E.invalid_type,expected:Z.boolean,received:r.parsedType}),ne}return Qe(t.data)}}Yr.create=e=>new Yr({typeName:ae.ZodBoolean,coerce:e?.coerce||!1,...ue(e)});class dr extends pe{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Z.date){const i=this._getOrReturnCtx(t);return z(i,{code:E.invalid_type,expected:Z.date,received:i.parsedType}),ne}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return z(i,{code:E.invalid_date}),ne}const r=new Ge;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),z(a,{code:E.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),z(a,{code:E.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ge.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new dr({...this._def,checks:[...this._def.checks,t]})}min(t,s){return this._addCheck({kind:"min",value:t.getTime(),message:Y.toString(s)})}max(t,s){return this._addCheck({kind:"max",value:t.getTime(),message:Y.toString(s)})}get minDate(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t!=null?new Date(t):null}}dr.create=e=>new dr({checks:[],coerce:e?.coerce||!1,typeName:ae.ZodDate,...ue(e)});class ha extends pe{_parse(t){if(this._getType(t)!==Z.symbol){const r=this._getOrReturnCtx(t);return z(r,{code:E.invalid_type,expected:Z.symbol,received:r.parsedType}),ne}return Qe(t.data)}}ha.create=e=>new ha({typeName:ae.ZodSymbol,...ue(e)});class ma extends pe{_parse(t){if(this._getType(t)!==Z.undefined){const r=this._getOrReturnCtx(t);return z(r,{code:E.invalid_type,expected:Z.undefined,received:r.parsedType}),ne}return Qe(t.data)}}ma.create=e=>new ma({typeName:ae.ZodUndefined,...ue(e)});class fa extends pe{_parse(t){if(this._getType(t)!==Z.null){const r=this._getOrReturnCtx(t);return z(r,{code:E.invalid_type,expected:Z.null,received:r.parsedType}),ne}return Qe(t.data)}}fa.create=e=>new fa({typeName:ae.ZodNull,...ue(e)});class pa extends pe{constructor(){super(...arguments),this._any=!0}_parse(t){return Qe(t.data)}}pa.create=e=>new pa({typeName:ae.ZodAny,...ue(e)});class Qr extends pe{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Qe(t.data)}}Qr.create=e=>new Qr({typeName:ae.ZodUnknown,...ue(e)});class Pt extends pe{_parse(t){const s=this._getOrReturnCtx(t);return z(s,{code:E.invalid_type,expected:Z.never,received:s.parsedType}),ne}}Pt.create=e=>new Pt({typeName:ae.ZodNever,...ue(e)});class ga extends pe{_parse(t){if(this._getType(t)!==Z.undefined){const r=this._getOrReturnCtx(t);return z(r,{code:E.invalid_type,expected:Z.void,received:r.parsedType}),ne}return Qe(t.data)}}ga.create=e=>new ga({typeName:ae.ZodVoid,...ue(e)});class it extends pe{_parse(t){const{ctx:s,status:r}=this._processInputParams(t),a=this._def;if(s.parsedType!==Z.array)return z(s,{code:E.invalid_type,expected:Z.array,received:s.parsedType}),ne;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,c=s.data.length<a.exactLength.value;(o||c)&&(z(s,{code:o?E.too_big:E.too_small,minimum:c?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(z(s,{code:E.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(z(s,{code:E.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((o,c)=>a.type._parseAsync(new Rt(s,o,s.path,c)))).then(o=>Ge.mergeArray(r,o));const i=[...s.data].map((o,c)=>a.type._parseSync(new Rt(s,o,s.path,c)));return Ge.mergeArray(r,i)}get element(){return this._def.type}min(t,s){return new it({...this._def,minLength:{value:t,message:Y.toString(s)}})}max(t,s){return new it({...this._def,maxLength:{value:t,message:Y.toString(s)}})}length(t,s){return new it({...this._def,exactLength:{value:t,message:Y.toString(s)}})}nonempty(t){return this.min(1,t)}}it.create=(e,t)=>new it({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ae.ZodArray,...ue(t)});function Zt(e){if(e instanceof Me){const t={};for(const s in e.shape){const r=e.shape[s];t[s]=Ct.create(Zt(r))}return new Me({...e._def,shape:()=>t})}else return e instanceof it?new it({...e._def,type:Zt(e.element)}):e instanceof Ct?Ct.create(Zt(e.unwrap())):e instanceof is?is.create(Zt(e.unwrap())):e instanceof $t?$t.create(e.items.map(t=>Zt(t))):e}class Me extends pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),s=ge.objectKeys(t);return this._cached={shape:t,keys:s},this._cached}_parse(t){if(this._getType(t)!==Z.object){const d=this._getOrReturnCtx(t);return z(d,{code:E.invalid_type,expected:Z.object,received:d.parsedType}),ne}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Pt&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||c.push(d);const l=[];for(const d of o){const u=i[d],h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Rt(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Pt){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of c)l.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")c.length>0&&(z(a,{code:E.unrecognized_keys,keys:c}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of c){const h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Rt(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of l){const h=await u.key,m=await u.value;d.push({key:h,value:m,alwaysSet:u.alwaysSet})}return d}).then(d=>Ge.mergeObjectSync(r,d)):Ge.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return Y.errToObj,new Me({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(s,r)=>{const a=this._def.errorMap?.(s,r).message??r.defaultError;return s.code==="unrecognized_keys"?{message:Y.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Me({...this._def,unknownKeys:"strip"})}passthrough(){return new Me({...this._def,unknownKeys:"passthrough"})}extend(t){return new Me({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Me({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ae.ZodObject})}setKey(t,s){return this.augment({[t]:s})}catchall(t){return new Me({...this._def,catchall:t})}pick(t){const s={};for(const r of ge.objectKeys(t))t[r]&&this.shape[r]&&(s[r]=this.shape[r]);return new Me({...this._def,shape:()=>s})}omit(t){const s={};for(const r of ge.objectKeys(this.shape))t[r]||(s[r]=this.shape[r]);return new Me({...this._def,shape:()=>s})}deepPartial(){return Zt(this)}partial(t){const s={};for(const r of ge.objectKeys(this.shape)){const a=this.shape[r];t&&!t[r]?s[r]=a:s[r]=a.optional()}return new Me({...this._def,shape:()=>s})}required(t){const s={};for(const r of ge.objectKeys(this.shape))if(t&&!t[r])s[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ct;)i=i._def.innerType;s[r]=i}return new Me({...this._def,shape:()=>s})}keyof(){return vi(ge.objectKeys(this.shape))}}Me.create=(e,t)=>new Me({shape:()=>e,unknownKeys:"strip",catchall:Pt.create(),typeName:ae.ZodObject,...ue(t)});Me.strictCreate=(e,t)=>new Me({shape:()=>e,unknownKeys:"strict",catchall:Pt.create(),typeName:ae.ZodObject,...ue(t)});Me.lazycreate=(e,t)=>new Me({shape:e,unknownKeys:"strip",catchall:Pt.create(),typeName:ae.ZodObject,...ue(t)});class ur extends pe{_parse(t){const{ctx:s}=this._processInputParams(t),r=this._def.options;function a(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return s.common.issues.push(...c.ctx.common.issues),c.result;const o=i.map(c=>new xt(c.ctx.common.issues));return z(s,{code:E.invalid_union,unionErrors:o}),ne}if(s.common.async)return Promise.all(r.map(async i=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const l of r){const d={...s,common:{...s.common,issues:[]},parent:null},u=l._parseSync({data:s.data,path:s.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const c=o.map(l=>new xt(l));return z(s,{code:E.invalid_union,unionErrors:c}),ne}}get options(){return this._def.options}}ur.create=(e,t)=>new ur({options:e,typeName:ae.ZodUnion,...ue(t)});function Xr(e,t){const s=bt(e),r=bt(t);if(e===t)return{valid:!0,data:e};if(s===Z.object&&r===Z.object){const a=ge.objectKeys(t),i=ge.objectKeys(e).filter(c=>a.indexOf(c)!==-1),o={...e,...t};for(const c of i){const l=Xr(e[c],t[c]);if(!l.valid)return{valid:!1};o[c]=l.data}return{valid:!0,data:o}}else if(s===Z.array&&r===Z.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],c=t[i],l=Xr(o,c);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return s===Z.date&&r===Z.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class hr extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(la(i)||la(o))return ne;const c=Xr(i.value,o.value);return c.valid?((da(i)||da(o))&&s.dirty(),{status:s.value,value:c.data}):(z(r,{code:E.invalid_intersection_types}),ne)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}hr.create=(e,t,s)=>new hr({left:e,right:t,typeName:ae.ZodIntersection,...ue(s)});class $t extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Z.array)return z(r,{code:E.invalid_type,expected:Z.array,received:r.parsedType}),ne;if(r.data.length<this._def.items.length)return z(r,{code:E.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne;!this._def.rest&&r.data.length>this._def.items.length&&(z(r,{code:E.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...r.data].map((o,c)=>{const l=this._def.items[c]||this._def.rest;return l?l._parse(new Rt(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ge.mergeArray(s,o)):Ge.mergeArray(s,i)}get items(){return this._def.items}rest(t){return new $t({...this._def,rest:t})}}$t.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $t({items:e,typeName:ae.ZodTuple,rest:null,...ue(t)})};class xa extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Z.map)return z(r,{code:E.invalid_type,expected:Z.map,received:r.parsedType}),ne;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([c,l],d)=>({key:a._parse(new Rt(r,c,r.path,[d,"key"])),value:i._parse(new Rt(r,l,r.path,[d,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const l of o){const d=await l.key,u=await l.value;if(d.status==="aborted"||u.status==="aborted")return ne;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),c.set(d.value,u.value)}return{status:s.value,value:c}})}else{const c=new Map;for(const l of o){const d=l.key,u=l.value;if(d.status==="aborted"||u.status==="aborted")return ne;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),c.set(d.value,u.value)}return{status:s.value,value:c}}}}xa.create=(e,t,s)=>new xa({valueType:t,keyType:e,typeName:ae.ZodMap,...ue(s)});class Ts extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Z.set)return z(r,{code:E.invalid_type,expected:Z.set,received:r.parsedType}),ne;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(z(r,{code:E.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(z(r,{code:E.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const i=this._def.valueType;function o(l){const d=new Set;for(const u of l){if(u.status==="aborted")return ne;u.status==="dirty"&&s.dirty(),d.add(u.value)}return{status:s.value,value:d}}const c=[...r.data.values()].map((l,d)=>i._parse(new Rt(r,l,r.path,d)));return r.common.async?Promise.all(c).then(l=>o(l)):o(c)}min(t,s){return new Ts({...this._def,minSize:{value:t,message:Y.toString(s)}})}max(t,s){return new Ts({...this._def,maxSize:{value:t,message:Y.toString(s)}})}size(t,s){return this.min(t,s).max(t,s)}nonempty(t){return this.min(1,t)}}Ts.create=(e,t)=>new Ts({valueType:e,minSize:null,maxSize:null,typeName:ae.ZodSet,...ue(t)});class ya extends pe{get schema(){return this._def.getter()}_parse(t){const{ctx:s}=this._processInputParams(t);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}ya.create=(e,t)=>new ya({getter:e,typeName:ae.ZodLazy,...ue(t)});class va extends pe{_parse(t){if(t.data!==this._def.value){const s=this._getOrReturnCtx(t);return z(s,{received:s.data,code:E.invalid_literal,expected:this._def.value}),ne}return{status:"valid",value:t.data}}get value(){return this._def.value}}va.create=(e,t)=>new va({value:e,typeName:ae.ZodLiteral,...ue(t)});function vi(e,t){return new ns({values:e,typeName:ae.ZodEnum,...ue(t)})}class ns extends pe{_parse(t){if(typeof t.data!="string"){const s=this._getOrReturnCtx(t),r=this._def.values;return z(s,{expected:ge.joinValues(r),received:s.parsedType,code:E.invalid_type}),ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const s=this._getOrReturnCtx(t),r=this._def.values;return z(s,{received:s.data,code:E.invalid_enum_value,options:r}),ne}return Qe(t.data)}get options(){return this._def.values}get enum(){const t={};for(const s of this._def.values)t[s]=s;return t}get Values(){const t={};for(const s of this._def.values)t[s]=s;return t}get Enum(){const t={};for(const s of this._def.values)t[s]=s;return t}extract(t,s=this._def){return ns.create(t,{...this._def,...s})}exclude(t,s=this._def){return ns.create(this.options.filter(r=>!t.includes(r)),{...this._def,...s})}}ns.create=vi;class ba extends pe{_parse(t){const s=ge.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Z.string&&r.parsedType!==Z.number){const a=ge.objectValues(s);return z(r,{expected:ge.joinValues(a),received:r.parsedType,code:E.invalid_type}),ne}if(this._cache||(this._cache=new Set(ge.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=ge.objectValues(s);return z(r,{received:r.data,code:E.invalid_enum_value,options:a}),ne}return Qe(t.data)}get enum(){return this._def.values}}ba.create=(e,t)=>new ba({values:e,typeName:ae.ZodNativeEnum,...ue(t)});class mr extends pe{unwrap(){return this._def.type}_parse(t){const{ctx:s}=this._processInputParams(t);if(s.parsedType!==Z.promise&&s.common.async===!1)return z(s,{code:E.invalid_type,expected:Z.promise,received:s.parsedType}),ne;const r=s.parsedType===Z.promise?s.data:Promise.resolve(s.data);return Qe(r.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}mr.create=(e,t)=>new mr({type:e,typeName:ae.ZodPromise,...ue(t)});class as extends pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:s,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{z(r,o),o.fatal?s.abort():s.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async c=>{if(s.value==="aborted")return ne;const l=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return l.status==="aborted"?ne:l.status==="dirty"||s.value==="dirty"?_s(l.value):l});{if(s.value==="aborted")return ne;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?ne:c.status==="dirty"||s.value==="dirty"?_s(c.value):c}}if(a.type==="refinement"){const o=c=>{const l=a.refinement(c,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ne:(c.status==="dirty"&&s.dirty(),o(c.value),{status:s.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ne:(c.status==="dirty"&&s.dirty(),o(c.value).then(()=>({status:s.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ss(o))return ne;const c=a.transform(o.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ss(o)?Promise.resolve(a.transform(o.value,i)).then(c=>({status:s.value,value:c})):ne);ge.assertNever(a)}}as.create=(e,t,s)=>new as({schema:e,typeName:ae.ZodEffects,effect:t,...ue(s)});as.createWithPreprocess=(e,t,s)=>new as({schema:t,effect:{type:"preprocess",transform:e},typeName:ae.ZodEffects,...ue(s)});class Ct extends pe{_parse(t){return this._getType(t)===Z.undefined?Qe(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ct.create=(e,t)=>new Ct({innerType:e,typeName:ae.ZodOptional,...ue(t)});class is extends pe{_parse(t){return this._getType(t)===Z.null?Qe(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}is.create=(e,t)=>new is({innerType:e,typeName:ae.ZodNullable,...ue(t)});class Jr extends pe{_parse(t){const{ctx:s}=this._processInputParams(t);let r=s.data;return s.parsedType===Z.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Jr.create=(e,t)=>new Jr({innerType:e,typeName:ae.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ue(t)});class en extends pe{_parse(t){const{ctx:s}=this._processInputParams(t),r={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return lr(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xt(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new xt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}en.create=(e,t)=>new en({innerType:e,typeName:ae.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ue(t)});class wa extends pe{_parse(t){if(this._getType(t)!==Z.nan){const r=this._getOrReturnCtx(t);return z(r,{code:E.invalid_type,expected:Z.nan,received:r.parsedType}),ne}return{status:"valid",value:t.data}}}wa.create=e=>new wa({typeName:ae.ZodNaN,...ue(e)});class Nu extends pe{_parse(t){const{ctx:s}=this._processInputParams(t),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class Cn extends pe{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ne:i.status==="dirty"?(s.dirty(),_s(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ne:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,s){return new Cn({in:t,out:s,typeName:ae.ZodPipeline})}}class tn extends pe{_parse(t){const s=this._def.innerType._parse(t),r=a=>(ss(a)&&(a.value=Object.freeze(a.value)),a);return lr(s)?s.then(a=>r(a)):r(s)}unwrap(){return this._def.innerType}}tn.create=(e,t)=>new tn({innerType:e,typeName:ae.ZodReadonly,...ue(t)});var ae;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ae||(ae={}));const Ne=St.create,Se=rs.create,sn=Yr.create,bi=Qr.create;Pt.create;const ot=it.create,Oe=Me.create;ur.create;hr.create;const wi=$t.create,ls=ns.create;mr.create;Ct.create;is.create;const Cu=ls(["CREW_SLEEP","HYGIENE","WASTE","EXERCISE","FOOD_PREP","ECLSS","MEDICAL","MAINTENANCE","STOWAGE","RECREATION","WORKSTATION","AIRLOCK","GLOVEBOX","TRASH_MGMT","COMMON_AREA","CUSTOM_CAD"]),Ru=ls(["LEO","LUNAR","MARS_TRANSIT","MARS_SURFACE","DEEP_SPACE"]),Pu=Oe({name:Ne(),inner_diameter_m:Se().positive(),inner_height_m:Se().positive(),shape:ls(["CYLINDER","CONE","COMPOSITE"])}),Mu=Oe({crew_size:Se().int().min(1).max(12),mission_duration_days:Se().int().positive(),destination:Ru,fairing:Pu}),Eu=Oe({shape:ls(["CYLINDER","SPHERE","COMPOSITE"]),levels:Se().int().min(1).max(5),dimensions:Oe({diameter_m:Se().positive().optional(),width_m:Se().positive().optional(),length_m:Se().positive().optional(),height_m:Se().positive()}),pressurized_volume_m3:Se().positive(),net_habitable_volume_m3:Se().positive()}),Tu=Oe({w_m:Se().positive(),l_m:Se().positive(),h_m:Se().positive()}),_i=Oe({id:Ne(),type:Cu,level:Se().int().min(0),position:wi([Se(),Se()]),size:Tu,rotation_deg:Se().min(0).max(360).default(0),crew_capacity:Se().int().min(0).optional(),equipment:ot(Ne()).default([])}),Au=Oe({scenario:Mu,habitat:Eu,modules:ot(_i),version:Ne().default("1.0.0")}),Lu=Oe({id:Ne(),severity:ls(["error","warning","info"]),message:Ne(),module_id:Ne().optional(),position:wi([Se(),Se()]).optional()});Oe({valid:sn(),issues:ot(Lu),suggestions:ot(Oe({id:Ne(),message:Ne(),action:Ne().optional()}))});Oe({suggested_modules:ot(_i),rationale:Ne(),improvements:ot(Ne())});const Ou=Oe({valid:sn(),issues:ot(Oe({id:Ne(),severity:ls(["info","warn","error"]),message:Ne(),moduleIds:ot(Ne()).optional(),rule:Ne().optional()})),metrics:Oe({nhv_m3:Se().optional(),pressurized_m3:Se().optional(),utilization_ratio:Se().optional(),corridor_clearance_ok:sn().optional()}).optional(),suggestions:ot(Oe({id:Ne(),label:Ne(),description:Ne(),patch:bi()})).optional()});Oe({suggestions:ot(Oe({id:Ne(),label:Ne(),description:Ne(),patch:bi()}))});async function Iu(e,t,s){const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`${e} failed: ${r.status} ${r.statusText}`);const a=await r.json();return s.parse(a)}async function Du(e){const t=Au.parse(e);return Iu("/check_layout",t,Ou)}const Fu="habitat-designer-db",zu=1,dt="designs",fr="customShapes";let et=null;async function Si(){return new Promise((e,t)=>{const s=indexedDB.open(Fu,zu);s.onerror=()=>t(s.error),s.onsuccess=()=>{et=s.result,e()},s.onupgradeneeded=()=>{const r=s.result;if(!r.objectStoreNames.contains(dt)){const a=r.createObjectStore(dt,{keyPath:"id"});a.createIndex("name","name",{unique:!1}),a.createIndex("createdAt","createdAt",{unique:!1}),a.createIndex("tags","tags",{unique:!1,multiEntry:!0})}if(!r.objectStoreNames.contains(fr)){const a=r.createObjectStore(fr,{keyPath:"id"});a.createIndex("name","name",{unique:!1}),a.createIndex("category","category",{unique:!1})}}})}async function Rn(e){if(!et)throw new Error("Database not initialized");const t=`design_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s=new Date,r={...e,id:t,createdAt:s,updatedAt:s};return new Promise((a,i)=>{const l=et.transaction([dt],"readwrite").objectStore(dt).add(r);l.onsuccess=()=>a(t),l.onerror=()=>i(l.error)})}async function $u(e){if(!et)throw new Error("Database not initialized");return new Promise((t,s)=>{const i=et.transaction([dt],"readonly").objectStore(dt).get(e);i.onsuccess=()=>t(i.result||null),i.onerror=()=>s(i.error)})}async function Bu(){if(!et)throw new Error("Database not initialized");return new Promise((e,t)=>{const a=et.transaction([dt],"readonly").objectStore(dt).getAll();a.onsuccess=()=>{const i=a.result;i.sort((o,c)=>c.updatedAt.getTime()-o.updatedAt.getTime()),e(i)},a.onerror=()=>t(a.error)})}async function Vu(e){if(!et)throw new Error("Database not initialized");return new Promise((t,s)=>{const i=et.transaction([dt],"readwrite").objectStore(dt).delete(e);i.onsuccess=()=>t(),i.onerror=()=>s(i.error)})}async function ki(e){if(!et)throw new Error("Database not initialized");const t=`shape_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s={...e,id:t,createdAt:new Date};return new Promise((r,a)=>{const c=et.transaction([fr],"readwrite").objectStore(fr).add(s);c.onsuccess=()=>r(t),c.onerror=()=>a(c.error)})}async function Uu(e){const t=await $u(e);if(!t)throw new Error("Design not found");return JSON.stringify(t,null,2)}async function Wu(e){try{const t=JSON.parse(e),{id:s,createdAt:r,updatedAt:a,...i}=t;return await Rn({...i,name:`${t.name} (Imported)`})}catch{throw new Error("Invalid design file format")}}Si().catch(console.error);function Gu({currentLayout:e,onLoadDesign:t,onSaveSuccess:s}){const[r,a]=f.useState([]),[i,o]=f.useState([]),[c,l]=f.useState(""),[d,u]=f.useState(""),[h,m]=f.useState("grid"),[g,p]=f.useState(!0),[x,j]=f.useState(!1),[L,K]=f.useState(!1),[D,V]=f.useState({name:"",description:"",tags:[],newTag:""});f.useEffect(()=>{ee()},[]),f.useEffect(()=>{let k=r;c&&(k=k.filter(T=>T.name.toLowerCase().includes(c.toLowerCase())||T.description?.toLowerCase().includes(c.toLowerCase())||T.tags.some($=>$.toLowerCase().includes(c.toLowerCase())))),d&&(k=k.filter(T=>T.tags.includes(d))),o(k)},[r,c,d]);const ee=async()=>{p(!0);try{const k=await Bu();a(k)}catch(k){console.error("Failed to load designs:",k)}finally{p(!1)}},G=()=>{const k=new Set;return r.forEach(T=>{T.tags.forEach($=>k.add($))}),Array.from(k).sort()},P=async()=>{if(!e||!D.name.trim()){alert("Please enter a design name");return}j(!0);try{const k=await Rn({name:D.name,description:D.description,layout:e,tags:D.tags});await ee(),K(!1),V({name:"",description:"",tags:[],newTag:""}),s&&s(k),alert("Design saved successfully!")}catch(k){console.error("Failed to save design:",k),alert("Failed to save design. Please try again.")}finally{j(!1)}},C=async k=>{if(confirm("Are you sure you want to delete this design?"))try{await Vu(k),await ee()}catch(T){console.error("Failed to delete design:",T),alert("Failed to delete design. Please try again.")}},B=async k=>{try{const T=await Uu(k),$=r.find(je=>je.id===k),re=new Blob([T],{type:"application/json"}),A=URL.createObjectURL(re),J=document.createElement("a");J.href=A,J.download=`${$?.name||"habitat-design"}.json`,J.click(),URL.revokeObjectURL(A)}catch(T){console.error("Failed to export design:",T),alert("Failed to export design. Please try again.")}},te=k=>{const T=k.target.files?.[0];if(!T)return;const $=new FileReader;$.onload=async re=>{try{const A=re.target?.result;await Wu(A),await ee(),alert("Design imported successfully!")}catch(A){console.error("Failed to import design:",A),alert("Failed to import design. Please check the file format.")}},$.readAsText(T)},y=()=>{D.newTag.trim()&&!D.tags.includes(D.newTag.trim())&&V(k=>({...k,tags:[...k.tags,k.newTag.trim()],newTag:""}))},M=k=>{V(T=>({...T,tags:T.tags.filter($=>$!==k)}))},H=k=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(k));return n.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[n.jsx("div",{className:"bg-black/20 border-b border-purple-500/20 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:n.jsx(Hr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-300 via-pink-300 to-purple-300 bg-clip-text text-transparent",children:"Design Collections"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Manage your saved habitat designs"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"file",accept:".json",onChange:te,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),n.jsxs(me,{className:"bg-green-600 hover:bg-green-700",children:[n.jsx(Kd,{className:"w-4 h-4 mr-2"}),"Import"]})]}),e&&n.jsxs(me,{onClick:()=>K(!0),className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Save Current"]})]})]})}),n.jsx("div",{className:"bg-black/10 border-b border-purple-500/20 p-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Vd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search designs...",value:c,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400"})]}),n.jsxs("select",{value:d,onChange:k=>u(k.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",children:[n.jsx("option",{value:"",children:"All Tags"}),G().map(k=>n.jsx("option",{value:k,children:k},k))]}),n.jsxs("div",{className:"flex items-center gap-1 bg-gray-800/30 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>m("grid"),className:`p-2 rounded ${h==="grid"?"bg-blue-600":"hover:bg-gray-700/50"}`,children:n.jsx(jn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded ${h==="list"?"bg-blue-600":"hover:bg-gray-700/50"}`,children:n.jsx(fd,{className:"w-4 h-4"})})]})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-400",children:"Loading designs..."})}):i.length===0?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Hr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("div",{className:"text-gray-400 mb-2",children:"No designs found"}),n.jsx("p",{className:"text-sm text-gray-500",children:c||d?"Try adjusting your filters":"Create your first habitat design"})]})}):n.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-2",children:i.map(k=>n.jsxs("div",{className:`bg-gray-800/30 border border-gray-700/30 rounded-lg p-4 hover:bg-gray-700/30 transition-all ${h==="list"?"flex items-center justify-between":""}`,children:[n.jsxs("div",{className:h==="list"?"flex-1":"",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg text-white truncate",children:k.name}),h==="grid"&&n.jsx("div",{className:"flex items-center gap-1",children:n.jsx(me,{size:"sm",variant:"outline",onClick:()=>t?.(k),children:n.jsx(kn,{className:"w-3 h-3"})})})]}),k.description&&n.jsx("p",{className:"text-sm text-gray-300 mb-3 line-clamp-2",children:k.description}),k.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:k.tags.map(T=>n.jsx("span",{className:"px-2 py-1 bg-purple-600/30 text-purple-200 text-xs rounded-full",children:T},T))}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(td,{className:"w-3 h-3"}),H(k.updatedAt)]}),n.jsxs("div",{children:[k.layout.modules.length," modules"]})]}),h==="grid"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(me,{size:"sm",onClick:()=>t?.(k),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Load Design"}),n.jsx(me,{size:"sm",variant:"outline",onClick:()=>B(k.id),children:n.jsx(Gr,{className:"w-3 h-3"})}),n.jsx(me,{size:"sm",variant:"outline",onClick:()=>C(k.id),className:"hover:bg-red-600/20",children:n.jsx(Ms,{className:"w-3 h-3"})})]})]}),h==="list"&&n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(me,{size:"sm",onClick:()=>t?.(k),children:"Load"}),n.jsx(me,{size:"sm",variant:"outline",onClick:()=>B(k.id),children:n.jsx(Gr,{className:"w-3 h-3"})}),n.jsx(me,{size:"sm",variant:"outline",onClick:()=>C(k.id),className:"hover:bg-red-600/20",children:n.jsx(Ms,{className:"w-3 h-3"})})]})]},k.id))})}),L&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6 max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Design"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Design Name"}),n.jsx("input",{type:"text",value:D.name,onChange:k=>V(T=>({...T,name:k.target.value})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",placeholder:"Enter design name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),n.jsx("textarea",{value:D.description,onChange:k=>V(T=>({...T,description:k.target.value})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white resize-none",rows:3,placeholder:"Describe your design"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:D.newTag,onChange:k=>V(T=>({...T,newTag:k.target.value})),onKeyPress:k=>k.key==="Enter"&&y(),className:"flex-1 px-3 py-1 bg-gray-800 border border-gray-600 rounded text-sm",placeholder:"Add tag"}),n.jsx(me,{size:"sm",onClick:y,children:n.jsx(Je,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:D.tags.map(k=>n.jsxs("span",{className:"px-2 py-1 bg-purple-600/30 text-purple-200 text-xs rounded-full flex items-center gap-1",children:[k,n.jsx("button",{onClick:()=>M(k),className:"hover:text-red-300",children:""})]},k))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(me,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),n.jsx(me,{onClick:P,disabled:x,children:x?"Saving...":"Save Design"})]})]})})]})}const xs=[{id:"rectangular_module",name:"Rectangular Module",type:"basic",icon:n.jsx(Cs,{className:"w-5 h-5"}),defaultParams:{width:3,height:2.5,depth:2,wireframe:!1,hasWalls:!1,materialType:"solid",transparency:.8},description:"Standard rectangular habitat module",category:"habitat"},{id:"wireframe_structure",name:"Wireframe Structure",type:"basic",icon:n.jsx(Cs,{className:"w-5 h-5"}),defaultParams:{width:4,height:3,depth:3,wireframe:!0,frameWidth:.1,frameSpacing:.5,materialType:"wireframe",transparency:1},description:"Structural wireframe for construction",category:"structural"},{id:"walled_room",name:"Room with Walls",type:"composite",icon:n.jsx(Cs,{className:"w-5 h-5"}),defaultParams:{width:4,height:2.8,depth:4,hasWalls:!0,wallThickness:.2,wallHeight:2.5,materialType:"solid",transparency:.9},description:"Enclosed room with separate walls",category:"habitat"},{id:"cylindrical_module",name:"Cylindrical Module",type:"basic",icon:n.jsx(hi,{className:"w-5 h-5"}),defaultParams:{width:2.5,height:3,depth:2.5,radius:1.25,segments:16,materialType:"solid",transparency:.8},description:"Pressurized cylindrical module",category:"habitat"},{id:"glass_dome",name:"Glass Dome",type:"basic",icon:n.jsx(Dt,{className:"w-5 h-5"}),defaultParams:{width:4,height:2,depth:4,radius:2,segments:16,materialType:"glass",transparency:.3},description:"Transparent observation dome",category:"habitat"},{id:"metal_frame",name:"Metal Frame",type:"parametric",icon:n.jsx(Dt,{className:"w-5 h-5"}),defaultParams:{width:3,height:3,depth:3,wireframe:!0,frameWidth:.15,materialType:"metal",transparency:1},description:"Heavy duty metal framework",category:"structural"},{id:"airlock_ring",name:"Airlock Ring",type:"parametric",icon:n.jsx(Dt,{className:"w-5 h-5"}),defaultParams:{width:2,height:.5,depth:2,radius:1,tubularSegments:8,materialType:"metal",transparency:.8},description:"Ring-shaped airlock chamber",category:"structural"},{id:"composite_lab",name:"Multi-Level Lab",type:"composite",icon:n.jsx(mi,{className:"w-5 h-5"}),defaultParams:{width:4,height:3.5,depth:3,segments:8,hasWalls:!0,wallThickness:.15,materialType:"solid",transparency:.8},description:"Complex laboratory with multiple levels and walls",category:"habitat"}];function _a(){const[e,t]=f.useState(xs[0]),[s,r]=f.useState(xs[0].defaultParams),[a,i]=f.useState(""),[o,c]=f.useState(""),[l,d]=f.useState(!1),[u,h]=f.useState(null),m=f.useRef(null),g=f.useRef(null),p=f.useRef(null),x=f.useRef(null),j=f.useRef(null),L=f.useRef(null);f.useEffect(()=>{if(!m.current)return;const y=new nn;y.background=new qt(657946),g.current=y;const M=new ka(75,400/300,.1,1e3);M.position.set(5,3,5),M.lookAt(0,0,0),x.current=M;const H=new an({antialias:!0});H.setSize(400,300),H.shadowMap.enabled=!0,H.shadowMap.type=on,m.current.appendChild(H.domElement),p.current=H;const k=new cn(4210752,.6);y.add(k);const T=new Js(16777215,.8);T.position.set(10,10,5),T.castShadow=!0,y.add(T);const $=new ln(10,20,3355443,3355443);y.add($);const re=new Mi(2);return y.add(re),()=>{L.current&&cancelAnimationFrame(L.current),m.current&&H.domElement&&m.current.removeChild(H.domElement),H.dispose()}},[]);const K=f.useCallback(()=>{if(!g.current||!p.current||!x.current)return;j.current&&(g.current.remove(j.current),j.current.geometry&&j.current.geometry.dispose(),Array.isArray(j.current.material)?j.current.material.forEach($=>$.dispose()):j.current.material&&j.current.material.dispose());const y=new dn,M=D(),H=V("main"),k=new $e(M,H);k.position.y=s.height/2,y.add(k),s.hasWalls&&ee().forEach(re=>y.add(re)),s.wireframe&&e.id.includes("frame")&&G().forEach(re=>y.add(re)),y.castShadow=!0,y.receiveShadow=!0,g.current.add(y),j.current=y;const T=()=>{j.current&&(j.current.rotation.y+=.005),p.current&&g.current&&x.current&&p.current.render(g.current,x.current),L.current=requestAnimationFrame(T)};L.current&&cancelAnimationFrame(L.current),T()},[e,s]),D=f.useCallback(()=>{const{width:y,height:M,depth:H,radius:k,segments:T}=s;switch(e.id){case"rectangular_module":case"wireframe_structure":case"walled_room":return new ve(y,M,H);case"cylindrical_module":return new Kt(k||y/2,k||y/2,M,T||16);case"glass_dome":return new un(k||y/2,T||16,(T||16)/2,0,Math.PI*2,0,Math.PI/2);case"metal_frame":return new ve(y,M,H);case"airlock_ring":return new ja(k||y/2,M/4,T||8,s.tubularSegments||16);case"composite_lab":return new ve(y,M*.7,H);default:return new ve(y,M,H)}},[e,s]),V=f.useCallback(y=>{const H={color:y==="wall"?8947848:y==="frame"?11184810:4886754,transparent:!0,opacity:s.transparency||.8};switch(s.materialType){case"wireframe":return new Ca({...H,wireframe:!0,color:65280,opacity:1});case"glass":return new Na({...H,transmission:.9,roughness:.1,metalness:0,clearcoat:1,clearcoatRoughness:.1,color:8965375,opacity:s.transparency||.3});case"metal":return new vs({...H,metalness:.8,roughness:.2,color:10066329});default:return new ht(H)}},[s]),ee=f.useCallback(()=>{const y=[],{width:M,depth:H,wallThickness:k=.2,wallHeight:T}=s,$=T||s.height,re=V("wall"),A=new ve(M,$,k),J=new $e(A,re);J.position.set(0,$/2,H/2),y.push(J);const je=new ve(M,$,k),Q=new $e(je,re);Q.position.set(0,$/2,-H/2),y.push(Q);const Ce=new ve(k,$,H),oe=new $e(Ce,re);oe.position.set(-M/2,$/2,0),y.push(oe);const we=new ve(k,$,H),ke=new $e(we,re);return ke.position.set(M/2,$/2,0),y.push(ke),y},[s,V]),G=f.useCallback(()=>{const y=[],{width:M,height:H,depth:k,frameWidth:T=.1,frameSpacing:$=.5}=s,re=V("frame");for(let A=-M/2;A<=M/2;A+=$)for(let J=-k/2;J<=k/2;J+=$)if(Math.abs(A)===M/2||Math.abs(J)===k/2){const je=new ve(T,H,T),Q=new $e(je,re);Q.position.set(A,H/2,J),y.push(Q)}for(let A=-M/2;A<=M/2;A+=$){const J=new ve(T,T,k),je=new $e(J,re);je.position.set(A,H,0),y.push(je)}for(let A=-k/2;A<=k/2;A+=$){const J=new ve(M,T,T),je=new $e(J,re);je.position.set(0,H,A),y.push(je)}return y},[s,V]);f.useEffect(()=>{K()},[K]);const P=(y,M)=>{r(H=>({...H,[y]:M}))},C=y=>{t(y),r(y.defaultParams),i(y.name),c(y.description)},B=async()=>{if(a.trim()){d(!0),h(null);try{const y={name:a.trim(),description:o.trim()||"Custom shape created with Shape Builder",geometryType:e.id,parameters:s,category:"custom"};await ki(y),h("Shape saved successfully! It's now available in your Collections."),setTimeout(()=>{h(null),i(""),c("")},3e3)}catch(y){console.error("Error saving custom shape:",y),h("Error saving shape. Please try again.")}finally{d(!1)}}},te=()=>{const y={name:a,preset:e.id,parameters:s,description:o,exportedAt:new Date().toISOString()},M=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),H=URL.createObjectURL(M),k=document.createElement("a");k.href=H,k.download=`${a||"custom-shape"}.json`,k.click(),URL.revokeObjectURL(H)};return n.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[n.jsx("div",{className:"bg-black/20 border-b border-purple-500/20 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center",children:n.jsx(fi,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-300 via-cyan-300 to-blue-300 bg-clip-text text-transparent",children:"Shape Builder"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Create custom 3D habitat modules"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:te,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Export"]}),n.jsxs("button",{onClick:B,disabled:l,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[n.jsx(Nn,{className:"w-4 h-4"}),l?"Saving...":"Save Shape"]})]})]})}),n.jsxs("div",{className:"flex flex-1",children:[n.jsxs("div",{className:"w-80 bg-black/20 border-r border-purple-500/20 p-4 overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Shape Presets"}),n.jsx("div",{className:"space-y-2 mb-6",children:xs.map(y=>n.jsx("div",{onClick:()=>C(y),className:`p-3 rounded-lg cursor-pointer transition-all ${e.id===y.id?"bg-blue-600/30 border border-blue-500/50":"bg-gray-800/30 hover:bg-gray-700/30 border border-gray-700/30"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-blue-400",children:y.icon}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:y.name}),n.jsx("div",{className:"text-xs text-gray-400",children:y.description}),n.jsx("div",{className:"text-xs text-purple-400 capitalize",children:y.category})]})]})},y.id))}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Shape Name"}),n.jsx("input",{type:"text",value:a,onChange:y=>i(y.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400",placeholder:"Enter shape name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Description"}),n.jsx("textarea",{value:o,onChange:y=>c(y.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 resize-none",rows:3,placeholder:"Describe your custom shape"})]})]})]}),n.jsxs("div",{className:"flex-1 flex",children:[n.jsxs("div",{className:"w-80 bg-black/10 border-r border-purple-500/20 p-4 overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Parameters"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Width (meters)"}),n.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.1",value:s.width,onChange:y=>P("width",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[s.width.toFixed(1),"m"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Height (meters)"}),n.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.1",value:s.height,onChange:y=>P("height",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[s.height.toFixed(1),"m"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Depth (meters)"}),n.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.1",value:s.depth,onChange:y=>P("depth",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[s.depth.toFixed(1),"m"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Material Type"}),n.jsxs("select",{value:s.materialType||"solid",onChange:y=>P("materialType",y.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",children:[n.jsx("option",{value:"solid",children:"Solid"}),n.jsx("option",{value:"wireframe",children:"Wireframe"}),n.jsx("option",{value:"glass",children:"Glass"}),n.jsx("option",{value:"metal",children:"Metal"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transparency"}),n.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:s.transparency||.8,onChange:y=>P("transparency",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[((s.transparency||.8)*100).toFixed(0),"%"]})]}),n.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("input",{type:"checkbox",id:"hasWalls",checked:s.hasWalls||!1,onChange:y=>P("hasWalls",y.target.checked),className:"rounded"}),n.jsx("label",{htmlFor:"hasWalls",className:"text-sm font-medium",children:"Add Walls"})]}),s.hasWalls&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wall Thickness (meters)"}),n.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.05",value:s.wallThickness||.2,onChange:y=>P("wallThickness",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(s.wallThickness||.2).toFixed(2),"m"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wall Height (meters)"}),n.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.1",value:s.wallHeight||s.height,onChange:y=>P("wallHeight",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(s.wallHeight||s.height).toFixed(1),"m"]})]})]})]}),(s.wireframe||e.id.includes("frame"))&&n.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[n.jsx("h4",{className:"text-sm font-medium mb-3 text-purple-200",children:"Wireframe Settings"}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frame Width (meters)"}),n.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:s.frameWidth||.1,onChange:y=>P("frameWidth",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(s.frameWidth||.1).toFixed(2),"m"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frame Spacing (meters)"}),n.jsx("input",{type:"range",min:"0.2",max:"2.0",step:"0.1",value:s.frameSpacing||.5,onChange:y=>P("frameSpacing",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(s.frameSpacing||.5).toFixed(1),"m"]})]})]}),(e.id.includes("cylindrical")||e.id.includes("dome")||e.id.includes("ring"))&&n.jsx("div",{className:"border-t border-gray-600 pt-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Radius (meters)"}),n.jsx("input",{type:"range",min:"0.2",max:"5",step:"0.1",value:s.radius||s.width/2,onChange:y=>P("radius",parseFloat(y.target.value)),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(s.radius||s.width/2).toFixed(1),"m"]})]})}),(e.id.includes("cylindrical")||e.id.includes("dome")||e.id.includes("cone"))&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segments"}),n.jsx("input",{type:"range",min:"6",max:"32",step:"1",value:s.segments||16,onChange:y=>P("segments",parseInt(y.target.value)),className:"w-full"}),n.jsx("div",{className:"text-right text-sm text-gray-400",children:s.segments||16})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3",children:[n.jsx("button",{onClick:B,disabled:!a.trim()||l,className:`flex-1 px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 
                         text-white font-medium rounded-lg hover:from-purple-600 hover:to-blue-600 
                         transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
                         shadow-lg hover:shadow-purple-500/25`,children:l?"Saving...":"Save Custom Shape"}),n.jsx("button",{onClick:()=>{t(xs[0]),r(xs[0].defaultParams),i(""),c("")},className:`px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg
                         transition-colors duration-200`,children:"Reset"})]}),u&&n.jsx("div",{className:`mt-3 p-3 rounded-lg text-sm ${u.includes("Error")?"bg-red-900/30 border border-red-700/30 text-red-200":"bg-green-900/30 border border-green-700/30 text-green-200"}`,children:u}),n.jsxs("div",{className:"mt-6 p-4 bg-gray-800/30 rounded-lg border border-gray-700/30",children:[n.jsx("h4",{className:"text-sm font-medium mb-2 text-purple-200",children:"Shape Statistics"}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[n.jsxs("div",{children:["Volume: ~",(s.width*s.height*s.depth).toFixed(1)," m"]}),n.jsxs("div",{children:["Type: ",e.type]}),n.jsxs("div",{children:["Category: ",e.category]}),n.jsxs("div",{children:["Material: ",s.materialType||"solid"]}),s.hasWalls&&n.jsxs("div",{children:["Walls: ",s.wallThickness?.toFixed(2),"m thick"]}),s.wireframe&&n.jsxs("div",{children:["Frame: ",s.frameWidth?.toFixed(2),"m beams"]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-purple-500/20",children:[n.jsx("h3",{className:"text-lg font-semibold text-purple-200",children:"3D Preview"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Interactive preview of your custom shape"})]}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-purple-500/20",children:[n.jsx("div",{ref:m,className:"rounded-lg overflow-hidden border border-gray-600"}),n.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[n.jsxs("button",{onClick:()=>K(),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded flex items-center gap-2 text-sm transition-colors",children:[n.jsx(Td,{className:"w-4 h-4"}),"Refresh"]}),n.jsxs("button",{className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded flex items-center gap-2 text-sm transition-colors",children:[n.jsx(Od,{className:"w-4 h-4"}),"Reset View"]})]})]})})]})]})]})]})}const Er=[{id:"box",name:"Cube",type:"box",icon:n.jsx(Cs,{className:"w-5 h-5"}),category:"basic",description:"Basic cubic shape",defaultParams:{width:2,height:2,depth:2,materialType:"solid",transparency:1}},{id:"cylinder",name:"Cylinder",type:"cylinder",icon:n.jsx(hi,{className:"w-5 h-5"}),category:"basic",description:"Cylindrical shape",defaultParams:{width:2,height:3,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"sphere",name:"Sphere",type:"sphere",icon:n.jsx(Dt,{className:"w-5 h-5"}),category:"basic",description:"Spherical shape",defaultParams:{width:2,height:2,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"cone",name:"Cone",type:"cone",icon:n.jsx("div",{className:"w-5 h-5 triangle-up"}),category:"basic",description:"Conical shape",defaultParams:{width:2,height:3,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"torus",name:"Torus",type:"torus",icon:n.jsx(Dt,{className:"w-5 h-5"}),category:"basic",description:"Ring/donut shape",defaultParams:{width:2,height:.5,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"plane",name:"Plane",type:"plane",icon:n.jsx(wt,{className:"w-5 h-5"}),category:"basic",description:"Flat plane surface",defaultParams:{width:3,height:.1,depth:3,materialType:"solid",transparency:1}},{id:"structural-beam",name:"Support Beam",type:"box",icon:n.jsx(wt,{className:"w-5 h-5 rotate-45"}),category:"structural",description:"Structural support beam",defaultParams:{width:.2,height:3,depth:.2,materialType:"metal",transparency:1}},{id:"connector-node",name:"Connector Node",type:"sphere",icon:n.jsx(Dt,{className:"w-5 h-5"}),category:"connector",description:"Connection point between modules",defaultParams:{width:.5,height:.5,depth:.5,radius:.25,segments:8,materialType:"metal",transparency:1}},{id:"frame-structure",name:"Frame Structure",type:"wireframe",icon:n.jsx(jn,{className:"w-5 h-5"}),category:"structural",description:"Wireframe structural element",defaultParams:{width:2,height:2,depth:2,frameWidth:.1,frameSpacing:.5,materialType:"wireframe",transparency:1}}],Hu=[{id:"layer-1",name:"Main Structure",visible:!0,locked:!1,color:"#8B5CF6",shapes:[]},{id:"layer-2",name:"Support Elements",visible:!0,locked:!1,color:"#06B6D4",shapes:[]},{id:"layer-3",name:"Connectors",visible:!0,locked:!1,color:"#EF4444",shapes:[]}],Zu=({onBackToDesign:e,onSaveDesign:t})=>{const[s,r]=f.useState(new Map),[a,i]=f.useState(Hu),[o,c]=f.useState(new Set),[l,d]=f.useState("layer-1"),[u,h]=f.useState("create"),[m,g]=f.useState(Er[0]),[p,x]=f.useState(Er[0].defaultParams),[j,L]=f.useState(!0),[K,D]=f.useState(!0),[V,ee]=f.useState("shapes"),[G,P]=f.useState("Untitled Project"),[C,B]=f.useState(!1),[te,y]=f.useState(null),M=f.useRef(null),H=f.useRef(null),k=f.useRef(null),T=f.useRef(null),$=f.useRef(null),re=f.useRef(null),A=f.useRef(new Zs),J=f.useRef(new Yt),je=()=>`shape_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;f.useEffect(()=>{if(!M.current)return;const w=new nn;w.background=new qt(1710638),H.current=w;const _=30,N=M.current.clientWidth/M.current.clientHeight,b=new Ei(-_*N/2,_*N/2,_/2,-_/2,.1,1e3);b.position.set(15,15,15),b.lookAt(0,0,0),T.current=b;const q=new an({antialias:!0});q.setSize(M.current.clientWidth,M.current.clientHeight),q.shadowMap.enabled=!0,q.shadowMap.type=on,k.current=q,M.current.appendChild(q.domElement);const fe=new cn(16777215,.8);w.add(fe);const ie=new Js(16777215,1);ie.position.set(10,10,5),ie.castShadow=!0,ie.shadow.mapSize.width=2048,ie.shadow.mapSize.height=2048,w.add(ie);const X=new Js(16777215,.5);if(X.position.set(-10,10,-5),w.add(X),j){const R=new ln(20,20,9133302,3355443);w.add(R)}const xe=new ve(1,1,1),ye=new vs({color:16711680}),Ee=new $e(xe,ye);Ee.position.set(0,.5,0),Ee.castShadow=!0,Ee.receiveShadow=!0,w.add(Ee),console.log("Added test cube at origin");let Ie=!1,Re=0,tt=0,ze=_;const Ue=new Zs;A.current=Ue,J.current=new Yt,re.current={camera:b,scene:w,renderer:q,raycaster:A.current,mouse:J.current};let he=!1,be=new Ae,Le=new Ae,Ze=!1,De=null;const As=R=>{if(u==="pan")Ie=!0,Re=R.clientX,tt=R.clientY;else if(u==="create"){const F=q.domElement.getBoundingClientRect();J.current.x=(R.clientX-F.left)/F.width*2-1,J.current.y=-((R.clientY-F.top)/F.height)*2+1,Ue.setFromCamera(J.current,b);const I=new Ks(new Ae(0,1,0),0),ce=new Ae;Ue.ray.intersectPlane(I,ce),ce&&(Ze=!0,be.copy(ce),De=Q(m,{...p,width:.5,height:.5,depth:.5}),De.position.copy(ce),m.type==="plane"?De.position.y=.01:De.position.y=(p.height||1)/2,De.traverse(O=>{if(O instanceof $e&&O.material){const se=O.material;se.transparent=!0,se.opacity=.5}}),w.add(De),console.log("Started creating shape at:",ce))}else if(u==="select"||u==="move"){const F=q.domElement.getBoundingClientRect();J.current.x=(R.clientX-F.left)/F.width*2-1,J.current.y=-((R.clientY-F.top)/F.height)*2+1,Ue.setFromCamera(J.current,b);const I=Ue.intersectObjects(w.children,!0);if(I.length>0){let O=I[0].object.parent;for(;O&&!O.userData.cadShapeId;)O=O.parent;if(O&&O.userData.cadShapeId){const se=O.userData.cadShapeId,Pe=s.get(se);if(Pe&&!Pe.locked)if(R.ctrlKey||R.metaKey){const yt=new Set(o);yt.has(se)?yt.delete(se):yt.add(se),c(yt)}else c(new Set([se])),u==="move"&&(he=!0,be.copy(I[0].point),Le.copy(O.position))}}else!R.ctrlKey&&!R.metaKey&&c(new Set)}},Ls=R=>{if(Ie&&u==="pan"){const F=R.clientX-Re,I=R.clientY-tt,ce=.05;b.position.x-=F*ce,b.position.z-=I*ce,b.lookAt(b.position.x-10,0,b.position.z-10),Re=R.clientX,tt=R.clientY}else if(Ze&&De&&u==="create"){const F=q.domElement.getBoundingClientRect();J.current.x=(R.clientX-F.left)/F.width*2-1,J.current.y=-((R.clientY-F.top)/F.height)*2+1,Ue.setFromCamera(J.current,b);const I=new Ks(new Ae(0,1,0),0),ce=new Ae;if(Ue.ray.intersectPlane(I,ce),ce){const O=be.distanceTo(ce),se=Math.max(.5,O*2);De.scale.set(se/p.width,se/p.height,se/p.depth),console.log("Updating shape size:",se)}}else if(he&&u==="move"&&o.size>0){const F=q.domElement.getBoundingClientRect();J.current.x=(R.clientX-F.left)/F.width*2-1,J.current.y=-((R.clientY-F.top)/F.height)*2+1,Ue.setFromCamera(J.current,b);const I=new Ks(new Ae(0,1,0),0),ce=new Ae;if(Ue.ray.intersectPlane(I,ce),ce){const O=ce.sub(be);o.forEach(se=>{const Pe=s.get(se);Pe&&Pe.mesh&&!Pe.locked&&Pe.mesh.position.copy(Le.clone().add(O))})}}},Os=()=>{if(Ze&&De){const R=Math.max(De.scale.x,.5),F={...p,width:p.width*R,height:p.height*R,depth:p.depth*R};w.remove(De);const I=je(),ce=Q(m,F);ce.position.copy(De.position);const O={id:I,name:`${m.name} ${s.size+1}`,type:m.type,geometry:ce.children[0]?ce.children[0].geometry:null,material:ce.children[0]?ce.children[0].material:null,position:ce.position.clone(),rotation:ce.rotation.clone(),scale:ce.scale.clone(),visible:!0,locked:!1,parameters:F,layer:l,mesh:ce};w.add(ce),ce.userData={cadShapeId:I},r(se=>new Map(se.set(I,O))),i(se=>se.map(Pe=>Pe.id===l?{...Pe,shapes:[...Pe.shapes,I]}:Pe)),console.log("Shape created with final size:",R,"at position:",ce.position),Ze=!1,De=null}Ie=!1,he=!1},We=R=>{const F=R.deltaY>0?1.1:.9;ze=Math.max(5,Math.min(50,ze*F));const I=M.current?.clientWidth/M.current?.clientHeight;b.left=-ze*I/2,b.right=ze*I/2,b.top=ze/2,b.bottom=-ze/2,b.updateProjectionMatrix()};q.domElement.addEventListener("mousedown",As),q.domElement.addEventListener("mousemove",Ls),q.domElement.addEventListener("mouseup",Os),q.domElement.addEventListener("wheel",We);const v=()=>{$.current=requestAnimationFrame(v),q.render(w,b)};v();const S=()=>{if(M.current){const R=M.current.clientWidth/M.current.clientHeight;b.left=-ze*R/2,b.right=ze*R/2,b.top=ze/2,b.bottom=-ze/2,b.updateProjectionMatrix(),q.setSize(M.current.clientWidth,M.current.clientHeight)}};return window.addEventListener("resize",S),()=>{$.current&&cancelAnimationFrame($.current),M.current&&q.domElement&&M.current.removeChild(q.domElement),q.domElement.removeEventListener("mousedown",As),q.domElement.removeEventListener("mousemove",Ls),q.domElement.removeEventListener("mouseup",Os),q.domElement.removeEventListener("wheel",We),window.removeEventListener("resize",S),q.dispose()}},[j,u]);const Q=f.useCallback((w,_)=>{console.log("Creating shape with preset:",w.type,w.name,_);const N=new dn;let b;switch(w.type){case"box":console.log("Creating box geometry"),b=new ve(_.width,_.height,_.depth);break;case"cylinder":console.log("Creating cylinder geometry"),b=new Kt(_.radius||_.width/2,_.radius||_.width/2,_.height,_.segments||32);break;case"sphere":console.log("Creating sphere geometry"),b=new un(_.radius||_.width/2,_.segments||32,_.segments||16);break;case"cone":console.log("Creating cone geometry"),b=new Ti(_.radius||_.width/2,_.height,_.segments||32);break;case"torus":console.log("Creating torus geometry"),b=new ja(_.radius||_.width/2,(_.radius||_.width/2)*.3,_.segments||16,(_.segments||16)*2);break;case"plane":console.log("Creating plane geometry"),b=new Ra(_.width,_.depth),b.rotateX(-Math.PI/2);break;case"wireframe":console.log("Creating wireframe geometry"),b=new ve(_.width,_.height,_.depth);break;default:console.log("Creating default box geometry for type:",w.type),b=new ve(_.width,_.height,_.depth)}const fe=(()=>{const X={transparent:(_.transparency||1)<1,opacity:_.transparency||1,wireframe:_.materialType==="wireframe"};switch(_.materialType){case"glass":return new Na({...X,color:8965375,transmission:.9,roughness:.1,metalness:0,clearcoat:1,clearcoatRoughness:.1});case"metal":return new vs({...X,color:10066329,metalness:.8,roughness:.2});case"wireframe":return new Ca({color:9133302,wireframe:!0});default:return new vs({...X,color:w.type==="cylinder"?4906624:w.type==="sphere"?16096779:w.type==="cone"?15680580:w.type==="torus"?440020:w.type==="plane"?1096065:9133302,metalness:.1,roughness:.4})}})(),ie=new $e(b,fe);if(ie.castShadow=!0,ie.receiveShadow=!0,console.log(`Creating shape: ${w.type}`,{geometry:b.type,bounds:b.boundingBox,material:fe.type,params:_}),b.computeBoundingBox(),b.computeBoundingSphere(),N.add(ie),_.hasWalls&&_.wallThickness){const X=new ve(_.width+_.wallThickness*2,_.wallHeight||_.height,_.depth+_.wallThickness*2),xe=new vs({color:6710886,transparent:!0,opacity:.7}),ye=new $e(X,xe);ye.castShadow=!0,ye.receiveShadow=!0,N.add(ye)}if(w.type==="wireframe"){const X=new Ai(b),xe=new Li({color:9133302,linewidth:_.frameWidth||2}),ye=new Oi(X,xe);N.add(ye)}return N},[]),Ce=()=>{H.current&&o.forEach(N=>{const b=s.get(N);b&&!b.locked&&b.mesh&&H.current.remove(b.mesh)});const w=new Map(s),_=Array.from(o).filter(N=>{const b=s.get(N);return b&&!b.locked});_.forEach(N=>w.delete(N)),r(w),i(N=>N.map(b=>({...b,shapes:b.shapes.filter(q=>!_.includes(q))}))),c(new Set)};f.useEffect(()=>{const w=_=>{switch(_.key==="Delete"||_.key==="Backspace"?o.size>0&&Ce():_.key==="Escape"?(c(new Set),ke()):_.key==="a"&&(_.ctrlKey||_.metaKey)?(_.preventDefault(),c(new Set(s.keys())),ke()):_.key==="s"&&(_.ctrlKey||_.metaKey)&&(_.preventDefault(),oe()),_.key){case"c":h("create");break;case"v":h("select");break;case"m":h("move");break;case"r":h("rotate");break;case"s":!_.ctrlKey&&!_.metaKey&&h("scale");break;case"h":h("pan");break}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[o,s]),f.useEffect(()=>{ke()},[o]);const oe=async()=>{if(G.trim()){B(!0),y(null);try{let w=1/0,_=-1/0,N=1/0,b=-1/0,q=1/0,fe=-1/0;s.forEach(X=>{const xe=X.position,ye=X.parameters;w=Math.min(w,xe.x-ye.width/2),_=Math.max(_,xe.x+ye.width/2),N=Math.min(N,xe.y-ye.height/2),b=Math.max(b,xe.y+ye.height/2),q=Math.min(q,xe.z-ye.depth/2),fe=Math.max(fe,xe.z+ye.depth/2)});const ie={name:G.trim(),description:`CAD Assembly with ${s.size} components`,geometryType:"assembly",parameters:{width:_-w||5,height:b-N||5,depth:fe-q||5,components:s.size},category:"custom"};if(await ki(ie),y("Project saved successfully! Available in Collections for drag-and-drop."),t){const X=Array.from(s.values());t({name:G.trim(),shapes:X,bounds:{width:_-w||5,height:b-N||5,depth:fe-q||5}})}setTimeout(()=>y(null),3e3)}catch(w){console.error("Error saving project:",w),y("Error saving project. Please try again.")}finally{B(!1)}}},we=w=>{if(u!=="select"||!H.current||!T.current||!M.current)return;const _=M.current.getBoundingClientRect(),N=new Yt((w.clientX-_.left)/_.width*2-1,-((w.clientY-_.top)/_.height)*2+1),b=new Zs;b.setFromCamera(N,T.current);const q=b.intersectObjects(H.current.children,!0);if(q.length>0){let ie=q[0].object.parent;for(;ie&&!ie.userData.cadShapeId;)ie=ie.parent;if(ie&&ie.userData.cadShapeId){const X=ie.userData.cadShapeId,xe=s.get(X);if(xe&&!xe.locked){if(w.ctrlKey||w.metaKey){const ye=new Set(o);ye.has(X)?ye.delete(X):ye.add(X),c(ye)}else c(new Set([X]));ke()}}}else!w.ctrlKey&&!w.metaKey&&(c(new Set),ke())},ke=()=>{H.current&&s.forEach((w,_)=>{if(w.mesh){const N=o.has(_);w.mesh.children.forEach(b=>{b instanceof $e&&(N?(b.material=b.material.clone(),b.material.emissive=new qt(4473924)):b.material.emissive=new qt(0))})}})},_e=w=>{if(o.size<2){y("Select at least 2 shapes for boolean operations"),setTimeout(()=>y(null),2e3);return}y(`${w} operation would be performed on ${o.size} shapes`),setTimeout(()=>y(null),2e3)};return n.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-black text-white",children:[n.jsxs("div",{className:"h-14 bg-black/20 border-b border-purple-500/30 flex items-center px-4 gap-4",children:[n.jsx("div",{className:"flex items-center gap-2 border-r border-gray-600 pr-4",children:n.jsxs("button",{onClick:e,className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors flex items-center gap-2",title:"Back to Main Design",children:[n.jsx(Hl,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Back to Design"})]})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("input",{type:"text",value:G,onChange:w=>P(w.target.value),className:"bg-gray-800/50 border border-gray-600 rounded px-3 py-1 text-sm w-48",placeholder:"Project name..."})}),n.jsx("div",{className:"flex items-center gap-2 border-l border-gray-600 pl-4",children:[{tool:"create",icon:Je,label:"Create - Click & Drag on Canvas"},{tool:"select",icon:_d,label:"Select"},{tool:"move",icon:fi,label:"Move"},{tool:"rotate",icon:Dd,label:"Rotate"},{tool:"scale",icon:$d,label:"Scale"}].map(({tool:w,icon:_,label:N})=>n.jsx("button",{onClick:()=>h(w),className:`p-2 rounded transition-colors ${u===w?"bg-purple-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,title:N,children:n.jsx(_,{className:"w-4 h-4"})},w))}),n.jsxs("div",{className:"flex items-center gap-2 border-l border-gray-600 pl-4",children:[n.jsx("button",{onClick:()=>_e("union"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Union",children:n.jsx(Je,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_e("subtract"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Subtract",children:n.jsx(wt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_e("intersect"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Intersect",children:n.jsx(Dt,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsx("button",{onClick:Ce,disabled:o.size===0,className:"p-2 bg-red-600 hover:bg-red-700 rounded transition-colors disabled:opacity-50",title:"Delete Selected",children:n.jsx(Ms,{className:"w-4 h-4"})}),n.jsx("button",{onClick:oe,disabled:C||s.size===0,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded transition-colors disabled:opacity-50",children:C?"Saving...":"Save Project"})]})]}),n.jsxs("div",{className:"flex flex-1",children:[n.jsxs("div",{className:"w-48 bg-black/10 border-r border-purple-500/20 flex flex-col",children:[n.jsx("div",{className:"flex border-b border-gray-600",children:[{mode:"shapes",icon:Cs,label:"Shapes"},{mode:"layers",icon:mi,label:"Layers"},{mode:"properties",icon:At,label:"Properties"},{mode:"materials",icon:jd,label:"Materials"}].map(({mode:w,icon:_,label:N})=>n.jsxs("button",{onClick:()=>ee(w),className:`flex-1 p-3 text-sm transition-colors ${V===w?"bg-purple-500/20 text-purple-200 border-b-2 border-purple-500":"hover:bg-gray-800/50"}`,children:[n.jsx(_,{className:"w-4 h-4 mx-auto mb-1"}),n.jsx("div",{children:N})]},w))}),n.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[V==="shapes"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Shape Library"}),Object.entries(Er.reduce((w,_)=>(w[_.category]||(w[_.category]=[]),w[_.category].push(_),w),{})).map(([w,_])=>n.jsxs("div",{className:"mb-6",children:[n.jsxs("h4",{className:"text-sm font-medium mb-3 text-gray-300 capitalize",children:[w," Shapes"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(N=>n.jsx("button",{onClick:()=>{console.log("Selected preset:",N.type,N.name),g(N),x(N.defaultParams)},className:`p-3 rounded-lg border transition-all ${m.id===N.id?"border-purple-500 bg-purple-500/20 text-purple-200":"border-gray-600 bg-gray-800/30 hover:border-purple-400 hover:bg-gray-700/50"}`,children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[N.icon,n.jsx("span",{className:"text-xs text-center",children:N.name})]})},N.id))})]},w)),m&&n.jsxs("div",{className:"border-t border-gray-600 pt-4 mt-4",children:[n.jsx("h4",{className:"text-sm font-medium mb-3 text-purple-200",children:"Shape Parameters"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Width"}),n.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:p.width,onChange:w=>x(_=>({..._,width:parseFloat(w.target.value)})),className:"w-full"}),n.jsxs("div",{className:"text-xs text-gray-400",children:[p.width.toFixed(1),"m"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Height"}),n.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:p.height,onChange:w=>x(_=>({..._,height:parseFloat(w.target.value)})),className:"w-full"}),n.jsxs("div",{className:"text-xs text-gray-400",children:[p.height.toFixed(1),"m"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Depth"}),n.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:p.depth,onChange:w=>x(_=>({..._,depth:parseFloat(w.target.value)})),className:"w-full"}),n.jsxs("div",{className:"text-xs text-gray-400",children:[p.depth.toFixed(1),"m"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Material"}),n.jsxs("select",{value:p.materialType||"solid",onChange:w=>x(_=>({..._,materialType:w.target.value})),className:"w-full px-2 py-1 bg-gray-800/50 border border-gray-600 rounded text-xs",children:[n.jsx("option",{value:"solid",children:"Solid"}),n.jsx("option",{value:"wireframe",children:"Wireframe"}),n.jsx("option",{value:"glass",children:"Glass"}),n.jsx("option",{value:"metal",children:"Metal"})]})]})]})]}),n.jsxs("div",{className:`w-full mt-4 p-3 bg-gradient-to-r from-green-600/20 to-blue-600/20 
                             border border-green-500/30 text-green-200 font-medium rounded-lg`,children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx(Je,{className:"w-4 h-4"}),n.jsx("span",{children:"Interactive Creation Mode"})]}),n.jsx("div",{className:"text-xs text-center text-gray-300",children:"Switch to CREATE tool above, then click & drag on the canvas to place and size shapes"})]})]}),V==="layers"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Layers"}),a.map(w=>n.jsx("div",{className:`mb-2 p-3 rounded-lg border transition-colors cursor-pointer ${l===w.id?"border-purple-500 bg-purple-500/20":"border-gray-600 bg-gray-800/30 hover:bg-gray-700/50"}`,onClick:()=>d(w.id),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w.color}}),n.jsx("span",{className:"text-sm font-medium",children:w.name}),n.jsxs("span",{className:"text-xs text-gray-400",children:["(",w.shapes.length,")"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:_=>{_.stopPropagation(),i(N=>N.map(b=>b.id===w.id?{...b,visible:!b.visible}:b))},className:"p-1 hover:bg-gray-600 rounded",children:w.visible?n.jsx(kn,{className:"w-3 h-3"}):n.jsx(ad,{className:"w-3 h-3"})}),n.jsx("button",{onClick:_=>{_.stopPropagation(),i(N=>N.map(b=>b.id===w.id?{...b,locked:!b.locked}:b))},className:"p-1 hover:bg-gray-600 rounded",children:w.locked?n.jsx(vd,{className:"w-3 h-3"}):n.jsx(xd,{className:"w-3 h-3"})})]})]})},w.id))]}),V==="properties"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Properties"}),o.size>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:[o.size," shape(s) selected"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position X"}),n.jsx("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",placeholder:"0.0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position Y"}),n.jsx("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",placeholder:"0.0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position Z"}),n.jsx("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",placeholder:"0.0"})]})]})]}):n.jsx("p",{className:"text-sm text-gray-400",children:"Select shapes to edit properties"})]}),V==="materials"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Material Editor"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Material Type"}),n.jsxs("select",{value:p.materialType||"solid",onChange:w=>x(_=>({..._,materialType:w.target.value})),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",children:[n.jsx("option",{value:"solid",children:"Solid"}),n.jsx("option",{value:"wireframe",children:"Wireframe"}),n.jsx("option",{value:"glass",children:"Glass"}),n.jsx("option",{value:"metal",children:"Metal"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transparency"}),n.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:p.transparency||1,onChange:w=>x(_=>({..._,transparency:parseFloat(w.target.value)})),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[((p.transparency||1)*100).toFixed(0),"%"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"hasWalls",checked:p.hasWalls||!1,onChange:w=>x(_=>({..._,hasWalls:w.target.checked})),className:"rounded"}),n.jsx("label",{htmlFor:"hasWalls",className:"text-sm font-medium",children:"Add Walls"})]}),p.hasWalls&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wall Thickness"}),n.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.05",value:p.wallThickness||.2,onChange:w=>x(_=>({..._,wallThickness:parseFloat(w.target.value)})),className:"w-full"}),n.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(p.wallThickness||.2).toFixed(2),"m"]})]})]})]})]})]}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("div",{ref:M,className:"w-full h-full cursor-crosshair",onClick:we}),n.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[n.jsx("button",{onClick:()=>L(!j),className:`p-2 rounded transition-colors ${j?"bg-purple-500":"bg-gray-700 hover:bg-gray-600"}`,title:"Toggle Grid",children:n.jsx(jn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>D(!K),className:`p-2 rounded transition-colors ${K?"bg-purple-500":"bg-gray-700 hover:bg-gray-600"}`,title:"Snap to Grid",children:n.jsx(Yd,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm rounded-lg p-3",children:n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{children:["Shapes: ",s.size]}),n.jsxs("div",{children:["Selected: ",o.size]}),n.jsxs("div",{className:"text-purple-300",children:["Tool: ",u]}),n.jsxs("div",{children:["Layer: ",a.find(w=>w.id===l)?.name]}),n.jsxs("div",{className:"text-xs text-yellow-300 mt-2",children:[u==="create"&&"Click & drag on canvas to create shapes",u==="select"&&"Click shapes to select them",u==="move"&&"Drag selected shapes to move them",u==="pan"&&"Drag to orbit around the scene"]}),n.jsx("div",{className:"text-xs text-gray-400",children:"Isometric View  Wheel: Zoom  Pan: Drag to move view"}),n.jsx("div",{className:"text-xs text-gray-400",children:"Keys: C=Create, V=Select, M=Move, R=Rotate, S=Scale, H=Pan"})]})}),te&&n.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 
                          bg-black/80 backdrop-blur-sm rounded-lg p-4 max-w-md text-center`,children:n.jsx("div",{className:`text-sm ${te.includes("Error")?"text-red-200":"text-green-200"}`,children:te})})]})]})]})},qe=f.forwardRef(({className:e,variant:t="default",...s},r)=>n.jsx("div",{className:Fe("inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",{"bg-muted text-text ring-muted":t==="default"||t==="neutral","status-green ring-success/30":t==="success","status-amber ring-warning/30":t==="warning","status-red ring-danger/30":t==="danger"||t==="destructive","bg-secondary text-secondary-foreground ring-secondary":t==="secondary","border border-primary text-primary bg-transparent ring-primary/30":t==="outline"},e),ref:r,...s}));qe.displayName="Badge";const Hs=({label:e,value:t,unit:s,status:r,icon:a})=>n.jsx(st,{className:"glass",children:n.jsxs(rt,{className:"flex items-center gap-3 p-4",children:[a&&n.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-muted",children:a}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:e}),n.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[n.jsx("p",{className:"text-2xl font-bold text-text",children:t}),s&&n.jsx("p",{className:"text-sm text-muted-foreground",children:s}),r&&n.jsxs(qe,{variant:r,className:"ml-auto",children:[r==="success"&&"",r==="warning"&&"!",r==="danger"&&""]})]})]})]})}),ji=({nhv:e=0,pressurizedVolume:t=0,utilization:s=0,corridorStatus:r="success"})=>{const a=o=>o>85?"danger":o>70?"warning":"success",i=o=>o<50?"danger":o<100?"warning":"success";return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Hs,{label:"Net Habitable Volume",value:e.toFixed(1),unit:"m",status:i(e),icon:n.jsx("div",{className:"text-primary",children:""})}),n.jsx(Hs,{label:"Pressurized Volume",value:t.toFixed(1),unit:"m",icon:n.jsx("div",{className:"text-primary",children:""})}),n.jsx(Hs,{label:"Utilization",value:s.toFixed(1),unit:"%",status:a(s),icon:n.jsx("div",{className:"text-primary",children:""})}),n.jsx(Hs,{label:"Corridor Status",value:r==="success"?"OK":r==="warning"?"CHECK":"BLOCKED",status:r,icon:n.jsx("div",{className:"text-primary",children:""})})]})},Ss={CREW_SLEEP:{color:"#3b82f6",icon:"",size:{width:2,height:2.1,depth:2.2},geometry:"sleep_pod"},HYGIENE:{color:"#10b981",icon:"",size:{width:2,height:2.2,depth:2},geometry:"cylinder"},WASTE:{color:"#f59e0b",icon:"",size:{width:1.8,height:2.2,depth:1.8},geometry:"rounded_box"},EXERCISE:{color:"#ef4444",icon:"",size:{width:3,height:2.5,depth:4},geometry:"gym_module"},FOOD_PREP:{color:"#8b5cf6",icon:"",size:{width:3,height:2.2,depth:3},geometry:"kitchen_module"},ECLSS:{color:"#22c55e",icon:"",size:{width:3,height:2.3,depth:2.5},geometry:"technical_rack"},MEDICAL:{color:"#ec4899",icon:"",size:{width:2.5,height:2.3,depth:2.5},geometry:"medical_bay"},MAINTENANCE:{color:"#06b6d4",icon:"",size:{width:2.5,height:2.3,depth:2.5},geometry:"workshop"},CUSTOM_CAD:{color:"#8b5cf6",icon:"",size:{width:2,height:2,depth:2},geometry:"custom"},STOWAGE:{color:"#f97316",icon:"",size:{width:2.5,height:2.3,depth:3.5},geometry:"storage_rack"},RECREATION:{color:"#84cc16",icon:"",size:{width:2,height:2.2,depth:2},geometry:"lounge_pod"},WORKSTATION:{color:"#64748b",icon:"",size:{width:2.2,height:2.2,depth:2.2},geometry:"workstation"},AIRLOCK:{color:"#0ea5e9",icon:"",size:{width:2,height:2.3,depth:2.2},geometry:"airlock_chamber"},GLOVEBOX:{color:"#8b5cf6",icon:"",size:{width:1.4,height:2,depth:1.8},geometry:"science_station"},TRASH_MGMT:{color:"#6b7280",icon:"",size:{width:1.5,height:2,depth:2},geometry:"compactor"},COMMON_AREA:{color:"#f59e0b",icon:"",size:{width:3,height:2.2,depth:3},geometry:"community_space"}};function pr(e,t=.5){return Math.round(e/t)*t}function Ku(e,t){const{w_m:s,h_m:r,l_m:a}=t;switch(e){case"sleep_pod":const i=new Ui(Math.min(s,a)/2.2,r-Math.min(s,a)/1.1,4,8);return i.rotateZ(Math.PI/2),i;case"cylinder":return new Kt(s/2,s/2,r,16);case"rounded_box":return new ve(s,r,a);case"gym_module":new dn;const c=new ve(s,r*.8,a);return new ve(s*.8,r*.2,a*.6),c;case"kitchen_module":return new ve(s,r,a);case"technical_rack":return new ve(s,r*1.2,a*.8);case"medical_bay":return new ve(s,r,a);case"workshop":return new ve(s,r,a);case"storage_rack":return new ve(s,r*1.1,a);case"lounge_pod":return new un(s/2,16,12);case"workstation":return new ve(s,r,a);case"airlock_chamber":const m=new Kt(s/2,s/2,r,8);return m.rotateZ(Math.PI/2),m;case"science_station":return new ve(s,r*1.1,a);case"compactor":return new Kt(s/2.2,s/2,r,12);case"community_space":return new Kt(s/2,s/2,r,8);default:return new ve(s,r,a)}}function qu(e,t){const s=t?16776960:e.color;return[new ht({color:s,transparent:!0,opacity:.8}),new ht({color:s,transparent:!0,opacity:.8}),new ht({color:s,transparent:!0,opacity:.9}),new ht({color:s,transparent:!0,opacity:.7}),new ht({color:s,transparent:!0,opacity:.8}),new ht({color:s,transparent:!0,opacity:.8})]}function Yu(e,t=42,s=8e3,r=800){const a=new Float32Array(s*3),i=new Float32Array(s*3),o=h=>{let m=Math.sin(h++)*1e4;return m-Math.floor(m)};let c=t;for(let h=0;h<s;h++){const m=r*.8+o(c++)*r*.2,g=o(c++)*Math.PI*2,p=Math.acos(2*o(c++)-1);a[h*3]=m*Math.sin(p)*Math.cos(g),a[h*3+1]=m*Math.sin(p)*Math.sin(g),a[h*3+2]=m*Math.cos(p);const x=.3+o(c++)*.7,j=o(c++);j>.8?(i[h*3]=x*.8,i[h*3+1]=x*.9,i[h*3+2]=x):j>.6?(i[h*3]=x,i[h*3+1]=x,i[h*3+2]=x):j>.3?(i[h*3]=x,i[h*3+1]=x*.9,i[h*3+2]=x*.7):(i[h*3]=x,i[h*3+1]=x*.6,i[h*3+2]=x*.4)}const l=new $i;l.setAttribute("position",new En(a,3)),l.setAttribute("color",new En(i,3));const d=new Bi({size:2,sizeAttenuation:!1,vertexColors:!0,transparent:!0,opacity:.8}),u=new Vi(l,d);return e.add(u),u}function Qu({objects:e,setObjects:t,selectedId:s,setSelectedId:r,scenario:a,hoverPointRef:i,isInitialized:o,setIsInitialized:c,sceneRefs:l,onContextMenu:d}){const u=P=>{switch(P){case"MARS_SURFACE":return{background:9127187,ground:13468991,grid:9127187,ambientLight:16757606,directionalLight:16767673,groundTexture:"/textures/ground/mars_surface.webp",skyTexture:"/textures/skybox/sky.webp"};case"LUNAR":case"LUNAR_SURFACE":return{background:1118481,ground:6908265,grid:5592405,ambientLight:13421772,directionalLight:16777215,groundTexture:"/textures/ground/moon-surface-seamless-texture-background-closeup-moon-surface-texture-188679621.webp",skyTexture:"/textures/skybox/sky.webp"};case"LEO":case"SPACE_STATION":return{background:17,ground:3100495,grid:4620980,ambientLight:15135743,directionalLight:16777215,groundTexture:"/textures/ground/space-station-floor.jpg",skyTexture:"/textures/skybox/sky.webp"};case"MARS_TRANSIT":return{background:1644912,ground:3092271,grid:4286945,ambientLight:14739199,directionalLight:15792383,groundTexture:"/textures/ground/ship-deck.jpg",skyTexture:"/textures/skybox/sky.webp"};case"DEEP_SPACE":return{background:0,ground:1842204,grid:6697881,ambientLight:15132410,directionalLight:16777215,groundTexture:"/textures/ground/deep-space-deck.jpg",skyTexture:"/textures/skybox/sky.webp"};default:return{background:2956137,ground:13458524,grid:9127187,ambientLight:16777215,directionalLight:16777215,groundTexture:"/textures/ground/default-surface.jpg",skyTexture:"/textures/skybox/sky.webp"}}},h=f.useRef(null),m=f.useRef(),g=f.useRef(),p=f.useRef(),x=f.useRef(new Map),j=f.useRef(new Zs),L=f.useRef(new Yt),K=f.useRef(new Ks(new Ae(0,1,0),0)),D=f.useRef(!1),V=f.useRef(new Ae),ee=f.useRef(),G=f.useRef({isRotating:!1,isPanning:!1,isSpacePressed:!1,previousMouse:{x:0,y:0},spherical:new Ii(25,Math.PI/4,0),target:new Ae(0,0,0),panSpeed:.02,rotateSpeed:.005});return f.useEffect(()=>{if(console.log("Initializing Three.js scene..."),!h.current){console.log("Mount ref not ready");return}try{let P=function(N){N.preventDefault();const b=G.current;if(b.isSpacePressed&&N.button===0){b.isPanning=!0,b.previousMouse={x:N.clientX,y:N.clientY},Q.domElement.style.cursor="grabbing";return}if(N.button===0){const q=Q.domElement.getBoundingClientRect(),fe=(N.clientX-q.left)/q.width*2-1,ie=-((N.clientY-q.top)/q.height)*2+1;L.current.set(fe,ie),j.current.setFromCamera(L.current,J);const X=Array.from(x.current.values()),xe=j.current.intersectObjects(X);if(xe.length>0){const ye=xe[0].object.userData.id;r(ye),D.current=!0;const Ee=xe[0].object,Ie=xe[0].point;V.current.copy(Ee.position).sub(Ie)}else r(null),b.isRotating=!0,b.previousMouse={x:N.clientX,y:N.clientY}}else N.button===2&&(b.isPanning=!0,b.previousMouse={x:N.clientX,y:N.clientY})},C=function(N){const b=Q.domElement.getBoundingClientRect(),q=(N.clientX-b.left)/b.width*2-1,fe=-((N.clientY-b.top)/b.height)*2+1;L.current.set(q,fe),j.current.setFromCamera(L.current,J);const ie=new Ae;if(j.current.ray.intersectPlane(K.current,ie),i&&(i.current=ie.clone()),D.current&&s){const Ee=x.current.get(s);if(Ee){const Ie=new Ae;j.current.ray.intersectPlane(K.current,Ie);const Re=Ie.add(V.current);Re.x=pr(Re.x),Re.z=pr(Re.z),Re.y=Math.max(1,Re.y),Ee.position.copy(Re)}return}const X=G.current,xe=N.clientX-X.previousMouse.x,ye=N.clientY-X.previousMouse.y;if(X.isRotating)X.spherical.theta-=xe*X.rotateSpeed,X.spherical.phi+=ye*X.rotateSpeed,X.spherical.phi=Math.max(.1,Math.min(Math.PI-.1,X.spherical.phi)),J.position.setFromSpherical(X.spherical).add(X.target),J.lookAt(X.target),X.previousMouse={x:N.clientX,y:N.clientY};else if(X.isPanning){const Ee=new Ae,Ie=new Ae().crossVectors(J.up,new Ae().subVectors(X.target,J.position).normalize()),Re=new Ae().crossVectors(Ie,new Ae().subVectors(X.target,J.position).normalize());Ee.addScaledVector(Ie,-xe*X.panSpeed),Ee.addScaledVector(Re,ye*X.panSpeed),X.target.add(Ee),J.position.add(Ee),X.previousMouse={x:N.clientX,y:N.clientY}}},B=function(){if(D.current&&s){const b=x.current.get(s);if(b){const q=b.position;t(fe=>fe.map(ie=>ie.id===s?{...ie,position:[q.x,q.y,q.z]}:ie))}D.current=!1}const N=G.current;N.isRotating=!1,N.isPanning=!1,N.isSpacePressed?Q.domElement.style.cursor="move":Q.domElement.style.cursor="default"},te=function(N){N.preventDefault();const b=G.current,q=N.deltaY>0?1.1:.9;b.spherical.radius=Math.max(5,Math.min(100,b.spherical.radius*q)),J.position.setFromSpherical(b.spherical).add(b.target),J.lookAt(b.target)},y=function(N){N.code==="Space"&&(N.preventDefault(),G.current.isSpacePressed=!0,Q.domElement.style.cursor="move")},M=function(N){N.code==="Space"&&(N.preventDefault(),G.current.isSpacePressed=!1,G.current.isPanning=!1,G.current.isRotating=!1,Q.domElement.style.cursor="default")},H=function(N){N.preventDefault();const b=Q.domElement.getBoundingClientRect(),q=new Yt((N.clientX-b.left)/b.width*2-1,-((N.clientY-b.top)/b.height)*2+1);j.current.setFromCamera(q,J);const fe=j.current.intersectObjects(re.children,!0);let ie=null;for(const X of fe)if(X.object.userData.id){ie=X.object.userData.id;break}d(N.clientX,N.clientY,ie)},k=function(){if(ee.current=requestAnimationFrame(k),A){const N=A.material;N.opacity=.6+.2*Math.sin(Date.now()*.001)}Q.render(re,J)},T=function(){if(!h.current)return;const N=h.current.clientWidth,b=h.current.clientHeight;J.aspect=N/b,J.updateProjectionMatrix(),Q.setSize(N,b)};const $=u(a.destination),re=new nn;re.background=new qt(17),m.current=re;const A=Yu(re,42,6e3,600),J=new ka(75,h.current.clientWidth/h.current.clientHeight,.1,1e3);p.current=J,l.current.camera=J;const je=G.current;J.position.setFromSpherical(je.spherical).add(je.target),J.lookAt(je.target);const Q=new an({antialias:!0,alpha:!1});Q.setSize(h.current.clientWidth,h.current.clientHeight),Q.shadowMap.enabled=!0,Q.shadowMap.type=on,Q.setClearColor(2956137),g.current=Q,l.current.renderer=Q,l.current.raycaster=j.current,l.current.plane=K.current,h.current.appendChild(Q.domElement);const Ce=new cn($.ambientLight,.4);re.add(Ce);const oe=new Js($.directionalLight,.8);oe.position.set(10,10,5),oe.castShadow=!0,oe.shadow.mapSize.width=2048,oe.shadow.mapSize.height=2048,re.add(oe);const we=new Ra(100,100),ke=new Di;let _e;try{console.log(`Loading ground texture: ${$.groundTexture}`);const N=ke.load($.groundTexture,b=>{console.log("Ground texture loaded successfully"),b.wrapS=Mn,b.wrapT=Mn,b.repeat.set(1,1),b.minFilter=Fi,b.magFilter=zi,b.generateMipmaps=!0,_e.map=b,_e.needsUpdate=!0},b=>{console.log("Loading ground texture progress:",b)},b=>{console.warn("Failed to load ground texture, using fallback color:",b)});_e=new ht({color:$.ground,map:N})}catch(N){console.warn("Error creating texture loader, using fallback color:",N),_e=new ht({color:$.ground})}const w=new $e(we,_e);w.rotation.x=-Math.PI/2,w.receiveShadow=!0,re.add(w),re.background=new qt(0);const _=new ln(50,50,$.grid,$.grid);return _.material.transparent=!0,_.material.opacity=.3,re.add(_),Q.domElement.addEventListener("mousedown",P),Q.domElement.addEventListener("mousemove",C),Q.domElement.addEventListener("mouseup",B),Q.domElement.addEventListener("wheel",te),Q.domElement.addEventListener("contextmenu",H),window.addEventListener("keydown",y),window.addEventListener("keyup",M),k(),window.addEventListener("resize",T),c(!0),console.log("Three.js scene initialized successfully"),()=>{console.log("Cleaning up Three.js scene"),window.removeEventListener("resize",T),ee.current&&cancelAnimationFrame(ee.current),Q.domElement&&(Q.domElement.removeEventListener("mousedown",P),Q.domElement.removeEventListener("mousemove",C),Q.domElement.removeEventListener("mouseup",B),Q.domElement.removeEventListener("wheel",te),Q.domElement.removeEventListener("contextmenu",H)),window.removeEventListener("keydown",y),window.removeEventListener("keyup",M),h.current&&Q.domElement&&h.current.removeChild(Q.domElement),Q.dispose()}}catch(P){console.error("Error initializing Three.js:",P)}},[s,r,t,i,c,a.destination]),f.useEffect(()=>{!m.current||!o||(console.log("Updating objects in scene, count:",e.length),x.current.forEach(P=>{m.current.remove(P),P.geometry.dispose(),Array.isArray(P.material)?P.material.forEach(C=>C.dispose()):P.material.dispose()}),x.current.clear(),e.forEach(P=>{const C=Ss[P.type];if(!C)return;const B=s===P.id,te=Ku(C.geometry,P.size),y=qu(C,B),M=new $e(te,y);M.position.set(...P.position),M.rotation.set(...P.rotation||[0,0,0]),M.scale.set(...P.scale||[1,1,1]),M.castShadow=!0,M.receiveShadow=!0,M.userData={id:P.id,type:P.type},m.current.add(M),x.current.set(P.id,M)}))},[e,s,o]),n.jsx("div",{ref:h,className:"w-full h-full bg-background",children:!o&&n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-white text-center",children:[n.jsx(Zr,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),n.jsx("p",{children:"Loading 3D Scene..."})]})})})}const Wt=(e,t)=>{try{const s=localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return console.warn(`Failed to load ${e} from storage:`,s),t}},Gt=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(s){console.warn(`Failed to save ${e} to storage:`,s)}};function Ni(){const e={SCENARIO:"nasa-habitat-scenario",OBJECTS:"nasa-habitat-objects",SELECTED_ID:"nasa-habitat-selected-id",CAD_DESIGNS:"nasa-habitat-cad-designs",VALIDATION_RESULTS:"nasa-habitat-validation-results",ACTIVE_TAB:"nasa-habitat-active-tab"},[t,s]=f.useState(()=>Wt(e.SCENARIO,{crew_size:4,mission_duration_days:900,destination:"MARS_TRANSIT",fairing:Pr[2]})),[r,a]=f.useState({shape:"CYLINDER",levels:2,dimensions:{diameter_m:6.5,height_m:12},pressurized_volume_m3:400,net_habitable_volume_m3:300}),[i,o]=f.useState(()=>Wt(e.OBJECTS,[])),[c,l]=f.useState(()=>Wt(e.SELECTED_ID,null)),[d,u]=f.useState(()=>Wt(e.VALIDATION_RESULTS,null)),[h,m]=f.useState({validation:!1}),[g,p]=f.useState(!1),[x,j]=f.useState(1),[L,K]=f.useState(!1),[D,V]=f.useState(!0),[ee,G]=f.useState(!0),[P,C]=f.useState(!0),[B,te]=f.useState(!0),[y,M]=f.useState(!0),[H,k]=f.useState(!0),[T,$]=f.useState(()=>Wt(e.ACTIVE_TAB,"design")),[re,A]=f.useState(!1),[J,je]=f.useState(!1),[Q,Ce]=f.useState({visible:!1,x:0,y:0,objectId:null}),[oe,we]=f.useState(null),[ke,_e]=f.useState(!0),[w,_]=f.useState(null),[N,b]=f.useState(()=>Wt(e.CAD_DESIGNS,[])),q=f.useRef(null);f.useEffect(()=>{Si().catch(console.error)},[]),f.useEffect(()=>{const v=setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100);return()=>clearTimeout(v)},[H]),f.useEffect(()=>{Gt(e.OBJECTS,i)},[i]),f.useEffect(()=>{Gt(e.SCENARIO,t)},[t]),f.useEffect(()=>{Gt(e.SELECTED_ID,c)},[c]),f.useEffect(()=>{Gt(e.ACTIVE_TAB,T)},[T]),f.useEffect(()=>{Gt(e.CAD_DESIGNS,N)},[N]),f.useEffect(()=>{const v=S=>{S.target};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]),f.useEffect(()=>{const v=S=>{if(!c||S.target instanceof HTMLInputElement||S.target instanceof HTMLTextAreaElement)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(S.code)&&S.preventDefault();const R=S.shiftKey?1:.5,F=S.shiftKey?Math.PI/4:Math.PI/8;let I="";o(ce=>ce.map(O=>{if(O.id!==c)return O;const se={...O};switch(S.code){case"ArrowLeft":se.position=[O.position[0]-R,O.position[1],O.position[2]],I=`Moving Left (${R}m)`;break;case"ArrowRight":se.position=[O.position[0]+R,O.position[1],O.position[2]],I=`Moving Right (${R}m)`;break;case"ArrowUp":S.ctrlKey?(se.position=[O.position[0],O.position[1]+R,O.position[2]],I=`Moving Up (${R}m)`):(se.position=[O.position[0],O.position[1],O.position[2]-R],I=`Moving Forward (${R}m)`);break;case"ArrowDown":S.ctrlKey?(se.position=[O.position[0],O.position[1]-R,O.position[2]],I=`Moving Down (${R}m)`):(se.position=[O.position[0],O.position[1],O.position[2]+R],I=`Moving Backward (${R}m)`);break;case"KeyQ":const Pe=O.rotation?.[1]||0;se.rotation=[O.rotation?.[0]||0,Pe-F,O.rotation?.[2]||0],I=`Rotating Left (${Math.round(F*180/Math.PI)})`;break;case"KeyE":const yt=O.rotation?.[1]||0;se.rotation=[O.rotation?.[0]||0,yt+F,O.rotation?.[2]||0],I=`Rotating Right (${Math.round(F*180/Math.PI)})`;break;case"KeyR":const Is=O.rotation?.[0]||0;se.rotation=[Is+F,O.rotation?.[1]||0,O.rotation?.[2]||0],I=`Pitch Up (${Math.round(F*180/Math.PI)})`;break;case"KeyF":const Pn=O.rotation?.[0]||0;se.rotation=[Pn-F,O.rotation?.[1]||0,O.rotation?.[2]||0],I=`Pitch Down (${Math.round(F*180/Math.PI)})`;break;case"KeyW":se.position=[O.position[0],O.position[1]+R,O.position[2]],I=`Moving Up (${R}m)`;break;case"KeyS":se.position=[O.position[0],O.position[1]-R,O.position[2]],I=`Moving Down (${R}m)`;break;case"KeyT":const Ci=O.rotation?.[2]||0;se.rotation=[O.rotation?.[0]||0,O.rotation?.[1]||0,Ci-F],I=`Roll Left (${Math.round(F*180/Math.PI)})`;break;case"KeyG":const Ri=O.rotation?.[2]||0;se.rotation=[O.rotation?.[0]||0,O.rotation?.[1]||0,Ri+F],I=`Roll Right (${Math.round(F*180/Math.PI)})`;break;case"Equal":case"NumpadAdd":if(S.ctrlKey){const Mt=O.scale||[1,1,1],Et=.1;se.scale=[Math.min(Mt[0]+Et,3),Math.min(Mt[1]+Et,3),Math.min(Mt[2]+Et,3)],I=`Scaling Up (${Math.round(se.scale[0]*100)}%)`}break;case"Minus":case"NumpadSubtract":if(S.ctrlKey){const Mt=O.scale||[1,1,1],Et=.1;se.scale=[Math.max(Mt[0]-Et,.2),Math.max(Mt[1]-Et,.2),Math.max(Mt[2]-Et,.2)],I=`Scaling Down (${Math.round(se.scale[0]*100)}%)`}break;case"KeyX":S.ctrlKey&&(se.rotation=[0,0,0],I="Reset Rotation");break;case"KeyC":S.ctrlKey&&(se.scale=[1,1,1],I="Reset Scale");break}return se})),I&&(_(I),setTimeout(()=>_(null),1500))};return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[c]),f.useEffect(()=>{Gt(e.CAD_DESIGNS,N)},[N]);const fe=f.useCallback(v=>{const S=v.layout;s(F=>({...F,crew_size:S.scenario.crew_size,mission_duration_days:S.scenario.mission_duration_days,destination:S.scenario.destination}));const R=S.modules.map(F=>({id:F.id,type:F.type,position:[...F.position,0],rotation:[0,0,0],scale:[1,1,1],size:F.size}));o(R),$("design"),u(null),alert(`Loaded design: ${v.name}`)},[]),ie=f.useCallback(v=>{const S=`${v.toLowerCase().replace("_","-")}-${x}`;return j(R=>R+1),S},[x]),X=f.useCallback(()=>({scenario:{crew_size:t.crew_size,mission_duration_days:t.mission_duration_days,destination:t.destination,fairing:{name:t.fairing.name,inner_diameter_m:t.fairing.inner_diameter_m,inner_height_m:t.fairing.inner_height_m,shape:t.fairing.shape==="CYLINDRICAL"?"CYLINDER":"CONE"}},habitat:{shape:r.shape,levels:r.levels,dimensions:r.dimensions,pressurized_volume_m3:r.pressurized_volume_m3,net_habitable_volume_m3:r.net_habitable_volume_m3},modules:i.map(v=>({id:v.id,type:v.type,level:0,position:[v.position[0],v.position[2]],size:v.size,rotation_deg:0,crew_capacity:v.type==="CREW_SLEEP"?1:void 0,equipment:[]})),version:"1.0.0"}),[t,r,i]),xe=f.useCallback(async()=>{const v=X(),S=new Date().toLocaleString();A(!0);try{const R=await Rn({name:`Habitat Design ${S}`,description:`Design with ${i.length} modules for ${t.destination} mission`,layout:v,tags:["nasa",t.destination.toLowerCase(),`crew-${t.crew_size}`]});alert(`Design saved successfully! ID: ${R}`)}catch(R){console.error("Failed to save design:",R),alert("Failed to save design. Please try again.")}finally{A(!1)}},[i,t,X]),ye=f.useCallback(async()=>{if(i.length===0){alert("No modules to save. Add some modules first.");return}await xe()},[i,xe]),Ee=f.useRef({camera:null,renderer:null,raycaster:null,plane:null}),Ie=f.useCallback((v,S)=>{const{camera:R,renderer:F,raycaster:I,plane:ce}=Ee.current;if(!R||!F||!I||!ce)return console.log("Scene not ready for drop calculation"),null;const O=F.domElement.getBoundingClientRect(),se=(v-O.left)/O.width*2-1,Pe=-((S-O.top)/O.height)*2+1,yt=new Yt(se,Pe);I.setFromCamera(yt,R);const Is=new Ae;return I.ray.intersectPlane(ce,Is)?Is:null},[]);function Re(v){v.preventDefault();const S=v.dataTransfer.getData("module");if(!S)return;const R=Ie(v.clientX,v.clientY);if(!R){console.log("Could not calculate drop position");return}const F=ie(S),I=Ss[S],ce=gs.find(Pe=>Pe.type===S);if(!I||!ce)return;const O=[pr(R.x),I.size.height/2,pr(R.z)],se={id:F,type:S,position:O,rotation:[0,0,0],scale:[1,1,1],size:ce.defaultSize};console.log("Adding NASA module at:",O,"from drop at:",{x:v.clientX,y:v.clientY}),o(Pe=>[...Pe,se]),l(F)}function tt(v){v.preventDefault();const S=Ie(v.clientX,v.clientY);S&&q.current&&q.current.copy(S)}const ze=async()=>{m(v=>({...v,validation:!0}));try{const v=X();console.log("Sending to NASA API:",v);const S=await Du(v);u(S)}catch(v){console.error("NASA validation failed:",v),u({valid:i.length>0,issues:i.length===0?[{id:"NO_MODULES",severity:"error",message:"No modules placed"}]:[],suggestions:[]})}m(v=>({...v,validation:!1}))},Ue=()=>{o([]),u(null),l(null)},he=f.useCallback(v=>{o(S=>S.filter(R=>R.id!==v)),c===v&&l(null),Ce({visible:!1,x:0,y:0,objectId:null})},[c]),be=f.useCallback(v=>{const S=i.find(I=>I.id===v);if(!S)return;const R=ie(S.type),F={...S,id:R,position:[S.position[0]+2,S.position[1],S.position[2]+2]};o(I=>[...I,F]),l(R),Ce({visible:!1,x:0,y:0,objectId:null})},[i,ie]),Le=f.useCallback(v=>{const S=i.find(R=>R.id===v);S&&we(S),Ce({visible:!1,x:0,y:0,objectId:null})},[i]),Ze=f.useCallback(()=>{if(!oe)return;const v=ie(oe.type),S={...oe,id:v,position:[oe.position[0]+2,oe.position[1],oe.position[2]+2]};o(R=>[...R,S]),l(v),Ce({visible:!1,x:0,y:0,objectId:null})},[oe,ie]),De=f.useCallback((v,S)=>{o(R=>R.map(F=>{if(F.id===v){const I=F.scale||[1,1,1];return{...F,scale:[I[0]*S,I[1]*S,I[2]*S]}}return F})),Ce({visible:!1,x:0,y:0,objectId:null})},[]);f.useEffect(()=>{const v=S=>{S.key==="Delete"&&c?he(c):S.ctrlKey&&S.key==="c"&&c?Le(c):S.ctrlKey&&S.key==="v"&&oe?Ze():S.ctrlKey&&S.key==="d"&&c&&(S.preventDefault(),be(c))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[c,oe,he,Le,Ze,be]),f.useEffect(()=>{const v=()=>{Q.visible&&Ce({visible:!1,x:0,y:0,objectId:null})};return document.addEventListener("click",v),()=>document.removeEventListener("click",v)},[Q.visible]),f.useCallback(()=>{b([{id:"cad-1",name:"Custom Storage Module",shapes:[{type:"box",width:2,height:2,depth:1,position:[0,0,0]},{type:"cylinder",radius:.5,height:2,position:[1,0,0]}],bounds:{width:3,height:2,depth:1}},{id:"cad-2",name:"Curved Living Space",shapes:[{type:"torus",radius:1.5,height:.3,position:[0,0,0]},{type:"sphere",radius:1,position:[0,1,0]}],bounds:{width:3,height:2,depth:3}}]),alert("CAD designs imported! Check the module library for custom modules.")},[]),f.useCallback(()=>{if(i.length===0){alert("No modules to export to CAD. Add some modules first.");return}const v={name:`Habitat Export ${new Date().toISOString().split("T")[0]}`,objects:i.map(I=>({id:I.id,type:I.type,position:I.position,rotation:I.rotation||[0,0,0],scale:I.scale||[1,1,1],size:I.size})),bounds:{width:Math.max(...i.map(I=>I.position[0]+I.size.w_m))-Math.min(...i.map(I=>I.position[0])),height:Math.max(...i.map(I=>I.size.h_m)),depth:Math.max(...i.map(I=>I.position[2]+I.size.l_m))-Math.min(...i.map(I=>I.position[2]))}},S=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),R=URL.createObjectURL(S),F=document.createElement("a");F.href=R,F.download="habitat-for-cad.json",F.click(),URL.revokeObjectURL(R),alert("Habitat exported to CAD format!")},[i]);const As=f.useCallback(v=>{const S=ie("CUSTOM_CAD"),R={id:S,type:"CUSTOM_CAD",position:[0,v.bounds.height/2,0],rotation:[0,0,0],scale:[1,1,1],size:{w_m:v.bounds.width,h_m:v.bounds.height,l_m:v.bounds.depth}};o(F=>[...F,R]),l(S),alert(`Added custom CAD module: ${v.name}`)},[ie]),Ls=()=>{o([]),l(null),s({crew_size:4,mission_duration_days:365,destination:"mars",fairing:"falcon_heavy"});const v=ie("CREW_SLEEP"),S=gs.find(R=>R.type==="CREW_SLEEP");if(S){const R={id:v,type:"CREW_SLEEP",position:[0,1.5,0],rotation:[0,0,0],scale:[1,1,1],size:S.defaultSize};o([R]),l(v)}$("design"),alert("New design created! Added a crew sleep module to get you started.")},Os=()=>{["CREW_SLEEP","HYGIENE","FOOD_PREP","EXERCISE"].forEach((S,R)=>{const F=ie(S),I=gs.find(O=>O.type===S);if(!I)return;const ce={id:F,type:S,position:[R*3-4.5,1.5,0],rotation:[0,0,0],scale:[1,1,1],size:I.defaultSize};o(O=>[...O,ce])})},We=i.find(v=>v.id===c);return n.jsxs("div",{className:"w-full h-screen bg-background text-foreground space-gradient flex flex-col",children:[n.jsx("header",{className:"nav-container shadow-2xl",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:n.jsx(oa,{className:"w-6 h-6 text-white drop-shadow-lg"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary to-blue-400 bg-clip-text text-transparent",children:"NASA Habitat Designer"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Professional space habitat layout tool"})]})]}),n.jsxs("nav",{className:"flex items-center gap-1",children:[n.jsxs(me,{onClick:()=>$("design"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${T==="design"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[n.jsx(kn,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Design Area"})]}),n.jsxs(me,{onClick:()=>$("cad"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${T==="cad"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[n.jsx(At,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Laboratory CAD"})]}),n.jsxs(me,{onClick:()=>$("collections"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${T==="collections"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[n.jsx(Hr,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Collections"})]}),n.jsxs(me,{onClick:()=>$("analyses"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${T==="analyses"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[n.jsx(ps,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Analyses"})]}),n.jsx("div",{className:"w-px h-8 bg-border mx-2"}),n.jsxs(me,{onClick:ye,className:"px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 bg-green-600/80 hover:bg-green-600 text-white border border-green-500/50 shadow-lg",disabled:re,children:[re?n.jsx(Zr,{className:"w-4 h-4 animate-spin"}):n.jsx(Nn,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Save Project"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(me,{onClick:Ls,className:"btn-space px-3 py-2",children:[n.jsx(Je,{className:"w-4 h-4 mr-1"}),"New"]}),n.jsxs(me,{onClick:Ue,className:"btn-mars px-3 py-2",children:[n.jsx(Ms,{className:"w-4 h-4 mr-1"}),"Clear"]})]})]})}),n.jsx("div",{className:"flex-1 flex",children:T==="design"?n.jsxs("div",{className:"flex flex-1 relative",children:[H&&n.jsxs("aside",{className:"w-80 nav-container shadow-2xl border-r border-border flex flex-col overflow-y-auto",children:[n.jsx("div",{className:"p-3 border-b border-border bg-card/20",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-primary to-blue-600 rounded-md flex items-center justify-center",children:n.jsx(At,{className:"w-3 h-3 text-white"})}),n.jsx("span",{className:"font-semibold text-foreground",children:"Mission Control"})]}),n.jsx(me,{onClick:()=>k(!1),className:"w-8 h-8 p-0 rounded-lg hover:bg-accent",title:"Hide Sidebar",variant:"ghost",size:"sm",children:n.jsx(Cd,{className:"w-4 h-4"})})]})}),n.jsxs("div",{className:"p-3 border-b border-border",children:[n.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>C(!P),children:[P?n.jsx(wt,{className:"w-4 h-4"}):n.jsx(Je,{className:"w-4 h-4"}),"NASA Mission Scenario"]}),P&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx(ws,{className:"text-muted-foreground text-xs",children:"Crew"}),n.jsx(Kr,{type:"number",value:t.crew_size,onChange:v=>s(S=>({...S,crew_size:parseInt(v.target.value)||0})),className:"bg-background border-border text-foreground text-xs h-7 hover:bg-accent/50 transition-colors"})]}),n.jsxs("div",{children:[n.jsx(ws,{className:"text-muted-foreground text-xs",children:"Days"}),n.jsx(Kr,{type:"number",value:t.mission_duration_days,onChange:v=>s(S=>({...S,mission_duration_days:parseInt(v.target.value)||0})),className:"bg-background border-border text-foreground text-xs h-7 hover:bg-accent/50 transition-colors"})]})]}),n.jsxs("div",{children:[n.jsx(ws,{className:"text-muted-foreground text-xs",children:"Destination"}),n.jsxs("select",{value:t.destination,onChange:v=>s(S=>({...S,destination:v.target.value})),className:"w-full bg-background border border-border text-foreground text-xs h-7 rounded-md px-2 hover:bg-accent/50 transition-colors focus:ring-1 focus:ring-primary/50",children:[n.jsx("option",{value:"LEO",children:"Low Earth Orbit"}),n.jsx("option",{value:"LUNAR",children:"Lunar Surface"}),n.jsx("option",{value:"MARS_TRANSIT",children:"Mars Transit"}),n.jsx("option",{value:"MARS_SURFACE",children:"Mars Surface"}),n.jsx("option",{value:"DEEP_SPACE",children:"Deep Space"})]})]}),n.jsxs("div",{children:[n.jsx(ws,{className:"text-muted-foreground text-xs",children:"Launch Vehicle"}),n.jsx("select",{value:t.fairing.name,onChange:v=>{const S=Pr.find(R=>R.name===v.target.value);S&&s(R=>({...R,fairing:S}))},className:"w-full bg-background border border-border text-foreground text-xs h-7 rounded-md px-2 hover:bg-accent/50 transition-colors focus:ring-1 focus:ring-primary/50",children:Pr.map(v=>n.jsx("option",{value:v.name,children:v.name},v.name))})]})]})]}),n.jsxs("div",{className:"p-3 border-b border-border",children:[n.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>V(!D),children:[D?n.jsx(wt,{className:"w-4 h-4"}):n.jsx(Je,{className:"w-4 h-4"}),"NASA Functional Areas"]}),D&&n.jsxs("div",{className:"max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:[n.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(Ss).map(([v,S])=>{const R=gs.find(F=>F.type===v);return n.jsxs("div",{draggable:!0,onDragStart:F=>F.dataTransfer.setData("module",v),className:"group flex flex-col items-center gap-2 p-2 bg-card/40 hover:bg-primary/20 border border-border hover:border-primary/60 rounded-lg cursor-grab active:cursor-grabbing transition-all duration-200 backdrop-blur-sm hover:shadow-lg",children:[n.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center text-white text-sm shadow-lg flex-shrink-0",style:{backgroundColor:S.color},children:S.icon}),n.jsxs("div",{className:"text-center min-w-0 w-full",children:[n.jsx("div",{className:"font-medium text-foreground text-xs truncate",children:R?.label||v}),n.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[R?.defaultSize.w_m||S.size.width,"",R?.defaultSize.h_m||S.size.height,"",R?.defaultSize.l_m||S.size.depth,"m"]})]})]},v)})}),n.jsxs("div",{className:"text-xs text-muted-foreground text-center mt-2",children:["Scroll to see all ",Object.keys(Ss).length," functional areas"]})]})]}),N.length>0&&n.jsxs("div",{className:"p-3 border-b border-border",children:[n.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>G(!ee),children:[ee?n.jsx(wt,{className:"w-4 h-4"}):n.jsx(Je,{className:"w-4 h-4"}),"Custom CAD Modules"]}),ee&&n.jsx("div",{className:"max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:n.jsx("div",{className:"grid grid-cols-3 gap-2",children:N.map(v=>n.jsxs("div",{className:"group flex flex-col items-center gap-2 p-2 bg-card/40 hover:bg-orange-500/20 border border-border hover:border-orange-500/60 rounded-lg cursor-pointer transition-all duration-200 backdrop-blur-sm hover:shadow-lg",onClick:()=>As(v),children:[n.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded flex items-center justify-center text-white text-sm shadow-lg flex-shrink-0",children:n.jsx(At,{className:"w-4 h-4"})}),n.jsxs("div",{className:"text-center min-w-0 w-full",children:[n.jsx("div",{className:"font-medium text-foreground text-xs truncate",children:v.name}),n.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[v.bounds.width.toFixed(1),"",v.bounds.height.toFixed(1),"",v.bounds.depth.toFixed(1),"m"]})]})]},v.id))})})]}),n.jsxs("div",{className:"p-3 border-b border-border",children:[n.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>te(!B),children:[B?n.jsx(wt,{className:"w-4 h-4"}):n.jsx(Je,{className:"w-4 h-4"}),"Quick Actions"]}),B&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs(me,{onClick:Os,className:"w-full btn-space text-xs py-2 h-8",size:"sm",children:[n.jsx(Je,{className:"w-3 h-3 mr-1"}),"Add Sample Module"]}),n.jsxs(me,{onClick:()=>$("shapes"),className:"w-full btn-space text-xs py-2 h-8",size:"sm",children:[n.jsx(Gd,{className:"w-3 h-3 mr-1"}),"Custom Shape Builder"]}),n.jsxs(me,{onClick:()=>$("cad"),className:"w-full btn-space text-xs py-2 h-8",size:"sm",children:[n.jsx(At,{className:"w-3 h-3 mr-1"}),"CAD Laboratory"]})]})]}),We&&n.jsxs("div",{className:"p-4 border-b border-border",children:[n.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>M(!y),children:[y?n.jsx(wt,{className:"w-4 h-4"}):n.jsx(Je,{className:"w-4 h-4"}),"Module Inspector"]}),y&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-3 bg-card/40 border border-border rounded-lg",children:[n.jsxs("div",{className:"font-medium text-foreground capitalize flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:Ss[We.type]?.icon}),gs.find(v=>v.type===We.type)?.label]}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[n.jsxs("div",{children:["Position: (",We.position[0].toFixed(1),"m, ",We.position[1].toFixed(1),"m, ",We.position[2].toFixed(1),"m)"]}),n.jsxs("div",{children:["Volume: ",(We.size.w_m*We.size.l_m*We.size.h_m).toFixed(1),"m"]}),n.jsxs("div",{children:["Area: ",(We.size.w_m*We.size.l_m).toFixed(1),"m"]})]})]}),n.jsxs("button",{onClick:()=>{o(v=>v.filter(S=>S.id!==c)),l(null)},className:"w-full flex items-center justify-center gap-2 p-2 text-destructive hover:text-destructive/80 hover:bg-destructive/10 border border-destructive/30 rounded-lg transition-all",children:[n.jsx(Ms,{className:"w-4 h-4"}),"Remove Module"]})]})]}),n.jsxs("div",{className:"p-4 border-b border-purple-500/20",children:[n.jsx("h3",{className:"font-semibold text-purple-300 mb-3",children:"Mission Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm text-gray-300",children:["Modules: ",n.jsx("span",{className:"font-medium text-purple-300",children:i.length})]}),n.jsxs("div",{className:"text-sm text-gray-300",children:["Total Volume: ",n.jsxs("span",{className:"font-medium text-purple-300",children:[i.reduce((v,S)=>v+S.size.w_m*S.size.l_m*S.size.h_m,0).toFixed(1),"m"]})]}),n.jsxs("div",{className:"text-sm text-gray-300",children:["3D Engine: ",n.jsx("span",{className:"font-medium text-green-300",children:L?"Active":"Loading..."})]})]})]})]}),!H&&n.jsx(me,{onClick:()=>k(!0),className:"absolute top-4 left-4 z-50 w-8 h-8 p-0 rounded-lg bg-card border border-border hover:bg-accent shadow-lg",title:"Show Sidebar",variant:"ghost",children:n.jsx(Pd,{className:"w-4 h-4"})}),n.jsxs("main",{className:"flex-1 relative",onDrop:Re,onDragOver:tt,children:[n.jsx(Qu,{objects:i,setObjects:o,selectedId:c,setSelectedId:l,scenario:t,hoverPointRef:q,isInitialized:L,setIsInitialized:K,sceneRefs:Ee,onContextMenu:(v,S,R)=>{Ce({visible:!0,x:v,y:S,objectId:R})}}),n.jsx("div",{className:"absolute top-6 right-6 glass-morphism rounded-xl p-4 shadow-2xl border border-blue-500/30 glow-blue",children:n.jsxs("div",{className:"text-sm space-y-2",children:[n.jsxs("div",{className:"font-medium text-blue-300 flex items-center gap-2 text-shadow",children:[n.jsx(At,{className:"w-4 h-4"}),t.destination.replace("_"," ")]}),n.jsxs("div",{className:"text-xs text-gray-300 space-y-1 text-shadow-sm",children:[n.jsxs("div",{children:["Crew: ",t.crew_size," members"]}),n.jsxs("div",{children:["Duration: ",t.mission_duration_days," days"]}),n.jsxs("div",{children:["Vehicle: ",t.fairing.name]}),n.jsxs("div",{children:["Modules: ",i.length]})]})]})}),ke&&n.jsx("div",{className:"absolute bottom-6 right-6 glass-morphism rounded-xl p-3 shadow-2xl border border-purple-500/30 glow-purple max-w-[220px]",children:n.jsxs("div",{className:"text-xs space-y-2",children:[n.jsxs("div",{className:"font-medium text-purple-300 flex items-center justify-between text-shadow",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oa,{className:"w-3 h-3"}),"Controls"]}),n.jsx("button",{onClick:()=>_e(!1),className:"text-gray-400 hover:text-white transition-colors text-xs",children:""})]}),n.jsxs("div",{className:"text-gray-300 text-shadow-sm space-y-1",children:[n.jsx("div",{className:"text-[10px] font-medium text-purple-200",children:"Camera:"}),n.jsxs("div",{className:"text-[10px]",children:[" ",n.jsx("kbd",{className:"bg-gray-800/50 px-1 rounded text-[9px]",children:"Space"})," + Drag: Pan"]}),n.jsx("div",{className:"text-[10px]",children:" Mouse wheel: Zoom"})]}),n.jsxs("div",{className:"text-gray-300 text-shadow-sm space-y-1",children:[n.jsx("div",{className:"text-[10px] font-medium text-yellow-200",children:"Objects (when selected):"}),n.jsx("div",{className:"text-[10px]",children:" Arrow keys: Move X/Z  W/S: Height"}),n.jsx("div",{className:"text-[10px]",children:" Q/E: Rotate  R/F/T/G: Pitch/Roll"}),n.jsx("div",{className:"text-[10px]",children:" Hold Shift: Faster movement"})]})]})}),c&&n.jsxs("div",{className:"absolute top-6 left-6 glass-morphism rounded-xl p-3 shadow-2xl border border-yellow-500/40 glow-orange max-w-[280px]",children:[n.jsxs("div",{className:"flex items-center gap-2 text-yellow-300 font-medium mb-2 text-shadow text-xs",children:[n.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse shadow-lg"}),"Module Selected - Keyboard Controls"]}),n.jsxs("div",{className:"text-[10px] text-gray-300 space-y-1 text-shadow-sm",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:[n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:""})," Move X"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:""})," Move Z"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"W/S"})," Height"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"Q/E"})," Rotate Y"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"R/F"})," Pitch"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"T/G"})," Roll"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"Ctrl+"})," Scale"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"Shift"})," Fast"]})]}),n.jsx("div",{className:"text-[9px] text-gray-400 mt-2 border-t border-gray-600/50 pt-1",children:"Ctrl+X: Reset rotation  Ctrl+C: Reset scale"})]})]}),w&&n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-black/80 backdrop-blur-sm border border-green-500/50 rounded-lg px-4 py-2 shadow-2xl animate-pulse",children:n.jsxs("div",{className:"flex items-center gap-2 text-green-300 font-medium text-sm",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),w]})})]})]}):T==="collections"?n.jsx(Gu,{currentLayout:X(),onLoadDesign:fe,onSaveSuccess:()=>$("design")}):T==="shapes"?n.jsx(_a,{}):T==="cad"?n.jsx(Zu,{onBackToDesign:()=>$("design"),onSaveDesign:v=>{b(S=>[...S,{id:Date.now().toString(),name:v.name,shapes:v.shapes,bounds:v.bounds}]),alert(`CAD design "${v.name}" is now available as a custom module!`)}}):T==="analyses"?n.jsx("div",{className:"flex-1 bg-gradient-to-br from-purple-950/20 via-transparent to-pink-950/20 p-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-3xl font-bold text-purple-200 mb-2 flex items-center gap-3",children:[n.jsx(ps,{className:"w-8 h-8 text-purple-400"}),"Habitat Analysis Center"]}),n.jsx("p",{className:"text-gray-400",children:"Comprehensive analysis and validation tools for your habitat design"})]}),n.jsx(ji,{nhv:r.net_habitable_volume_m3,pressurizedVolume:r.pressurized_volume_m3,utilization:Math.min(100,i.reduce((v,S)=>v+S.size.w_m*S.size.l_m*S.size.h_m,0)/r.net_habitable_volume_m3*100),corridorStatus:i.length>0?"success":"danger"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(st,{className:"glass-morphism border-purple-500/30 shadow-xl glow-purple",children:[n.jsx(mt,{children:n.jsxs(ft,{className:"flex items-center gap-2 text-purple-200",children:[n.jsx(fs,{className:"w-5 h-5 text-green-400"}),"NASA Standards Validation"]})}),n.jsxs(rt,{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-300 text-sm",children:"Validate your habitat design against NASA standards and requirements."}),n.jsx(me,{onClick:ze,disabled:h.validation,className:"w-full btn-nasa",children:h.validation?n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"w-4 h-4 animate-spin mr-2"}),"Validating Design..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"w-4 h-4 mr-2"}),"Run NASA Validation"]})})]})]}),n.jsxs(st,{className:"glass-morphism border-orange-500/30 shadow-xl glow-orange",children:[n.jsx(mt,{children:n.jsxs(ft,{className:"flex items-center gap-2 text-orange-200",children:[n.jsx(ps,{className:"w-5 h-5 text-orange-400"}),"Quick Analysis"]})}),n.jsx(rt,{className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"bg-gray-800/40 p-3 rounded-lg",children:[n.jsx("div",{className:"text-gray-400",children:"Total Modules"}),n.jsx("div",{className:"text-2xl font-bold text-orange-300",children:i.length})]}),n.jsxs("div",{className:"bg-gray-800/40 p-3 rounded-lg",children:[n.jsx("div",{className:"text-gray-400",children:"Total Volume"}),n.jsxs("div",{className:"text-2xl font-bold text-orange-300",children:[i.reduce((v,S)=>v+S.size.w_m*S.size.l_m*S.size.h_m,0).toFixed(1),"m"]})]})]})})]})]}),d&&n.jsx("div",{className:"mt-6",children:n.jsxs(st,{className:"glass-morphism border-green-500/30 shadow-xl",children:[n.jsx(mt,{children:n.jsx(ft,{className:"flex items-center gap-2 text-green-200",children:d.valid?n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"w-5 h-5 text-green-400"}),"Validation Passed"]}):n.jsxs(n.Fragment,{children:[n.jsx(Gs,{className:"w-5 h-5 text-red-400"}),"Validation Issues Found"]})})}),n.jsxs(rt,{children:[d.issues?.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-red-300 font-medium mb-2",children:"Issues to Address:"}),n.jsx("ul",{className:"space-y-1",children:d.issues.map((v,S)=>n.jsxs("li",{className:"text-red-200 text-sm flex items-center gap-2",children:[n.jsx(Gs,{className:"w-4 h-4"}),v]},S))})]}),d.suggestions?.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:"Suggestions:"}),n.jsx("ul",{className:"space-y-1",children:d.suggestions.map((v,S)=>n.jsxs("li",{className:"text-blue-200 text-sm flex items-center gap-2",children:[n.jsx(ps,{className:"w-4 h-4"}),v]},S))})]})]})]})})]})}):n.jsx(_a,{})}),d&&n.jsx("div",{className:"glass-morphism border-t border-purple-500/20 p-4 shadow-2xl",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(st,{className:"glass-morphism border-purple-500/30 shadow-xl glow-purple",children:[n.jsx(mt,{children:n.jsxs(ft,{className:"flex items-center gap-2 text-purple-200 text-shadow",children:[d.valid?n.jsx(fs,{className:"w-5 h-5 text-green-400"}):n.jsx(Gs,{className:"w-5 h-5 text-red-400"}),"NASA Validation Results"]})}),n.jsxs(rt,{className:"space-y-3",children:[d.valid?n.jsxs(Qs,{className:"border-green-500/40 bg-green-900/30 backdrop-blur-sm",children:[n.jsx(fs,{className:"h-4 w-4 text-green-400"}),n.jsx(Xs,{className:"text-green-200 text-shadow-sm",children:"Habitat layout meets NASA requirements and safety standards."})]}):n.jsx("div",{className:"space-y-2",children:d.issues?.map((v,S)=>n.jsxs(Qs,{className:"border-red-500/40 bg-red-900/30 backdrop-blur-sm",children:[n.jsx(Gs,{className:"h-4 w-4 text-red-400"}),n.jsx(Xs,{className:"text-red-200 text-shadow-sm",children:v.message})]},S))}),d.suggestions?.map((v,S)=>n.jsxs(Qs,{className:"border-orange-500/40 bg-orange-900/30 backdrop-blur-sm",children:[n.jsx(ps,{className:"h-4 w-4 text-orange-400"}),n.jsx(Xs,{className:"text-orange-200 text-shadow-sm",children:v.message})]},S))]})]}),n.jsxs(st,{className:"glass-morphism border-purple-500/30 shadow-xl glow-blue",children:[n.jsx(mt,{children:n.jsx(ft,{className:"text-purple-300 text-shadow",children:"NASA Layout Schema"})}),n.jsx(rt,{children:n.jsx("pre",{className:"text-xs bg-gray-900/60 backdrop-blur-sm p-4 rounded-lg overflow-x-auto text-gray-300 max-h-64 border border-gray-700/50",children:JSON.stringify(X(),null,2)})})]})]})})}),Q.visible&&n.jsx("div",{className:"fixed bg-gray-900 border border-gray-600 rounded-lg shadow-xl z-50 py-2 min-w-[160px]",style:{left:Q.x,top:Q.y,transform:"translate(-50%, 0)"},onClick:v=>v.stopPropagation(),children:Q.objectId?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>De(Q.objectId,1.2),children:" Zoom In (120%)"}),n.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>De(Q.objectId,.8),children:" Zoom Out (80%)"}),n.jsx("hr",{className:"border-gray-700 my-1"}),n.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>be(Q.objectId),children:" Duplicate"}),n.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>Le(Q.objectId),children:" Copy"}),oe&&n.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>Ze(),children:" Paste"}),n.jsx("hr",{className:"border-gray-700 my-1"}),n.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-red-800 text-sm text-red-300 flex items-center gap-2",onClick:()=>he(Q.objectId),children:" Delete"})]}):oe&&n.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>Ze(),children:" Paste"})})]})}const Xu=[{id:"sleep",label:"Sleep",icon:"",color:"zone-sleep"},{id:"hygiene",label:"Hygiene",icon:"",color:"zone-hygiene"},{id:"food",label:"Food",icon:"",color:"zone-food"},{id:"exercise",label:"Exercise",icon:"",color:"zone-exercise"},{id:"medical",label:"Medical",icon:"",color:"zone-medical"},{id:"stowage",label:"Storage",icon:"",color:"zone-stowage"},{id:"work",label:"Work",icon:"",color:"zone-work"},{id:"common",label:"Common",icon:"",color:"zone-common"},{id:"airlock",label:"Airlock",icon:"",color:"zone-airlock"}],Ju=({enabled:e,onToggle:t,className:s})=>n.jsxs("div",{className:Fe("space-y-4",s),children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(me,{variant:e?"primary":"surface",size:"md",onClick:()=>t(!e),className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:e?"":""}),"Zoning Overlay"]}),e&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"Showing functional area zones and adjacency rules"})]}),e&&n.jsxs("div",{className:"glass p-4 rounded-lg animate-fade-in",children:[n.jsx("h4",{className:"text-sm font-medium text-text mb-3",children:"Functional Zones"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-2",children:Xu.map(r=>n.jsxs("div",{className:Fe("flex flex-col items-center gap-1 p-2 rounded-md text-xs",r.color),children:[n.jsx("div",{className:"text-base",children:r.icon}),n.jsx("span",{className:"text-center leading-tight",children:r.label})]},r.id))}),n.jsx("div",{className:"mt-4 pt-3 border-t border-muted text-xs text-muted-foreground",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-0 border-t-2 border-dashed border-success"}),n.jsx("span",{children:"Preferred Adjacent"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-0 border-t-2 border-dotted border-danger"}),n.jsx("span",{children:"Must Separate"})]})]})})]})]});function eh(){const[e,t]=Ft.useState(!1);return n.jsx("div",{className:"min-h-screen bg-bg text-text p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-text mb-2",children:" NASA-Tech Design System"}),n.jsx("p",{className:"text-muted-foreground",children:"Professional space habitat design components"})]}),n.jsx(gi,{})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Mission Metrics"}),n.jsx(ji,{nhv:245.8,pressurizedVolume:320.5,utilization:78.2,corridorStatus:"success"})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Functional Zoning"}),n.jsx(Ju,{enabled:e,onToggle:t})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Button Variants"}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsx(me,{variant:"primary",children:"Primary Action"}),n.jsx(me,{variant:"surface",children:"Surface Button"}),n.jsx(me,{variant:"ghost",children:"Ghost Button"}),n.jsx(me,{variant:"danger",children:"Danger Action"}),n.jsx(me,{variant:"outline",children:"Outline Button"}),n.jsx(me,{variant:"link",children:"Link Button"})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Status Badges"}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsx(qe,{variant:"neutral",children:"Neutral Status"}),n.jsx(qe,{variant:"success",children:" Success"}),n.jsx(qe,{variant:"warning",children:"! Warning"}),n.jsx(qe,{variant:"danger",children:" Danger"})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Glass Surfaces"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(st,{className:"glass",children:[n.jsx(mt,{children:n.jsx(ft,{className:"flex items-center gap-2",children:" Lunar Module"})}),n.jsxs(rt,{children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Habitat module designed for lunar surface operations with enhanced radiation shielding."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(qe,{variant:"success",children:"Active"}),n.jsx(qe,{variant:"neutral",children:"4 Crew"})]})]})]}),n.jsxs(st,{className:"glass",children:[n.jsx(mt,{children:n.jsx(ft,{className:"flex items-center gap-2",children:" Mars Module"})}),n.jsxs(rt,{children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Long-duration habitat for Mars surface missions with advanced life support systems."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(qe,{variant:"warning",children:"Standby"}),n.jsx(qe,{variant:"neutral",children:"6 Crew"})]})]})]}),n.jsxs(st,{className:"glass",children:[n.jsx(mt,{children:n.jsx(ft,{className:"flex items-center gap-2",children:" Deep Space"})}),n.jsxs(rt,{children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Multi-year transit habitat with rotating sections for artificial gravity generation."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(qe,{variant:"danger",children:"Offline"}),n.jsx(qe,{variant:"neutral",children:"8 Crew"})]})]})]})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Functional Zone Classes"}),n.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-4",children:[n.jsxs("div",{className:"zone-sleep p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Sleep"})]}),n.jsxs("div",{className:"zone-hygiene p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Hygiene"})]}),n.jsxs("div",{className:"zone-food p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Food"})]}),n.jsxs("div",{className:"zone-exercise p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Exercise"})]}),n.jsxs("div",{className:"zone-medical p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Medical"})]}),n.jsxs("div",{className:"zone-stowage p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Storage"})]}),n.jsxs("div",{className:"zone-work p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Work"})]}),n.jsxs("div",{className:"zone-common p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Common"})]}),n.jsxs("div",{className:"zone-airlock p-4 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl mb-2",children:""}),n.jsx("div",{className:"text-xs",children:"Airlock"})]})]})]})]})})}function th({scale:e=60,onChange:t}){const[s,r]=f.useState([]),[a,i]=f.useState([]),[o,c]=f.useState(null),l=(g,p)=>[Math.round(g/.1)*.1,Math.round(p/.1)*.1],d=(g,p)=>{const x=l(g,p);if(o!==null){const j=[...a];j[o]=[...j[o]||[],x],i(j),t?.({outer:s,holes:j})}else{const j=[...s,x];r(j),t?.({outer:j,holes:a})}},u=()=>{i([...a,[]]),c(a.length)},h=()=>c(null),m=f.useMemo(()=>`0 0 ${5*e} ${5*e}`,[e]);return n.jsxs("div",{className:"border rounded-md overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 p-2 text-xs",children:[n.jsx("button",{className:"px-2 py-1 border rounded",onClick:u,children:"New hole"}),n.jsx("button",{className:"px-2 py-1 border rounded",onClick:h,children:"End loop"}),n.jsx("span",{className:"opacity-60",children:"Click to add points. Grid 0.1 m."})]}),n.jsxs("svg",{viewBox:m,width:"100%",height:400,onClick:g=>{const x=g.target.closest("svg").getBoundingClientRect(),j=(g.clientX-x.left)/e,L=(g.clientY-x.top)/e;d(j,L)},children:[n.jsx("defs",{children:n.jsx("pattern",{id:"g",width:e*.5,height:e*.5,patternUnits:"userSpaceOnUse",children:n.jsx("path",{d:`M ${e*.5} 0 L 0 0 0 ${e*.5}`,stroke:"hsl(220 10% 20%)",strokeWidth:"1"})})}),n.jsx("rect",{x:0,y:0,width:5*e,height:5*e,fill:"url(#g)"}),s.length>=2&&n.jsx("polyline",{points:s.map(([g,p])=>`${g*e},${p*e}`).join(" "),fill:"none",stroke:"hsl(200 80% 60%)",strokeWidth:2,vectorEffect:"non-scaling-stroke"}),a.map((g,p)=>g.length>=2&&n.jsx("polyline",{points:g.map(([x,j])=>`${x*e},${j*e}`).join(" "),fill:"none",stroke:"hsl(350 80% 60%)",strokeWidth:2,vectorEffect:"non-scaling-stroke"},p)),[...s,...a.flat()].map((g,p)=>n.jsx("circle",{cx:g[0]*e,cy:g[1]*e,r:3,fill:"white",stroke:"black"},p))]})]})}let ys=null;const rn=new Map;function sh(){return ys||(ys=new Worker(new URL("/assets/cadWorker-73BXrTju.js",import.meta.url),{type:"module"}),ys.onmessage=e=>{const{id:t}=e.data||{},s=rn.get(t);s&&s(e.data)},ys)}async function Sa(e,t={}){const s=sh(),r=crypto.randomUUID(),a=new Promise(o=>rn.set(r,o));s.postMessage({id:r,...e});const i=await Promise.race([a,new Promise((o,c)=>setTimeout(()=>c(new Error("Worker timeout")),t.timeoutMs??6e3))]);if(rn.delete(r),!i?.ok)throw new Error(i?.error||"Kernel error");return i.result}function rh({onSaveModule:e}){const[t,s]=f.useState({outer:[]}),[r,a]=f.useState(2.2),[i,o]=f.useState(220),[c,l]=f.useState("CAD Shape"),[d,u]=f.useState(null),h=(t.outer?.length??0)>=3,m=async()=>{if(!h)return;const p=await Sa({type:"PAD_PREVIEW",profile:t,height:r,tess:{chord:.02,angle:30}});u(p),Sa({type:"TESSELLATE_REFINE",shape:p,tess:{chord:.003,angle:15}}).then(u).catch(()=>{})},g=()=>{if(!h)return;const p=t.outer.map(B=>B[0]),x=t.outer.map(B=>B[1]),j=Math.min(...p),L=Math.min(...x),K=Math.max(...p),D=Math.max(...x),V=K-j,ee=D-L,G=([B,te])=>[B-j,te-L],P=t.outer.map(G),C=(t.holes||[]).map(B=>B.map(G));e({id:`cad-${crypto.randomUUID()}`,type:"WORKSTATION",level:0,position:[j,L],size:{w_m:V,l_m:ee,h_m:r},rotation_deg:0,metadata:{visual:{shape2D:"POLYGON",polygon:P,holes:C,extrude_h_m:r,hue:i,label:c}}})};return n.jsxs("div",{className:"grid grid-cols-[320px_1fr_320px] gap-2 h-full",children:[n.jsxs("div",{className:"border rounded-md p-3 space-y-3",children:[n.jsx("h3",{className:"font-medium",children:"Tools"}),n.jsx("button",{className:"border rounded px-3 py-2 w-full",onClick:m,disabled:!h,children:"Preview Extrude"}),n.jsx("div",{className:"text-xs opacity-60",children:"Draw an outer loop (and holes). Grid 0.1 m."})]}),n.jsx("div",{className:"border rounded-md",children:n.jsx(th,{onChange:s})}),n.jsxs("div",{className:"border rounded-md p-3 space-y-3",children:[n.jsx("h3",{className:"font-medium",children:"Inspector"}),n.jsx("label",{className:"text-sm",children:"Height (m)"}),n.jsx("input",{type:"number",step:.1,value:r,onChange:p=>a(parseFloat(p.target.value)||0),className:"w-full border rounded px-2 py-1"}),n.jsx("label",{className:"text-sm",children:"Hue"}),n.jsx("input",{type:"range",min:0,max:360,value:i,onChange:p=>o(parseFloat(p.target.value)||0),className:"w-full"}),n.jsx("label",{className:"text-sm",children:"Label"}),n.jsx("input",{value:c,onChange:p=>l(p.target.value),className:"w-full border rounded px-2 py-1"}),n.jsx("button",{className:"border rounded px-3 py-2 w-full",onClick:g,disabled:!h,children:"Save to Layout"}),n.jsx("div",{className:"text-xs opacity-60",children:"Worker preview  refine. Saves to metadata.visual."})]})]})}const Vt=xc({component:Xd}),nh=Bt({getParentRoute:()=>Vt,path:"/",component:Ni}),ah=Bt({getParentRoute:()=>Vt,path:"/design",component:Ni}),ih=Bt({getParentRoute:()=>Vt,path:"/analysis",component:()=>n.jsx("div",{className:"flex items-center justify-center h-full bg-background text-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"NASA Mission Analysis"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Advanced habitat layout analysis and optimization tools"}),n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsx("p",{className:"text-card-foreground",children:"Coming Soon: Mission analysis features including:"}),n.jsxs("ul",{className:"text-left text-muted-foreground mt-4 space-y-1",children:[n.jsx("li",{children:" Volume utilization efficiency"}),n.jsx("li",{children:" Crew workflow optimization"}),n.jsx("li",{children:" Emergency egress path analysis"}),n.jsx("li",{children:" Resource allocation modeling"}),n.jsx("li",{children:" Life support system integration"})]})]})]})})}),oh=Bt({getParentRoute:()=>Vt,path:"/collections",component:()=>n.jsx("div",{className:"flex items-center justify-center h-full bg-background text-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Habitat Collections"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage saved habitat layouts and NASA mission templates"}),n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsx("p",{className:"text-card-foreground",children:"Coming Soon: Collection features including:"}),n.jsxs("ul",{className:"text-left text-muted-foreground mt-4 space-y-1",children:[n.jsx("li",{children:" Save and load habitat designs"}),n.jsx("li",{children:" NASA mission template library"}),n.jsx("li",{children:" Version history and comparison"}),n.jsx("li",{children:" Export to CAD formats"}),n.jsx("li",{children:" Team collaboration tools"})]})]})]})})}),ch=Bt({getParentRoute:()=>Vt,path:"/demo",component:eh}),lh=Bt({getParentRoute:()=>Vt,path:"/cad",component:()=>n.jsx("div",{className:"h-screen bg-background",children:n.jsx(rh,{onSaveModule:e=>{console.log("CAD module saved:",e)}})})}),dh=Vt.addChildren([nh,ah,ih,oh,ch,lh]),uh=Nc({routeTree:dh}),hh=new sl({defaultOptions:{queries:{staleTime:300*1e3,retry:1}}});function mh(){return n.jsx(nl,{client:hh,children:n.jsx(Pc,{router:uh})})}Wi.createRoot(document.getElementById("root")).render(n.jsx(Ft.StrictMode,{children:n.jsx(mh,{})}));
