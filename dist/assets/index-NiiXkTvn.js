import{j as r,r as m,R as Fe,w as ha,S as kr,C as Rt,P as On,W as Cr,a as Rr,A as Pr,D as Rs,G as Mr,b as ma,c as Er,M as Ee,B as de,T as zn,d as Ar,e as Ct,f as Je,g as Wt,h as $n,i as Vn,k as js,V as Pt,O as pa,l as je,m as Bn,n as fa,E as ga,L as xa,o as ya,p as Ns,q as ba,s as va,t as Zr,u as wa,v as Sa,x as ja,y as en,z as Na,F as _a,H as ka,I as Un,J as Ca}from"./three-vendor-56_hUknh.js";import{a as Ra}from"./react-vendor-D3F3s8fL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const Mt=new WeakMap,_s=new WeakMap,Ps={current:[]};let Xs=!1,Xt=0;const Ht=new Set,us=new Map;function Gn(e){const s=Array.from(e).sort((t,n)=>t instanceof Et&&t.options.deps.includes(n)?1:n instanceof Et&&n.options.deps.includes(t)?-1:0);for(const t of s){if(Ps.current.includes(t))continue;Ps.current.push(t),t.recompute();const n=_s.get(t);if(n)for(const o of n){const a=Mt.get(o);a&&Gn(a)}}}function Pa(e){const s={prevVal:e.prevState,currentVal:e.state};for(const t of e.listeners)t(s)}function Ma(e){const s={prevVal:e.prevState,currentVal:e.state};for(const t of e.listeners)t(s)}function Wn(e){if(Xt>0&&!us.has(e)&&us.set(e,e.prevState),Ht.add(e),!(Xt>0)&&!Xs)try{for(Xs=!0;Ht.size>0;){const s=Array.from(Ht);Ht.clear();for(const t of s){const n=us.get(t)??t.prevState;t.prevState=n,Pa(t)}for(const t of s){const n=Mt.get(t);n&&(Ps.current.push(t),Gn(n))}for(const t of s){const n=Mt.get(t);if(n)for(const o of n)Ma(o)}}}finally{Xs=!1,Ps.current=[],us.clear()}}function Jt(e){Xt++;try{e()}finally{if(Xt--,Xt===0){const s=Ht.values().next().value;s&&Wn(s)}}}function Ea(e){return typeof e=="function"}class ir{constructor(s,t){this.listeners=new Set,this.subscribe=n=>{var o,a;this.listeners.add(n);const i=(a=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:a.call(o,n,this);return()=>{this.listeners.delete(n),i?.()}},this.prevState=s,this.state=s,this.options=t}setState(s){var t,n,o;this.prevState=this.state,(t=this.options)!=null&&t.updateFn?this.state=this.options.updateFn(this.prevState)(s):Ea(s)?this.state=s(this.prevState):this.state=s,(o=(n=this.options)==null?void 0:n.onUpdate)==null||o.call(n),Wn(this)}}class Et{constructor(s){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const t=this.options.deps.length,n=new Array(t),o=new Array(t);for(let a=0;a<t;a++){const i=this.options.deps[a];n[a]=i.prevState,o[a]=i.state}return this.lastSeenDepValues=o,{prevDepVals:n,currDepVals:o,prevVal:this.prevState??void 0}},this.recompute=()=>{var t,n;this.prevState=this.state;const o=this.getDepVals();this.state=this.options.fn(o),(n=(t=this.options).onUpdate)==null||n.call(t)},this.checkIfRecalculationNeededDeeply=()=>{for(const a of this.options.deps)a instanceof Et&&a.checkIfRecalculationNeededDeeply();let t=!1;const n=this.lastSeenDepValues,{currDepVals:o}=this.getDepVals();for(let a=0;a<o.length;a++)if(o[a]!==n[a]){t=!0;break}t&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const t of this._subscriptions)t()}),this.subscribe=t=>{var n,o;this.listeners.add(t);const a=(o=(n=this.options).onSubscribe)==null?void 0:o.call(n,t,this);return()=>{this.listeners.delete(t),a?.()}},this.options=s,this.state=s.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(s=this.options.deps){for(const t of s)if(t instanceof Et)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof ir){let n=Mt.get(t);n||(n=new Set,Mt.set(t,n)),n.add(this);let o=_s.get(this);o||(o=new Set,_s.set(this,o)),o.add(t)}}unregisterFromGraph(s=this.options.deps){for(const t of s)if(t instanceof Et)this.unregisterFromGraph(t.options.deps);else if(t instanceof ir){const n=Mt.get(t);n&&n.delete(this);const o=_s.get(this);o&&o.delete(t)}}}const at="__TSR_index",tn="popstate",sn="beforeunload";function Aa(e){let s=e.getLocation();const t=new Set,n=i=>{s=e.getLocation(),t.forEach(c=>c({location:s,action:i}))},o=i=>{e.notifyOnIndexChange??!0?n(i):s=e.getLocation()},a=async({task:i,navigateOpts:c,...l})=>{if(c?.ignoreBlocker??!1){i();return}const u=e.getBlockers?.()??[],d=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&u.length&&d)for(const p of u){const g=Ms(l.path,l.state);if(await p.blockerFn({currentLocation:s,nextLocation:g,action:l.type})){e.onBlocked?.();return}}i()};return{get location(){return s},get length(){return e.getLength()},subscribers:t,subscribe:i=>(t.add(i),()=>{t.delete(i)}),push:(i,c,l)=>{const h=s.state[at];c=rn(h+1,c),a({task:()=>{e.pushState(i,c),n({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:i,state:c})},replace:(i,c,l)=>{const h=s.state[at];c=rn(h,c),a({task:()=>{e.replaceState(i,c),n({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:i,state:c})},go:(i,c)=>{a({task:()=>{e.go(i),o({type:"GO",index:i})},navigateOpts:c,type:"GO"})},back:i=>{a({task:()=>{e.back(i?.ignoreBlocker??!1),o({type:"BACK"})},navigateOpts:i,type:"BACK"})},forward:i=>{a({task:()=>{e.forward(i?.ignoreBlocker??!1),o({type:"FORWARD"})},navigateOpts:i,type:"FORWARD"})},canGoBack:()=>s.state[at]!==0,createHref:i=>e.createHref(i),block:i=>{if(!e.setBlockers)return()=>{};const c=e.getBlockers?.()??[];return e.setBlockers([...c,i]),()=>{const l=e.getBlockers?.()??[];e.setBlockers?.(l.filter(h=>h!==i))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:n}}function rn(e,s){s||(s={});const t=Tr();return{...s,key:t,__TSR_key:t,[at]:e}}function Ta(e){const s=typeof document<"u"?window:void 0,t=s.history.pushState,n=s.history.replaceState;let o=[];const a=()=>o,i=N=>o=N,c=(N=>N),l=(()=>Ms(`${s.location.pathname}${s.location.search}${s.location.hash}`,s.history.state));if(!s.history.state?.__TSR_key&&!s.history.state?.key){const N=Tr();s.history.replaceState({[at]:0,key:N,__TSR_key:N},"")}let h=l(),u,d=!1,p=!1,g=!1,f=!1;const x=()=>h;let y,P;const z=()=>{y&&(M._ignoreSubscribers=!0,(y.isPush?s.history.pushState:s.history.replaceState)(y.state,"",y.href),M._ignoreSubscribers=!1,y=void 0,P=void 0,u=void 0)},E=(N,B,X)=>{const b=c(B);P||(u=h),h=Ms(B,X),y={href:b,state:X,isPush:y?.isPush||N==="push"},P||(P=Promise.resolve().then(()=>z()))},I=N=>{h=l(),M.notify({type:N})},K=async()=>{if(p){p=!1;return}const N=l(),B=N.state[at]-h.state[at],X=B===1,b=B===-1,A=!X&&!b||d;d=!1;const U=A?"GO":b?"BACK":"FORWARD",_=A?{type:"GO",index:B}:{type:b?"BACK":"FORWARD"};if(g)g=!1;else{const L=a();if(typeof document<"u"&&L.length){for(const O of L)if(await O.blockerFn({currentLocation:h,nextLocation:N,action:U})){p=!0,s.history.go(1),M.notify(_);return}}}h=l(),M.notify(_)},V=N=>{if(f){f=!1;return}let B=!1;const X=a();if(typeof document<"u"&&X.length)for(const b of X){const A=b.enableBeforeUnload??!0;if(A===!0){B=!0;break}if(typeof A=="function"&&A()===!0){B=!0;break}}if(B)return N.preventDefault(),N.returnValue=""},M=Aa({getLocation:x,getLength:()=>s.history.length,pushState:(N,B)=>E("push",N,B),replaceState:(N,B)=>E("replace",N,B),back:N=>(N&&(g=!0),f=!0,s.history.back()),forward:N=>{N&&(g=!0),f=!0,s.history.forward()},go:N=>{d=!0,s.history.go(N)},createHref:N=>c(N),flush:z,destroy:()=>{s.history.pushState=t,s.history.replaceState=n,s.removeEventListener(sn,V,{capture:!0}),s.removeEventListener(tn,K)},onBlocked:()=>{u&&h!==u&&(h=u)},getBlockers:a,setBlockers:i,notifyOnIndexChange:!1});return s.addEventListener(sn,V,{capture:!0}),s.addEventListener(tn,K),s.history.pushState=function(...N){const B=t.apply(s.history,N);return M._ignoreSubscribers||I("PUSH"),B},s.history.replaceState=function(...N){const B=n.apply(s.history,N);return M._ignoreSubscribers||I("REPLACE"),B},M}function Ms(e,s){const t=e.indexOf("#"),n=e.indexOf("?"),o=Tr();return{href:e,pathname:e.substring(0,t>0?n>0?Math.min(t,n):t:n>0?n:e.length),hash:t>-1?e.substring(t):"",search:n>-1?e.slice(n,t===-1?void 0:t):"",state:s||{[at]:0,key:o,__TSR_key:o}}}function Tr(){return(Math.random()+1).toString(36).substring(7)}function cr(e){return e[e.length-1]}function La(e){return typeof e=="function"}function ft(e,s){return La(e)?e(s):e}const Ia=Object.prototype.hasOwnProperty;function $e(e,s){if(e===s)return e;const t=s,n=an(e)&&an(t);if(!n&&!(Es(e)&&Es(t)))return t;const o=n?e:nn(e);if(!o)return t;const a=n?t:nn(t);if(!a)return t;const i=o.length,c=a.length,l=n?new Array(c):{};let h=0;for(let u=0;u<c;u++){const d=n?u:a[u],p=e[d],g=t[d];if(p===g){l[d]=p,(n?u<i:Ia.call(e,d))&&h++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){l[d]=g;continue}const f=$e(p,g);l[d]=f,f===p&&h++}return i===c&&h===i?e:l}function nn(e){const s=[],t=Object.getOwnPropertyNames(e);for(const o of t){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;s.push(o)}const n=Object.getOwnPropertySymbols(e);for(const o of n){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;s.push(o)}return s}function Es(e){if(!on(e))return!1;const s=e.constructor;if(typeof s>"u")return!0;const t=s.prototype;return!(!on(t)||!t.hasOwnProperty("isPrototypeOf"))}function on(e){return Object.prototype.toString.call(e)==="[object Object]"}function an(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function gt(e,s,t){if(e===s)return!0;if(typeof e!=typeof s)return!1;if(Array.isArray(e)&&Array.isArray(s)){if(e.length!==s.length)return!1;for(let n=0,o=e.length;n<o;n++)if(!gt(e[n],s[n],t))return!1;return!0}if(Es(e)&&Es(s)){const n=t?.ignoreUndefined??!0;if(t?.partial){for(const i in s)if((!n||s[i]!==void 0)&&!gt(e[i],s[i],t))return!1;return!0}let o=0;if(!n)o=Object.keys(e).length;else for(const i in e)e[i]!==void 0&&o++;let a=0;for(const i in s)if((!n||s[i]!==void 0)&&(a++,a>o||!gt(e[i],s[i],t)))return!1;return o===a}return!1}function At(e){let s,t;const n=new Promise((o,a)=>{s=o,t=a});return n.status="pending",n.resolve=o=>{n.status="resolved",n.value=o,s(o),e?.(o)},n.reject=o=>{n.status="rejected",t(o)},n}function it(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}var Fa="Invariant failed";function tt(e,s){if(!e)throw new Error(Fa)}const Ke=0,vt=1,Tt=2,Lt=3;function Ze(e){return Lr(e.filter(s=>s!==void 0).join("/"))}function Lr(e){return e.replace(/\/{2,}/g,"/")}function Ir(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function ct(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function lr(e){return ct(Ir(e))}function As(e,s){return e?.endsWith("/")&&e!=="/"&&e!==`${s}/`?e.slice(0,-1):e}function Da(e,s,t){return As(e,t)===As(s,t)}function Oa(e){const{type:s,value:t}=e;if(s===Ke)return t;const{prefixSegment:n,suffixSegment:o}=e;if(s===vt){const a=t.substring(1);if(n&&o)return`${n}{$${a}}${o}`;if(n)return`${n}{$${a}}`;if(o)return`{$${a}}${o}`}if(s===Lt){const a=t.substring(1);return n&&o?`${n}{-$${a}}${o}`:n?`${n}{-$${a}}`:o?`{-$${a}}${o}`:`{-$${a}}`}if(s===Tt){if(n&&o)return`${n}{$}${o}`;if(n)return`${n}{$}`;if(o)return`{$}${o}`}return t}function za({base:e,to:s,trailingSlash:t="never",parseCache:n}){let o=Hn(e,n).slice();const a=Gs(s,n);o.length>1&&cr(o)?.value==="/"&&o.pop();for(let l=0,h=a.length;l<h;l++){const u=a[l],d=u.value;d==="/"?l?l===h-1&&o.push(u):o=[u]:d===".."?o.pop():d==="."||o.push(u)}o.length>1&&(cr(o).value==="/"?t==="never"&&o.pop():t==="always"&&o.push({type:Ke,value:"/"}));const i=o.map(Oa);return Ze(i)}const Hn=(e,s)=>Kn(e,s,!0),Gs=(e,s)=>Kn(e,s,!1),Kn=(e,s,t)=>{if(!e)return[];const n=s?.get(e);if(n)return n;const o=Wa(e,t);return s?.set(e,o),o},$a=/^\$.{1,}$/,Va=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,Ba=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,Ua=/^\$$/,Ga=/^(.*?)\{\$\}(.*)$/;function Wa(e,s){e=Lr(e);const t=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),t.push({type:Ke,value:"/"})),!e)return t;const n=e.split("/").filter(Boolean);return t.push(...n.map(o=>{const a=!s&&o.slice(-1)==="_"?o.slice(0,-1):o,i=a.match(Ga);if(i){const h=i[1],u=i[2];return{type:Tt,value:"$",prefixSegment:h||void 0,suffixSegment:u||void 0}}const c=a.match(Ba);if(c){const h=c[1],u=c[2],d=c[3];return{type:Lt,value:u,prefixSegment:h||void 0,suffixSegment:d||void 0}}const l=a.match(Va);if(l){const h=l[1],u=l[2],d=l[3];return{type:vt,value:""+u,prefixSegment:h||void 0,suffixSegment:d||void 0}}if($a.test(a)){const h=a.substring(1);return{type:vt,value:"$"+h,prefixSegment:void 0,suffixSegment:void 0}}return Ua.test(a)?{type:Tt,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:Ke,value:a.includes("%25")?a.split("%25").map(h=>decodeURI(h)).join("%25"):decodeURI(a)}})),e.slice(-1)==="/"&&(e=e.substring(1),t.push({type:Ke,value:"/"})),t}function hs({path:e,params:s,leaveWildcards:t,leaveParams:n,decodeCharMap:o,parseCache:a}){const i=Gs(e,a);function c(d){const p=s[d],g=typeof p=="string";return d==="*"||d==="_splat"?g?encodeURI(p):p:g?Ha(p,o):p}let l=!1;const h={},u=Ze(i.map(d=>{if(d.type===Ke)return d.value;if(d.type===Tt){h._splat=s._splat,h["*"]=s._splat;const p=d.prefixSegment||"",g=d.suffixSegment||"";if(!("_splat"in s))return l=!0,t?`${p}${d.value}${g}`:p||g?`${p}${g}`:void 0;const f=c("_splat");return t?`${p}${d.value}${f??""}${g}`:`${p}${f}${g}`}if(d.type===vt){const p=d.value.substring(1);!l&&!(p in s)&&(l=!0),h[p]=s[p];const g=d.prefixSegment||"",f=d.suffixSegment||"";if(n){const x=c(d.value);return`${g}${d.value}${x??""}${f}`}return`${g}${c(p)??"undefined"}${f}`}if(d.type===Lt){const p=d.value.substring(1),g=d.prefixSegment||"",f=d.suffixSegment||"";if(!(p in s)||s[p]==null)return t?`${g}${p}${f}`:g||f?`${g}${f}`:void 0;if(h[p]=s[p],n){const x=c(d.value);return`${g}${d.value}${x??""}${f}`}return t?`${g}${p}${c(p)??""}${f}`:`${g}${c(p)??""}${f}`}return d.value}));return{usedParams:h,interpolatedPath:u,isMissingParams:l}}function Ha(e,s){let t=encodeURIComponent(e);if(s)for(const[n,o]of s)t=t.replaceAll(n,o);return t}function dr(e,s,t){const n=Ka(e,s,t);if(!(s.to&&!n))return n??{}}function Ka(e,{to:s,fuzzy:t,caseSensitive:n},o){const a=s,i=Hn(e.startsWith("/")?e:`/${e}`,o),c=Gs(a.startsWith("/")?a:`/${a}`,o),l={};return qa(i,c,l,t,n)?l:void 0}function qa(e,s,t,n,o){let a=0,i=0;for(;a<e.length||i<s.length;){const c=e[a],l=s[i];if(l){if(l.type===Tt){const h=e.slice(a);let u;if(l.prefixSegment||l.suffixSegment){if(!c)return!1;const d=l.prefixSegment||"",p=l.suffixSegment||"",g=c.value;if("prefixSegment"in l&&!g.startsWith(d)||"suffixSegment"in l&&!e[e.length-1]?.value.endsWith(p))return!1;let f=decodeURI(Ze(h.map(x=>x.value)));d&&f.startsWith(d)&&(f=f.slice(d.length)),p&&f.endsWith(p)&&(f=f.slice(0,f.length-p.length)),u=f}else u=decodeURI(Ze(h.map(d=>d.value)));return t["*"]=u,t._splat=u,!0}if(l.type===Ke){if(l.value==="/"&&!c?.value){i++;continue}if(c){if(o){if(l.value!==c.value)return!1}else if(l.value.toLowerCase()!==c.value.toLowerCase())return!1;a++,i++;continue}else return!1}if(l.type===vt){if(!c||c.value==="/")return!1;let h="",u=!1;if(l.prefixSegment||l.suffixSegment){const d=l.prefixSegment||"",p=l.suffixSegment||"",g=c.value;if(d&&!g.startsWith(d)||p&&!g.endsWith(p))return!1;let f=g;d&&f.startsWith(d)&&(f=f.slice(d.length)),p&&f.endsWith(p)&&(f=f.slice(0,f.length-p.length)),h=decodeURIComponent(f),u=!0}else h=decodeURIComponent(c.value),u=!0;u&&(t[l.value.substring(1)]=h,a++),i++;continue}if(l.type===Lt){if(!c){i++;continue}if(c.value==="/"){i++;continue}let h="",u=!1;if(l.prefixSegment||l.suffixSegment){const d=l.prefixSegment||"",p=l.suffixSegment||"",g=c.value;if((!d||g.startsWith(d))&&(!p||g.endsWith(p))){let f=g;d&&f.startsWith(d)&&(f=f.slice(d.length)),p&&f.endsWith(p)&&(f=f.slice(0,f.length-p.length)),h=decodeURIComponent(f),u=!0}}else{let d=!0;for(let p=i+1;p<s.length;p++){const g=s[p];if(g?.type===Ke&&g.value===c.value){d=!1;break}if(g?.type===vt||g?.type===Tt){e.length<s.length&&(d=!1);break}}d&&(h=decodeURIComponent(c.value),u=!0)}u&&(t[l.value.substring(1)]=h,a++),i++;continue}}if(a<e.length&&i>=s.length)return t["**"]=Ze(e.slice(a).map(h=>h.value)),!!n&&s[s.length-1]?.value!=="/";if(i<s.length&&a>=e.length){for(let h=i;h<s.length;h++)if(s[h]?.type!==Lt)return!1;break}break}return!0}const Ya=.75,Qa=1,Xa=.5,Ja=.4,Za=.25,ei=.2,ti=.05,si=.02,ri=.01,cn=2e-4,ln=1e-4;function dn(e,s){return e.prefixSegment&&e.suffixSegment?s+ti+cn*e.prefixSegment.length+ln*e.suffixSegment.length:e.prefixSegment?s+si+cn*e.prefixSegment.length:e.suffixSegment?s+ri+ln*e.suffixSegment.length:s}function ni(e){const s=[];return e.forEach((n,o)=>{if(n.isRoot||!n.path)return;const a=Ir(n.fullPath);let i=Gs(a),c=0;for(;i.length>c+1&&i[c]?.value==="/";)c++;c>0&&(i=i.slice(c));let l=0,h=!1;const u=i.map((d,p)=>{if(d.value==="/")return Ya;if(d.type===Ke)return Qa;let g;d.type===vt?g=Xa:d.type===Lt?(g=Ja,l++):g=Za;for(let f=p+1;f<i.length;f++){const x=i[f];if(x.type===Ke&&x.value!=="/")return h=!0,dn(d,g+ei)}return dn(d,g)});s.push({child:n,trimmed:a,parsed:i,index:o,scores:u,optionalParamCount:l,hasStaticAfter:h})}),s.sort((n,o)=>{const a=Math.min(n.scores.length,o.scores.length);for(let i=0;i<a;i++)if(n.scores[i]!==o.scores[i])return o.scores[i]-n.scores[i];if(n.scores.length!==o.scores.length){if(n.optionalParamCount!==o.optionalParamCount){if(n.hasStaticAfter===o.hasStaticAfter)return n.optionalParamCount-o.optionalParamCount;if(n.hasStaticAfter&&!o.hasStaticAfter)return-1;if(!n.hasStaticAfter&&o.hasStaticAfter)return 1}return o.scores.length-n.scores.length}for(let i=0;i<a;i++)if(n.parsed[i].value!==o.parsed[i].value)return n.parsed[i].value>o.parsed[i].value?1:-1;return n.index-o.index}).map((n,o)=>(n.child.rank=o,n.child))}function oi({routeTree:e,initRoute:s}){const t={},n={},o=i=>{i.forEach((c,l)=>{s?.(c,l);const h=t[c.id];if(tt(!h,`Duplicate routes found with id: ${String(c.id)}`),t[c.id]=c,!c.isRoot&&c.path){const d=ct(c.fullPath);(!n[d]||c.fullPath.endsWith("/"))&&(n[d]=c)}const u=c.children;u?.length&&o(u)})};o([e]);const a=ni(Object.values(t));return{routesById:t,routesByPath:n,flatRoutes:a}}function qe(e){return!!e?.isNotFound}function ai(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Ts="tsr-scroll-restoration-v1_3",ii=(e,s)=>{let t;return(...n)=>{t||(t=setTimeout(()=>{e(...n),t=null},s))}};function ci(){const e=ai();if(!e)return null;const s=e.getItem(Ts);let t=s?JSON.parse(s):{};return{state:t,set:n=>(t=ft(n,t)||t,e.setItem(Ts,JSON.stringify(t)))}}const ms=ci(),ur=e=>e.state.__TSR_key||e.href;function li(e){const s=[];let t;for(;t=e.parentNode;)s.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(t.children,e)+1})`),e=t;return`${s.reverse().join(" > ")}`.toLowerCase()}let Ls=!1;function qn({storageKey:e,key:s,behavior:t,shouldScrollRestoration:n,scrollToTopSelectors:o,location:a}){let i;try{i=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(h){console.error(h);return}const c=s||window.history.state?.__TSR_key,l=i[c];Ls=!0;e:{if(n&&l&&Object.keys(l).length>0){for(const d in l){const p=l[d];if(d==="window")window.scrollTo({top:p.scrollY,left:p.scrollX,behavior:t});else if(d){const g=document.querySelector(d);g&&(g.scrollLeft=p.scrollX,g.scrollTop=p.scrollY)}}break e}const h=(a??window.location).hash.split("#",2)[1];if(h){const d=window.history.state?.__hashScrollIntoViewOptions??!0;if(d){const p=document.getElementById(h);p&&p.scrollIntoView(d)}break e}const u={top:0,left:0,behavior:t};if(window.scrollTo(u),o)for(const d of o){if(d==="window")continue;const p=typeof d=="function"?d():document.querySelector(d);p&&p.scrollTo(u)}}Ls=!1}function di(e,s){if(!ms&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!ms))return;e.isScrollRestorationSetup=!0,Ls=!1;const n=e.options.getScrollRestorationKey||ur;window.history.scrollRestoration="manual";const o=a=>{if(Ls||!e.isScrollRestoring)return;let i="";if(a.target===document||a.target===window)i="window";else{const l=a.target.getAttribute("data-scroll-restoration-id");l?i=`[data-scroll-restoration-id="${l}"]`:i=li(a.target)}const c=n(e.state.location);ms.set(l=>{const h=l[c]||={},u=h[i]||={};if(i==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(i){const d=document.querySelector(i);d&&(u.scrollX=d.scrollLeft||0,u.scrollY=d.scrollTop||0)}return l})};typeof document<"u"&&document.addEventListener("scroll",ii(o,100),!0),e.subscribe("onRendered",a=>{const i=n(a.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(qn({storageKey:Ts,key:i,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&ms.set(c=>(c[i]||={},c)))})}function ui(e){if(typeof document<"u"&&document.querySelector){const s=e.state.location.state.__hashScrollIntoViewOptions??!0;if(s&&e.state.location.hash!==""){const t=document.getElementById(e.state.location.hash);t&&t.scrollIntoView(s)}}}function hi(e,s=String){const t=new URLSearchParams;for(const n in e){const o=e[n];o!==void 0&&t.set(n,s(o))}return t.toString()}function Js(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function mi(e){const s=new URLSearchParams(e),t={};for(const[n,o]of s.entries()){const a=t[n];a==null?t[n]=Js(o):Array.isArray(a)?a.push(Js(o)):t[n]=[a,Js(o)]}return t}const pi=gi(JSON.parse),fi=xi(JSON.stringify,JSON.parse);function gi(e){return s=>{s[0]==="?"&&(s=s.substring(1));const t=mi(s);for(const n in t){const o=t[n];if(typeof o=="string")try{t[n]=e(o)}catch{}}return t}}function xi(e,s){const t=typeof s=="function";function n(o){if(typeof o=="object"&&o!==null)try{return e(o)}catch{}else if(t&&typeof o=="string")try{return s(o),e(o)}catch{}return o}return o=>{const a=hi(o,n);return a?`?${a}`:""}}const Ve="__root__";function yi(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const s=new Headers(e.headers);e.href&&s.get("Location")===null&&s.set("Location",e.href);const t=new Response(null,{status:e.statusCode,headers:s});if(t.options=e,e.throw)throw t;return t}function He(e){return e instanceof Response&&!!e.options}function bi(e){const s=new Map;let t,n;const o=a=>{a.next&&(a.prev?(a.prev.next=a.next,a.next.prev=a.prev,a.next=void 0,n&&(n.next=a,a.prev=n)):(a.next.prev=void 0,t=a.next,a.next=void 0,n&&(a.prev=n,n.next=a)),n=a)};return{get(a){const i=s.get(a);if(i)return o(i),i.value},set(a,i){if(s.size>=e&&t){const l=t;s.delete(l.key),l.next&&(t=l.next,l.next.prev=void 0),l===n&&(n=void 0)}const c=s.get(a);if(c)c.value=i,o(c);else{const l={key:a,value:i,prev:n};n&&(n.next=l),n=l,t||(t=l),s.set(a,l)}}}}const ks=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},Ws=(e,s)=>!!(e.preload&&!e.router.state.matches.some(t=>t.id===s)),Yn=(e,s)=>{const t=e.router.routesById[s.routeId??""]??e.router.routeTree;!t.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(t.options.notFoundComponent=e.router.options.defaultNotFoundComponent),tt(t.options.notFoundComponent);const n=e.matches.find(o=>o.routeId===t.id);tt(n,"Could not find match for route: "+t.id),e.updateMatch(n.id,o=>({...o,status:"notFound",error:s,isFetching:!1})),s.routerCode==="BEFORE_LOAD"&&t.parentRoute&&(s.routeId=t.parentRoute.id,Yn(e,s))},ot=(e,s,t)=>{if(!(!He(t)&&!qe(t))){if(He(t)&&t.redirectHandled&&!t.options.reloadDocument)throw t;if(s){s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.loaderPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,s._nonReactive.loaderPromise=void 0;const n=He(t)?"redirected":"notFound";e.updateMatch(s.id,o=>({...o,status:n,isFetching:!1,error:t})),qe(t)&&!t.routeId&&(t.routeId=s.routeId),s._nonReactive.loadPromise?.resolve()}throw He(t)?(e.rendered=!0,t.options._fromLocation=e.location,t.redirectHandled=!0,t=e.router.resolveRedirect(t),t):(Yn(e,t),t)}},Qn=(e,s)=>{const t=e.router.getMatch(s);return!!(!e.router.isServer&&t._nonReactive.dehydrated||e.router.isServer&&t.ssr===!1)},Ot=(e,s,t,n)=>{const{id:o,routeId:a}=e.matches[s],i=e.router.looseRoutesById[a];if(t instanceof Promise)throw t;t.routerCode=n,e.firstBadMatchIndex??=s,ot(e,e.router.getMatch(o),t);try{i.options.onError?.(t)}catch(c){t=c,ot(e,e.router.getMatch(o),t)}e.updateMatch(o,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:t,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},vi=(e,s,t,n)=>{const o=e.router.getMatch(s),a=e.matches[t-1]?.id,i=a?e.router.getMatch(a):void 0;if(e.router.isShell()){o.ssr=s===Ve;return}if(i?.ssr===!1){o.ssr=!1;return}const c=g=>g===!0&&i?.ssr==="data-only"?"data-only":g,l=e.router.options.defaultSsr??!0;if(n.options.ssr===void 0){o.ssr=c(l);return}if(typeof n.options.ssr!="function"){o.ssr=c(n.options.ssr);return}const{search:h,params:u}=o,d={search:ps(h,o.searchError),params:ps(u,o.paramsError),location:e.location,matches:e.matches.map(g=>({index:g.index,pathname:g.pathname,fullPath:g.fullPath,staticData:g.staticData,id:g.id,routeId:g.routeId,search:ps(g.search,g.searchError),params:ps(g.params,g.paramsError),ssr:g.ssr}))},p=n.options.ssr(d);if(it(p))return p.then(g=>{o.ssr=c(g??l)});o.ssr=c(p??l)},Xn=(e,s,t,n)=>{if(n._nonReactive.pendingTimeout!==void 0)return;const o=t.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!Ws(e,s)&&(t.options.loader||t.options.beforeLoad||eo(t))&&typeof o=="number"&&o!==1/0&&(t.options.pendingComponent??e.router.options?.defaultPendingComponent))){const i=setTimeout(()=>{ks(e)},o);n._nonReactive.pendingTimeout=i}},wi=(e,s,t)=>{const n=e.router.getMatch(s);if(!n._nonReactive.beforeLoadPromise&&!n._nonReactive.loaderPromise)return;Xn(e,s,t,n);const o=()=>{const a=e.router.getMatch(s);a.preload&&(a.status==="redirected"||a.status==="notFound")&&ot(e,a,a.error)};return n._nonReactive.beforeLoadPromise?n._nonReactive.beforeLoadPromise.then(o):o()},Si=(e,s,t,n)=>{const o=e.router.getMatch(s),a=o._nonReactive.loadPromise;o._nonReactive.loadPromise=At(()=>{a?.resolve()});const{paramsError:i,searchError:c}=o;i&&Ot(e,t,i,"PARSE_PARAMS"),c&&Ot(e,t,c,"VALIDATE_SEARCH"),Xn(e,s,n,o);const l=new AbortController,h=e.matches[t-1]?.id,p={...(h?e.router.getMatch(h):void 0)?.context??e.router.options.context??void 0,...o.__routeContext};let g=!1;const f=()=>{g||(g=!0,e.updateMatch(s,M=>({...M,isFetching:"beforeLoad",fetchCount:M.fetchCount+1,abortController:l,context:p})))},x=()=>{o._nonReactive.beforeLoadPromise?.resolve(),o._nonReactive.beforeLoadPromise=void 0,e.updateMatch(s,M=>({...M,isFetching:!1}))};if(!n.options.beforeLoad){Jt(()=>{f(),x()});return}o._nonReactive.beforeLoadPromise=At();const{search:y,params:P,cause:z}=o,E=Ws(e,s),I={search:y,abortController:l,params:P,preload:E,context:p,location:e.location,navigate:M=>e.router.navigate({...M,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:E?"preload":z,matches:e.matches,...e.router.options.additionalContext},K=M=>{if(M===void 0){Jt(()=>{f(),x()});return}(He(M)||qe(M))&&(f(),Ot(e,t,M,"BEFORE_LOAD")),Jt(()=>{f(),e.updateMatch(s,N=>({...N,__beforeLoadContext:M,context:{...N.context,...M}})),x()})};let V;try{if(V=n.options.beforeLoad(I),it(V))return f(),V.catch(M=>{Ot(e,t,M,"BEFORE_LOAD")}).then(K)}catch(M){f(),Ot(e,t,M,"BEFORE_LOAD")}K(V)},ji=(e,s)=>{const{id:t,routeId:n}=e.matches[s],o=e.router.looseRoutesById[n],a=()=>{if(e.router.isServer){const l=vi(e,t,s,o);if(it(l))return l.then(c)}return c()},i=()=>Si(e,t,s,o),c=()=>{if(Qn(e,t))return;const l=wi(e,t,o);return it(l)?l.then(i):i()};return a()},Zt=(e,s,t)=>{const n=e.router.getMatch(s);if(!n||!t.options.head&&!t.options.scripts&&!t.options.headers)return;const o={matches:e.matches,match:n,params:n.params,loaderData:n.loaderData};return Promise.all([t.options.head?.(o),t.options.scripts?.(o),t.options.headers?.(o)]).then(([a,i,c])=>{const l=a?.meta,h=a?.links,u=a?.scripts,d=a?.styles;return{meta:l,links:h,headScripts:u,headers:c,scripts:i,styles:d}})},Jn=(e,s,t,n)=>{const o=e.matchPromises[t-1],{params:a,loaderDeps:i,abortController:c,context:l,cause:h}=e.router.getMatch(s),u=Ws(e,s);return{params:a,deps:i,preload:!!u,parentMatchPromise:o,abortController:c,context:l,location:e.location,navigate:d=>e.router.navigate({...d,_fromLocation:e.location}),cause:u?"preload":h,route:n,...e.router.options.additionalContext}},un=async(e,s,t,n)=>{try{const o=e.router.getMatch(s);try{(!e.router.isServer||o.ssr===!0)&&Zn(n);const a=n.options.loader?.(Jn(e,s,t,n)),i=n.options.loader&&it(a);if(!!(i||n._lazyPromise||n._componentsPromise||n.options.head||n.options.scripts||n.options.headers||o._nonReactive.minPendingPromise)&&e.updateMatch(s,d=>({...d,isFetching:"loader"})),n.options.loader){const d=i?await a:a;ot(e,e.router.getMatch(s),d),d!==void 0&&e.updateMatch(s,p=>({...p,loaderData:d}))}n._lazyPromise&&await n._lazyPromise;const l=Zt(e,s,n),h=l?await l:void 0,u=o._nonReactive.minPendingPromise;u&&await u,n._componentsPromise&&await n._componentsPromise,e.updateMatch(s,d=>({...d,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...h}))}catch(a){let i=a;const c=o._nonReactive.minPendingPromise;c&&await c,ot(e,e.router.getMatch(s),a);try{n.options.onError?.(a)}catch(u){i=u,ot(e,e.router.getMatch(s),u)}const l=Zt(e,s,n),h=l?await l:void 0;e.updateMatch(s,u=>({...u,error:i,status:"error",isFetching:!1,...h}))}}catch(o){const a=e.router.getMatch(s);if(a){const i=Zt(e,s,n);if(i){const c=await i;e.updateMatch(s,l=>({...l,...c}))}a._nonReactive.loaderPromise=void 0}ot(e,a,o)}},Ni=async(e,s)=>{const{id:t,routeId:n}=e.matches[s];let o=!1,a=!1;const i=e.router.looseRoutesById[n];if(Qn(e,t)){if(e.router.isServer){const h=Zt(e,t,i);if(h){const u=await h;e.updateMatch(t,d=>({...d,...u}))}return e.router.getMatch(t)}}else{const h=e.router.getMatch(t);if(h._nonReactive.loaderPromise){if(h.status==="success"&&!e.sync&&!h.preload)return h;await h._nonReactive.loaderPromise;const u=e.router.getMatch(t);u.error&&ot(e,u,u.error)}else{const u=Date.now()-h.updatedAt,d=Ws(e,t),p=d?i.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:i.options.staleTime??e.router.options.defaultStaleTime??0,g=i.options.shouldReload,f=typeof g=="function"?g(Jn(e,t,s,i)):g,x=!!d&&!e.router.state.matches.some(E=>E.id===t),y=e.router.getMatch(t);y._nonReactive.loaderPromise=At(),x!==y.preload&&e.updateMatch(t,E=>({...E,preload:x}));const{status:P,invalid:z}=y;if(o=P==="success"&&(z||(f??u>p)),!(d&&i.options.preload===!1))if(o&&!e.sync)a=!0,(async()=>{try{await un(e,t,s,i);const E=e.router.getMatch(t);E._nonReactive.loaderPromise?.resolve(),E._nonReactive.loadPromise?.resolve(),E._nonReactive.loaderPromise=void 0}catch(E){He(E)&&await e.router.navigate(E.options)}})();else if(P!=="success"||o&&e.sync)await un(e,t,s,i);else{const E=Zt(e,t,i);if(E){const I=await E;e.updateMatch(t,K=>({...K,...I}))}}}}const c=e.router.getMatch(t);a||(c._nonReactive.loaderPromise?.resolve(),c._nonReactive.loadPromise?.resolve()),clearTimeout(c._nonReactive.pendingTimeout),c._nonReactive.pendingTimeout=void 0,a||(c._nonReactive.loaderPromise=void 0),c._nonReactive.dehydrated=void 0;const l=a?c.isFetching:!1;return l!==c.isFetching||c.invalid!==!1?(e.updateMatch(t,h=>({...h,isFetching:l,invalid:!1})),e.router.getMatch(t)):c};async function hn(e){const s=Object.assign(e,{matchPromises:[]});!s.router.isServer&&s.router.state.matches.some(t=>t._forcePending)&&ks(s);try{for(let o=0;o<s.matches.length;o++){const a=ji(s,o);it(a)&&await a}const t=s.firstBadMatchIndex??s.matches.length;for(let o=0;o<t;o++)s.matchPromises.push(Ni(s,o));await Promise.all(s.matchPromises);const n=ks(s);it(n)&&await n}catch(t){if(qe(t)&&!s.preload){const n=ks(s);throw it(n)&&await n,t}if(He(t))throw t}return s.matches}async function Zn(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(s=>{const{id:t,...n}=s.options;Object.assign(e.options,n),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const s=()=>{const t=[];for(const n of to){const o=e.options[n]?.preload;o&&t.push(o())}if(t.length)return Promise.all(t).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(s):s()}return e._componentsPromise}function ps(e,s){return s?{status:"error",error:s}:{status:"success",value:e}}function eo(e){for(const s of to)if(e.options[s]?.preload)return!0;return!1}const to=["component","errorComponent","pendingComponent","notFoundComponent"];function _i(e){return{input:({url:s})=>{for(const t of e)s=so(t,s);return s},output:({url:s})=>{for(let t=e.length-1;t>=0;t--)s=ro(e[t],s);return s}}}function ki(e){const s=lr(e.basepath),t=new RegExp(`^/${s}/`,e.caseSensitive?"":"i");return{input:({url:n})=>(n.pathname=n.pathname.replace(t,"/"),n),output:({url:n})=>(n.pathname=Ze(["/",s,n.pathname]),n)}}function so(e,s){const t=e?.input?.({url:s});if(t){if(typeof t=="string")return new URL(t);if(t instanceof URL)return t}return s}function ro(e,s){const t=e?.output?.({url:s});if(t){if(typeof t=="string")return new URL(t);if(t instanceof URL)return t}return s}function xt(e){const s=e.resolvedLocation,t=e.location,n=s?.pathname!==t.pathname,o=s?.href!==t.href,a=s?.hash!==t.hash;return{fromLocation:s,toLocation:t,pathChanged:n,hrefChanged:o,hashChanged:a}}class Ci{constructor(s){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=t=>t(),this.update=t=>{if(t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info."),this.options={...this.options,...t},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(n=>[encodeURIComponent(n),n])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=Ta())),this.options.basepath){const n=ki({basepath:this.options.basepath});this.options.rewrite?this.rewrite=_i([n,this.options.rewrite]):this.rewrite=n}else this.rewrite=this.options.rewrite;this.origin=this.options.origin,this.origin||(this.isServer?this.origin="http://localhost":this.origin=window.origin),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new ir(Pi(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(n=>!["redirected"].includes(n.status))}}}),di(this)),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:t,routesByPath:n,flatRoutes:o}=oi({routeTree:this.routeTree,initRoute:(i,c)=>{i.init({originalIndex:c})}});this.routesById=t,this.routesByPath=n,this.flatRoutes=o;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(t,n)=>{const o={eventType:t,fn:n};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=t=>{this.subscribers.forEach(n=>{n.eventType===t.type&&n.fn(t)})},this.parseLocation=(t,n)=>{const o=({href:l,state:h})=>{const u=new URL(l,this.origin),d=so(this.rewrite,u),p=this.options.parseSearch(d.search),g=this.options.stringifySearch(p);d.search=g;const f=d.href.replace(d.origin,""),{pathname:x,hash:y}=d;return{href:f,publicHref:l,url:d.href,pathname:x,searchStr:g,search:$e(n?.search,p),hash:y.split("#").reverse()[0]??"",state:$e(n?.state,h)}},a=o(t),{__tempLocation:i,__tempKey:c}=a.state;if(i&&(!c||c===this.tempLocationKey)){const l=o(i);return l.state.key=a.state.key,l.state.__TSR_key=a.state.__TSR_key,delete l.state.__tempLocation,{...l,maskedLocation:a}}return a},this.resolvePathWithBase=(t,n)=>za({base:t,to:Lr(n),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(t,n,o)=>typeof t=="string"?this.matchRoutesInternal({pathname:t,search:n},o):this.matchRoutesInternal(t,n),this.parsePathnameCache=bi(1e3),this.getMatchedRoutes=(t,n)=>Mi({pathname:t,routePathname:n,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=t=>{const n=this.getMatch(t);n&&(n.abortController.abort(),clearTimeout(n._nonReactive.pendingTimeout),n._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{this.state.pendingMatches?.forEach(t=>{this.cancelMatch(t.id)})},this.buildLocation=t=>{const n=(a={})=>{const i=a._fromLocation||this.latestLocation,c=this.matchRoutes(i,{_buildLocation:!0}),l=cr(c);a.from;const h=a.unsafeRelative==="path"?i.pathname:a.from??l.fullPath,u=this.resolvePathWithBase(h,"."),d=l.search,p={...l.params},g=a.to?this.resolvePathWithBase(u,`${a.to}`):this.resolvePathWithBase(u,"."),f=a.params===!1||a.params===null?{}:(a.params??!0)===!0?p:Object.assign(p,ft(a.params,p)),x=hs({path:g,params:f,parseCache:this.parsePathnameCache}).interpolatedPath,y=this.matchRoutes(x,void 0,{_buildLocation:!0}).map(X=>this.looseRoutesById[X.routeId]);if(Object.keys(f).length>0)for(const X of y){const b=X.options.params?.stringify??X.options.stringifyParams;b&&Object.assign(f,b(f))}const P=hs({path:g,params:f,leaveWildcards:!1,leaveParams:t.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let z=d;if(t._includeValidateSearch&&this.options.search?.strict){const X={};y.forEach(b=>{if(b.options.validateSearch)try{Object.assign(X,hr(b.options.validateSearch,{...X,...z}))}catch{}}),z=X}z=Ei({search:z,dest:a,destRoutes:y,_includeValidateSearch:t._includeValidateSearch}),z=$e(d,z);const E=this.options.stringifySearch(z),I=a.hash===!0?i.hash:a.hash?ft(a.hash,i.hash):void 0,K=I?`#${I}`:"";let V=a.state===!0?i.state:a.state?ft(a.state,i.state):{};V=$e(i.state,V);const M=`${P}${E}${K}`,N=new URL(M,this.origin),B=ro(this.rewrite,N);return{publicHref:B.pathname+B.search+B.hash,href:M,url:B.href,pathname:P,search:z,searchStr:E,state:V,hash:I??"",unmaskOnReload:a.unmaskOnReload}},o=(a={},i)=>{const c=n(a);let l=i?n(i):void 0;if(!l){let h={};const u=this.options.routeMasks?.find(d=>{const p=dr(c.pathname,{to:d.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return p?(h=p,!0):!1});if(u){const{from:d,...p}=u;i={from:t.from,...p,params:h},l=n(i)}}return l&&(c.maskedLocation=l),c};return t.mask?o(t,{from:t.from,...t.mask}):o(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:n,...o})=>{const a=()=>{const l=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];l.forEach(u=>{o.state[u]=this.latestLocation.state[u]});const h=gt(o.state,this.latestLocation.state);return l.forEach(u=>{delete o.state[u]}),h},i=ct(this.latestLocation.href)===ct(o.href),c=this.commitLocationPromise;if(this.commitLocationPromise=At(()=>{c?.resolve()}),i&&a())this.load();else{let{maskedLocation:l,hashScrollIntoView:h,...u}=o;l&&(u={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=t,this.history[o.replace?"replace":"push"](u.publicHref,u.state,{ignoreBlocker:n})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:n,hashScrollIntoView:o,viewTransition:a,ignoreBlocker:i,href:c,...l}={})=>{if(c){const u=this.history.location.state.__TSR_index,d=Ms(c,{__TSR_index:t?u:u+1});l.to=d.pathname,l.search=this.options.parseSearch(d.search),l.hash=d.hash.slice(1)}const h=this.buildLocation({...l,_includeValidateSearch:!0});return this.commitLocation({...h,viewTransition:a,replace:t,resetScroll:n,hashScrollIntoView:o,ignoreBlocker:i})},this.navigate=({to:t,reloadDocument:n,href:o,...a})=>{if(!n&&o)try{new URL(`${o}`),n=!0}catch{}return n?(o||(o=this.buildLocation({to:t,...a}).href),a.replace?window.location.replace(o):window.location.href=o,Promise.resolve()):this.buildAndCommitLocation({...a,href:o,to:t,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const n=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),o=a=>{try{return encodeURI(decodeURI(a))}catch{return a}};if(lr(o(this.latestLocation.href))!==lr(o(n.href)))throw yi({href:n.href})}const t=this.matchRoutes(this.latestLocation);this.__store.setState(n=>({...n,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:t,cachedMatches:n.cachedMatches.filter(o=>!t.some(a=>a.id===o.id))}))},this.load=async t=>{let n,o,a;for(a=new Promise(i=>{this.startTransition(async()=>{try{this.beforeLoad();const c=this.latestLocation,l=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...xt({resolvedLocation:l,location:c})}),this.emit({type:"onBeforeLoad",...xt({resolvedLocation:l,location:c})}),await hn({router:this,sync:t?.sync,matches:this.state.pendingMatches,location:c,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let h,u,d;Jt(()=>{this.__store.setState(p=>{const g=p.matches,f=p.pendingMatches||p.matches;return h=g.filter(x=>!f.some(y=>y.id===x.id)),u=f.filter(x=>!g.some(y=>y.id===x.id)),d=g.filter(x=>f.some(y=>y.id===x.id)),{...p,isLoading:!1,loadedAt:Date.now(),matches:f,pendingMatches:void 0,cachedMatches:[...p.cachedMatches,...h.filter(x=>x.status!=="error")]}}),this.clearExpiredCache()}),[[h,"onLeave"],[u,"onEnter"],[d,"onStay"]].forEach(([p,g])=>{p.forEach(f=>{this.looseRoutesById[f.routeId].options[g]?.(f)})})})}})}catch(c){He(c)?(n=c,this.isServer||this.navigate({...n.options,replace:!0,ignoreBlocker:!0})):qe(c)&&(o=c),this.__store.setState(l=>({...l,statusCode:n?n.status:o?404:l.matches.some(h=>h.status==="error")?500:200,redirect:n}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),i()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(i=>({...i,statusCode:404}))},this.startViewTransition=t=>{const n=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,n&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;if(typeof n=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,i=this.state.resolvedLocation,c=typeof n.types=="function"?n.types(xt({resolvedLocation:i,location:a})):n.types;o={update:t,types:c}}else o=t;document.startViewTransition(o)}else t()},this.updateMatch=(t,n)=>{const o=this.state.pendingMatches?.some(a=>a.id===t)?"pendingMatches":this.state.matches.some(a=>a.id===t)?"matches":this.state.cachedMatches.some(a=>a.id===t)?"cachedMatches":"";o&&this.__store.setState(a=>({...a,[o]:a[o]?.map(i=>i.id===t?n(i):i)}))},this.getMatch=t=>{const n=o=>o.id===t;return this.state.cachedMatches.find(n)??this.state.pendingMatches?.find(n)??this.state.matches.find(n)},this.invalidate=t=>{const n=o=>t?.filter?.(o)??!0?{...o,invalid:!0,...t?.forcePending||o.status==="error"?{status:"pending",error:void 0}:void 0}:o;return this.__store.setState(o=>({...o,matches:o.matches.map(n),cachedMatches:o.cachedMatches.map(n),pendingMatches:o.pendingMatches?.map(n)})),this.shouldViewTransition=!1,this.load({sync:t?.sync})},this.resolveRedirect=t=>(t.options.href||(t.options.href=this.buildLocation(t.options).href,t.headers.set("Location",t.options.href)),t.headers.get("Location")||t.headers.set("Location",t.options.href),t),this.clearCache=t=>{const n=t?.filter;n!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(a=>!n(a))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const t=n=>{const o=this.looseRoutesById[n.routeId];if(!o.options.loader)return!0;const a=(n.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??300*1e3;return n.status==="error"?!0:Date.now()-n.updatedAt>=a};this.clearCache({filter:t})},this.loadRouteChunk=Zn,this.preloadRoute=async t=>{const n=this.buildLocation(t);let o=this.matchRoutes(n,{throwOnError:!0,preload:!0,dest:t});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),i=new Set([...a,...this.state.cachedMatches.map(c=>c.id)]);Jt(()=>{o.forEach(c=>{i.has(c.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,c]}))})});try{return o=await hn({router:this,matches:o,location:n,preload:!0,updateMatch:(c,l)=>{a.has(c)?o=o.map(h=>h.id===c?l(h):h):this.updateMatch(c,l)}}),o}catch(c){if(He(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:n});qe(c)||console.error(c);return}},this.matchRoute=(t,n)=>{const o={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},a=this.buildLocation(o);if(n?.pending&&this.state.status!=="pending")return!1;const c=(n?.pending===void 0?!this.state.isLoading:n.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,l=dr(c.pathname,{...n,to:a.pathname},this.parsePathnameCache);return!l||t.params&&!gt(l,t.params,{partial:!0})?!1:l&&(n?.includeSearch??!0)?gt(c.search,a.search,{partial:!0})?l:!1:l},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...s,caseSensitive:s.caseSensitive??!1,notFoundMode:s.notFoundMode??"fuzzy",stringifySearch:s.stringifySearch??fi,parseSearch:s.parseSearch??pi}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(s,t){const{foundRoute:n,matchedRoutes:o,routeParams:a}=this.getMatchedRoutes(s.pathname,t?.dest?.to);let i=!1;(n?n.path!=="/"&&a["**"]:ct(s.pathname))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):i=!0);const c=(()=>{if(i){if(this.options.notFoundMode!=="root")for(let u=o.length-1;u>=0;u--){const d=o[u];if(d.children)return d.id}return Ve}})(),l=[],h=u=>u?.id?u.context??this.options.context??void 0:this.options.context??void 0;return o.forEach((u,d)=>{const p=l[d-1],[g,f,x]=(()=>{const A=p?.search??s.search,U=p?._strictSearch??void 0;try{const _=hr(u.options.validateSearch,{...A})??void 0;return[{...A,..._},{...U,..._},void 0]}catch(_){let L=_;if(_ instanceof Is||(L=new Is(_.message,{cause:_})),t?.throwOnError)throw L;return[A,{},L]}})(),y=u.options.loaderDeps?.({search:g})??"",P=y?JSON.stringify(y):"",{interpolatedPath:z,usedParams:E}=hs({path:u.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),I=hs({path:u.id,params:a,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+P,K=this.getMatch(I),V=this.state.matches.find(A=>A.routeId===u.id),M=K?._strictParams??E;let N;if(!K){const A=u.options.params?.parse??u.options.parseParams;if(A)try{Object.assign(M,A(M))}catch(U){if(N=new Ri(U.message,{cause:U}),t?.throwOnError)throw N}}Object.assign(a,M);const B=V?"stay":"enter";let X;if(K)X={...K,cause:B,params:V?$e(V.params,a):a,_strictParams:M,search:$e(V?V.search:K.search,g),_strictSearch:f};else{const A=u.options.loader||u.options.beforeLoad||u.lazyFn||eo(u)?"pending":"success";X={id:I,index:d,routeId:u.id,params:V?$e(V.params,a):a,_strictParams:M,pathname:z,updatedAt:Date.now(),search:V?$e(V.search,g):g,_strictSearch:f,searchError:void 0,status:A,isFetching:!1,error:void 0,paramsError:N,__routeContext:void 0,_nonReactive:{loadPromise:At()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:B,loaderDeps:V?$e(V.loaderDeps,y):y,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:u.options.staticData||{},fullPath:u.fullPath}}t?.preload||(X.globalNotFound=c===u.id),X.searchError=x;const b=h(p);X.context={...b,...X.__routeContext,...X.__beforeLoadContext},l.push(X)}),l.forEach((u,d)=>{const p=this.looseRoutesById[u.routeId];if(!this.getMatch(u.id)&&t?._buildLocation!==!0){const f=l[d-1],x=h(f);if(p.options.context){const y={deps:u.loaderDeps,params:u.params,context:x??{},location:s,navigate:P=>this.navigate({...P,_fromLocation:s}),buildLocation:this.buildLocation,cause:u.cause,abortController:u.abortController,preload:!!u.preload,matches:l};u.__routeContext=p.options.context(y)??void 0}u.context={...x,...u.__routeContext,...u.__beforeLoadContext}}}),l}}class Is extends Error{}class Ri extends Error{}function Pi(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function hr(e,s){if(e==null)return{};if("~standard"in e){const t=e["~standard"].validate(s);if(t instanceof Promise)throw new Is("Async validation not supported");if(t.issues)throw new Is(JSON.stringify(t.issues,void 0,2),{cause:t});return t.value}return"parse"in e?e.parse(s):typeof e=="function"?e(s):{}}function Mi({pathname:e,routePathname:s,caseSensitive:t,routesByPath:n,routesById:o,flatRoutes:a,parseCache:i}){let c={};const l=ct(e),h=g=>dr(l,{to:g.fullPath,caseSensitive:g.options?.caseSensitive??t,fuzzy:!0},i);let u=s!==void 0?n[s]:void 0;if(u)c=h(u);else{let g;for(const f of a){const x=h(f);if(x)if(f.path!=="/"&&x["**"])g||(g={foundRoute:f,routeParams:x});else{u=f,c=x;break}}!u&&g&&(u=g.foundRoute,c=g.routeParams)}let d=u||o[Ve];const p=[d];for(;d.parentRoute;)d=d.parentRoute,p.push(d);return p.reverse(),{matchedRoutes:p,routeParams:c,foundRoute:u}}function Ei({search:e,dest:s,destRoutes:t,_includeValidateSearch:n}){const o=t.reduce((c,l)=>{const h=[];if("search"in l.options)l.options.search?.middlewares&&h.push(...l.options.search.middlewares);else if(l.options.preSearchFilters||l.options.postSearchFilters){const u=({search:d,next:p})=>{let g=d;"preSearchFilters"in l.options&&l.options.preSearchFilters&&(g=l.options.preSearchFilters.reduce((x,y)=>y(x),d));const f=p(g);return"postSearchFilters"in l.options&&l.options.postSearchFilters?l.options.postSearchFilters.reduce((x,y)=>y(x),f):f};h.push(u)}if(n&&l.options.validateSearch){const u=({search:d,next:p})=>{const g=p(d);try{return{...g,...hr(l.options.validateSearch,g)??void 0}}catch{return g}};h.push(u)}return c.concat(h)},[])??[],a=({search:c})=>s.search?s.search===!0?c:ft(s.search,c):{};o.push(a);const i=(c,l)=>{if(c>=o.length)return l;const h=o[c];return h({search:l,next:d=>i(c+1,d)})};return i(0,e)}const Ai="Error preloading route! ";class no{constructor(s){if(this.init=t=>{this.originalIndex=t.originalIndex;const n=this.options,o=!n?.path&&!n?.id;this.parentRoute=this.options.getParentRoute?.(),o?this._path=Ve:this.parentRoute||tt(!1);let a=o?Ve:n?.path;a&&a!=="/"&&(a=Ir(a));const i=n?.id||a;let c=o?Ve:Ze([this.parentRoute.id===Ve?"":this.parentRoute.id,i]);a===Ve&&(a="/"),c!==Ve&&(c=Ze(["/",c]));const l=c===Ve?"/":Ze([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=l,this._to=l},this.clone=t=>{this._path=t._path,this._id=t._id,this._fullPath=t._fullPath,this._to=t._to,this.options.getParentRoute=t.options.getParentRoute,this.children=t.children},this.addChildren=t=>this._addFileChildren(t),this._addFileChildren=t=>(Array.isArray(t)&&(this.children=t),typeof t=="object"&&t!==null&&(this.children=Object.values(t)),this),this._addFileTypes=()=>this,this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.options=s||{},this.isRoot=!s?.getParentRoute,s?.id&&s?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class Ti extends no{constructor(s){super(s)}}function Fr(e){const s=e.errorComponent??Hs;return r.jsx(Li,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:t,reset:n})=>t?m.createElement(s,{error:t,reset:n}):e.children})}class Li extends m.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(s){return{resetKey:s.getResetKey()}}static getDerivedStateFromError(s){return{error:s}}reset(){this.setState({error:null})}componentDidUpdate(s,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(s,t){this.props.onCatch&&this.props.onCatch(s,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Hs({error:e}){const[s,t]=m.useState(!1);return r.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[r.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),r.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(n=>!n),children:s?"Hide Error":"Show Error"})]}),r.jsx("div",{style:{height:".25rem"}}),s?r.jsx("div",{children:r.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?r.jsx("code",{children:e.message}):null})}):null]})}function Ii({children:e,fallback:s=null}){return Fi()?r.jsx(Fe.Fragment,{children:e}):r.jsx(Fe.Fragment,{children:s})}function Fi(){return Fe.useSyncExternalStore(Di,()=>!0,()=>!1)}function Di(){return()=>{}}function Oi(e,s=t=>t){return ha.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,s,zi)}function zi(e,s){if(Object.is(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;if(e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(const[n,o]of e)if(!s.has(n)||!Object.is(o,s.get(n)))return!1;return!0}if(e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(const n of e)if(!s.has(n))return!1;return!0}if(e instanceof Date&&s instanceof Date)return e.getTime()===s.getTime();const t=mn(e);if(t.length!==mn(s).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(s,t[n])||!Object.is(e[t[n]],s[t[n]]))return!1;return!0}function mn(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const Zs=m.createContext(null);function oo(){return typeof document>"u"?Zs:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Zs,Zs)}function Oe(e){const s=m.useContext(oo());return e?.warn,s}function Te(e){const s=Oe({warn:e?.router===void 0}),t=e?.router||s,n=m.useRef(void 0);return Oi(t.__store,o=>{if(e?.select){if(e.structuralSharing??t.options.defaultStructuralSharing){const a=$e(n.current,e.select(o));return n.current=a,a}return e.select(o)}return o})}const Ks=m.createContext(void 0),$i=m.createContext(void 0);function Ye(e){const s=m.useContext(e.from?$i:Ks);return Te({select:n=>{const o=n.matches.find(a=>e.from?e.from===a.routeId:a.id===s);if(tt(!((e.shouldThrow??!0)&&!o),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),o!==void 0)return e.select?e.select(o):o},structuralSharing:e.structuralSharing})}function Dr(e){return Ye({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:s=>e.select?e.select(s.loaderData):s.loaderData})}function Or(e){const{select:s,...t}=e;return Ye({...t,select:n=>s?s(n.loaderDeps):n.loaderDeps})}function zr(e){return Ye({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:s=>{const t=e.strict===!1?s.params:s._strictParams;return e.select?e.select(t):t}})}function $r(e){return Ye({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:s=>e.select?e.select(s.search):s.search})}function Vr(e){const s=Oe();return m.useCallback(t=>s.navigate({...t,from:t.from??e?.from}),[e?.from,s])}var Vi=Ra();const fs=typeof window<"u"?m.useLayoutEffect:m.useEffect;function er(e){const s=m.useRef({value:e,prev:null}),t=s.current.value;return e!==t&&(s.current={value:e,prev:t}),s.current.prev}function Bi(e,s,t={},n={}){m.useEffect(()=>{if(!e.current||n.disabled||typeof IntersectionObserver!="function")return;const o=new IntersectionObserver(([a])=>{s(a)},t);return o.observe(e.current),()=>{o.disconnect()}},[s,t,n.disabled,e])}function Ui(e){const s=m.useRef(null);return m.useImperativeHandle(e,()=>s.current,[]),s}function Gi(e,s){const t=Oe(),[n,o]=m.useState(!1),a=m.useRef(!1),i=Ui(s),{activeProps:c,inactiveProps:l,activeOptions:h,to:u,preload:d,preloadDelay:p,hashScrollIntoView:g,replace:f,startTransition:x,resetScroll:y,viewTransition:P,children:z,target:E,disabled:I,style:K,className:V,onClick:M,onFocus:N,onMouseEnter:B,onMouseLeave:X,onTouchStart:b,ignoreBlocker:A,params:U,search:_,hash:L,state:O,mask:ee,reloadDocument:D,unsafeRelative:Y,from:fe,_fromLocation:q,...ge}=e,re=Te({select:ae=>ae.location.search,structuralSharing:!0}),he=e.from,pe=m.useMemo(()=>({...e,from:he}),[t,re,he,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),me=m.useMemo(()=>t.buildLocation({...pe}),[t,pe]),w=m.useMemo(()=>{if(I)return;let ae=me.maskedLocation?me.maskedLocation.url:me.url,ue=!1;return t.origin&&(ae.startsWith(t.origin)?ae=ae.replace(t.origin,"")||"/":ue=!0),{href:ae,external:ue}},[I,me.maskedLocation,me.url,t.origin]),S=m.useMemo(()=>{if(w?.external)return w.href;try{return new URL(u),u}catch{}},[u,w]),C=e.reloadDocument||S?!1:d??t.options.defaultPreload,v=p??t.options.defaultPreloadDelay??0,H=Te({select:ae=>{if(S)return!1;if(h?.exact){if(!Da(ae.location.pathname,me.pathname,t.basepath))return!1}else{const ue=As(ae.location.pathname,t.basepath),ke=As(me.pathname,t.basepath);if(!(ue.startsWith(ke)&&(ue.length===ke.length||ue[ke.length]==="/")))return!1}return(h?.includeSearch??!0)&&!gt(ae.location.search,me.search,{partial:!h?.exact,ignoreUndefined:!h?.explicitUndefined})?!1:h?.includeHash?ae.location.hash===me.hash:!0}}),ie=m.useCallback(()=>{t.preloadRoute({...pe}).catch(ae=>{console.warn(ae),console.warn(Ai)})},[t,pe]),te=m.useCallback(ae=>{ae?.isIntersecting&&ie()},[ie]);Bi(i,te,Yi,{disabled:!!I||C!=="viewport"}),m.useEffect(()=>{a.current||!I&&C==="render"&&(ie(),a.current=!0)},[I,ie,C]);const Q=ae=>{const ue=ae.currentTarget.target,ke=E!==void 0?E:ue;if(!I&&!Qi(ae)&&!ae.defaultPrevented&&(!ke||ke==="_self")&&ae.button===0){ae.preventDefault(),Vi.flushSync(()=>{o(!0)});const ze=t.subscribe("onResolved",()=>{ze(),o(!1)});t.navigate({...pe,replace:f,resetScroll:y,hashScrollIntoView:g,startTransition:x,viewTransition:P,ignoreBlocker:A})}};if(S)return{...ge,ref:i,href:S,...z&&{children:z},...E&&{target:E},...I&&{disabled:I},...K&&{style:K},...V&&{className:V},...M&&{onClick:M},...N&&{onFocus:N},...B&&{onMouseEnter:B},...X&&{onMouseLeave:X},...b&&{onTouchStart:b}};const ce=ae=>{I||C&&ie()},le=ce,we=ae=>{if(!(I||!C))if(!v)ie();else{const ue=ae.target;if(zt.has(ue))return;const ke=setTimeout(()=>{zt.delete(ue),ie()},v);zt.set(ue,ke)}},Re=ae=>{if(I||!C||!v)return;const ue=ae.target,ke=zt.get(ue);ke&&(clearTimeout(ke),zt.delete(ue))},be=H?ft(c,{})??Wi:tr,We=H?tr:ft(l,{})??tr,Me=[V,be.className,We.className].filter(Boolean).join(" "),Le=(K||be.style||We.style)&&{...K,...be.style,...We.style};return{...ge,...be,...We,href:w?.href,ref:i,onClick:$t([M,Q]),onFocus:$t([N,ce]),onMouseEnter:$t([B,we]),onMouseLeave:$t([X,Re]),onTouchStart:$t([b,le]),disabled:!!I,target:E,...Le&&{style:Le},...Me&&{className:Me},...I&&Hi,...H&&Ki,...n&&qi}}const tr={},Wi={className:"active"},Hi={role:"link","aria-disabled":!0},Ki={"data-status":"active","aria-current":"page"},qi={"data-transitioning":"transitioning"},zt=new WeakMap,Yi={rootMargin:"100px"},$t=e=>s=>{for(const t of e)if(t){if(s.defaultPrevented)return;t(s)}},Fs=m.forwardRef((e,s)=>{const{_asChild:t,...n}=e,{type:o,ref:a,...i}=Gi(n,s),c=typeof n.children=="function"?n.children({isActive:i["data-status"]==="active"}):n.children;return t===void 0&&delete i.disabled,m.createElement(t||"a",{...i,ref:a},c)});function Qi(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}class Xi extends no{constructor(s){super(s),this.useMatch=t=>Ye({select:t?.select,from:this.id,structuralSharing:t?.structuralSharing}),this.useRouteContext=t=>Ye({...t,from:this.id,select:n=>t?.select?t.select(n.context):n.context}),this.useSearch=t=>$r({select:t?.select,structuralSharing:t?.structuralSharing,from:this.id}),this.useParams=t=>zr({select:t?.select,structuralSharing:t?.structuralSharing,from:this.id}),this.useLoaderDeps=t=>Or({...t,from:this.id}),this.useLoaderData=t=>Dr({...t,from:this.id}),this.useNavigate=()=>Vr({from:this.fullPath}),this.Link=Fe.forwardRef((t,n)=>r.jsx(Fs,{ref:n,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function lt(e){return new Xi(e)}class Ji extends Ti{constructor(s){super(s),this.useMatch=t=>Ye({select:t?.select,from:this.id,structuralSharing:t?.structuralSharing}),this.useRouteContext=t=>Ye({...t,from:this.id,select:n=>t?.select?t.select(n.context):n.context}),this.useSearch=t=>$r({select:t?.select,structuralSharing:t?.structuralSharing,from:this.id}),this.useParams=t=>zr({select:t?.select,structuralSharing:t?.structuralSharing,from:this.id}),this.useLoaderDeps=t=>Or({...t,from:this.id}),this.useLoaderData=t=>Dr({...t,from:this.id}),this.useNavigate=()=>Vr({from:this.fullPath}),this.Link=Fe.forwardRef((t,n)=>r.jsx(Fs,{ref:n,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function Zi(e){return new Ji(e)}function pn(e){return typeof e=="object"?new fn(e,{silent:!0}).createRoute(e):new fn(e,{silent:!0}).createRoute}class fn{constructor(s,t){this.path=s,this.createRoute=n=>{this.silent;const o=lt(n);return o.isRoot=!1,o},this.silent=t?.silent}}class gn{constructor(s){this.useMatch=t=>Ye({select:t?.select,from:this.options.id,structuralSharing:t?.structuralSharing}),this.useRouteContext=t=>Ye({from:this.options.id,select:n=>t?.select?t.select(n.context):n.context}),this.useSearch=t=>$r({select:t?.select,structuralSharing:t?.structuralSharing,from:this.options.id}),this.useParams=t=>zr({select:t?.select,structuralSharing:t?.structuralSharing,from:this.options.id}),this.useLoaderDeps=t=>Or({...t,from:this.options.id}),this.useLoaderData=t=>Dr({...t,from:this.options.id}),this.useNavigate=()=>{const t=Oe();return Vr({from:t.routesById[this.options.id].fullPath})},this.options=s,this.$$typeof=Symbol.for("react.memo")}}function xn(e){return typeof e=="object"?new gn(e):s=>new gn({id:e,...s})}function ec(){const e=Oe(),s=m.useRef({router:e,mounted:!1}),[t,n]=m.useState(!1),{hasPendingMatches:o,isLoading:a}=Te({select:d=>({isLoading:d.isLoading,hasPendingMatches:d.matches.some(p=>p.status==="pending")}),structuralSharing:!0}),i=er(a),c=a||t||o,l=er(c),h=a||o,u=er(h);return e.startTransition=d=>{n(!0),m.startTransition(()=>{d(),n(!1)})},m.useEffect(()=>{const d=e.history.subscribe(e.load),p=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return ct(e.latestLocation.href)!==ct(p.href)&&e.commitLocation({...p,replace:!0}),()=>{d()}},[e,e.history]),fs(()=>{if(typeof window<"u"&&e.ssr||s.current.router===e&&s.current.mounted)return;s.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(p){console.error(p)}})()},[e]),fs(()=>{i&&!a&&e.emit({type:"onLoad",...xt(e.state)})},[i,e,a]),fs(()=>{u&&!h&&e.emit({type:"onBeforeRouteMount",...xt(e.state)})},[h,u,e]),fs(()=>{l&&!c&&(e.emit({type:"onResolved",...xt(e.state)}),e.__store.setState(d=>({...d,status:"idle",resolvedLocation:d.location})),ui(e))},[c,l,e]),null}function tc(e){const s=Te({select:t=>`not-found-${t.location.pathname}-${t.status}`});return r.jsx(Fr,{getResetKey:()=>s,onCatch:(t,n)=>{if(qe(t))e.onCatch?.(t,n);else throw t},errorComponent:({error:t})=>{if(qe(t))return e.fallback?.(t);throw t},children:e.children})}function sc(){return r.jsx("p",{children:"Not Found"})}function kt(e){return r.jsx(r.Fragment,{children:e.children})}function ao(e,s,t){return s.options.notFoundComponent?r.jsx(s.options.notFoundComponent,{data:t}):e.options.defaultNotFoundComponent?r.jsx(e.options.defaultNotFoundComponent,{data:t}):r.jsx(sc,{})}function rc({children:e}){const s=Oe();return s.isServer?r.jsx("script",{nonce:s.options.ssr?.nonce,className:"$tsr",dangerouslySetInnerHTML:{__html:[e].filter(Boolean).join(`
`)+";$_TSR.c()"}}):null}function nc(){const e=Oe();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const t=(e.options.getScrollRestorationKey||ur)(e.latestLocation),n=t!==ur(e.latestLocation)?t:void 0,o={storageKey:Ts,shouldScrollRestoration:!0};return n&&(o.key=n),r.jsx(rc,{children:`(${qn.toString()})(${JSON.stringify(o)})`})}const io=m.memo(function({matchId:s}){const t=Oe(),n=Te({select:P=>{const z=P.matches.find(E=>E.id===s);return tt(z),{routeId:z.routeId,ssr:z.ssr,_displayPending:z._displayPending}},structuralSharing:!0}),o=t.routesById[n.routeId],a=o.options.pendingComponent??t.options.defaultPendingComponent,i=a?r.jsx(a,{}):null,c=o.options.errorComponent??t.options.defaultErrorComponent,l=o.options.onCatch??t.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??t.options.notFoundRoute?.options.component:o.options.notFoundComponent,u=n.ssr===!1||n.ssr==="data-only",d=(!o.isRoot||o.options.wrapInSuspense||u)&&(o.options.wrapInSuspense??a??(o.options.errorComponent?.preload||u))?m.Suspense:kt,p=c?Fr:kt,g=h?tc:kt,f=Te({select:P=>P.loadedAt}),x=Te({select:P=>{const z=P.matches.findIndex(E=>E.id===s);return P.matches[z-1]?.routeId}}),y=o.isRoot?o.options.shellComponent??kt:kt;return r.jsxs(y,{children:[r.jsx(Ks.Provider,{value:s,children:r.jsx(d,{fallback:i,children:r.jsx(p,{getResetKey:()=>f,errorComponent:c||Hs,onCatch:(P,z)=>{if(qe(P))throw P;l?.(P,z)},children:r.jsx(g,{fallback:P=>{if(!h||P.routeId&&P.routeId!==n.routeId||!P.routeId&&!o.isRoot)throw P;return m.createElement(h,P)},children:u||n._displayPending?r.jsx(Ii,{fallback:i,children:r.jsx(yn,{matchId:s})}):r.jsx(yn,{matchId:s})})})})}),x===Ve&&t.options.scrollRestoration?r.jsxs(r.Fragment,{children:[r.jsx(oc,{}),r.jsx(nc,{})]}):null]})});function oc(){const e=Oe(),s=m.useRef(void 0);return r.jsx("script",{suppressHydrationWarning:!0,ref:t=>{t&&(s.current===void 0||s.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...xt(e.state)}),s.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const yn=m.memo(function({matchId:s}){const t=Oe(),{match:n,key:o,routeId:a}=Te({select:l=>{const h=l.matches.find(f=>f.id===s),u=h.routeId,p=(t.routesById[u].options.remountDeps??t.options.defaultRemountDeps)?.({routeId:u,loaderDeps:h.loaderDeps,params:h._strictParams,search:h._strictSearch});return{key:p?JSON.stringify(p):void 0,routeId:u,match:{id:h.id,status:h.status,error:h.error,_forcePending:h._forcePending,_displayPending:h._displayPending}}},structuralSharing:!0}),i=t.routesById[a],c=m.useMemo(()=>{const l=i.options.component??t.options.defaultComponent;return l?r.jsx(l,{},o):r.jsx(co,{})},[o,i.options.component,t.options.defaultComponent]);if(n._displayPending)throw t.getMatch(n.id)?._nonReactive.displayPendingPromise;if(n._forcePending)throw t.getMatch(n.id)?._nonReactive.minPendingPromise;if(n.status==="pending"){const l=i.options.pendingMinMs??t.options.defaultPendingMinMs;if(l){const h=t.getMatch(n.id);if(h&&!h._nonReactive.minPendingPromise&&!t.isServer){const u=At();h._nonReactive.minPendingPromise=u,setTimeout(()=>{u.resolve(),h._nonReactive.minPendingPromise=void 0},l)}}throw t.getMatch(n.id)?._nonReactive.loadPromise}if(n.status==="notFound")return tt(qe(n.error)),ao(t,i,n.error);if(n.status==="redirected")throw tt(He(n.error)),t.getMatch(n.id)?._nonReactive.loadPromise;if(n.status==="error"){if(t.isServer){const l=(i.options.errorComponent??t.options.defaultErrorComponent)||Hs;return r.jsx(l,{error:n.error,reset:void 0,info:{componentStack:""}})}throw n.error}return c}),co=m.memo(function(){const s=Oe(),t=m.useContext(Ks),n=Te({select:h=>h.matches.find(u=>u.id===t)?.routeId}),o=s.routesById[n],a=Te({select:h=>{const d=h.matches.find(p=>p.id===t);return tt(d),d.globalNotFound}}),i=Te({select:h=>{const u=h.matches,d=u.findIndex(p=>p.id===t);return u[d+1]?.id}}),c=s.options.defaultPendingComponent?r.jsx(s.options.defaultPendingComponent,{}):null;if(a)return ao(s,o,void 0);if(!i)return null;const l=r.jsx(io,{matchId:i});return t===Ve?r.jsx(m.Suspense,{fallback:c,children:l}):l});function ac(){const e=Oe(),s=e.options.defaultPendingComponent?r.jsx(e.options.defaultPendingComponent,{}):null,t=e.isServer||typeof document<"u"&&e.ssr?kt:m.Suspense,n=r.jsxs(t,{fallback:s,children:[!e.isServer&&r.jsx(ec,{}),r.jsx(ic,{})]});return e.options.InnerWrap?r.jsx(e.options.InnerWrap,{children:n}):n}function ic(){const e=Oe(),s=Te({select:o=>o.matches[0]?.id}),t=Te({select:o=>o.loadedAt}),n=s?r.jsx(io,{matchId:s}):null;return r.jsx(Ks.Provider,{value:s,children:e.options.disableGlobalCatchBoundary?n:r.jsx(Fr,{getResetKey:()=>t,errorComponent:Hs,onCatch:o=>{o.message||o.toString()},children:n})})}const cc=e=>new lc(e);class lc extends Ci{constructor(s){super(s)}}typeof globalThis<"u"?(globalThis.createFileRoute=pn,globalThis.createLazyFileRoute=xn):typeof window<"u"&&(window.createFileRoute=pn,window.createLazyFileRoute=xn);function dc({router:e,children:s,...t}){Object.keys(t).length>0&&e.update({...e.options,...t,context:{...e.options.context,...t.context}});const n=oo(),o=r.jsx(n.Provider,{value:e,children:s});return e.options.Wrap?r.jsx(e.options.Wrap,{children:o}):o}function uc({router:e,...s}){return r.jsx(dc,{router:e,...s,children:r.jsx(ac,{})})}function hc(e){return Te({select:s=>s.location})}var qs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mc={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},pc=class{#e=mc;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,s){return this.#e.setTimeout(e,s)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,s){return this.#e.setInterval(e,s)}clearInterval(e){this.#e.clearInterval(e)}},mr=new pc;function fc(e){setTimeout(e,0)}var Ys=typeof window>"u"||"Deno"in globalThis;function Be(){}function gc(e,s){return typeof e=="function"?e(s):e}function xc(e){return typeof e=="number"&&e>=0&&e!==1/0}function yc(e,s){return Math.max(e+(s||0)-Date.now(),0)}function pr(e,s){return typeof e=="function"?e(s):e}function bc(e,s){return typeof e=="function"?e(s):e}function bn(e,s){const{type:t="all",exact:n,fetchStatus:o,predicate:a,queryKey:i,stale:c}=e;if(i){if(n){if(s.queryHash!==Br(i,s.options))return!1}else if(!ss(s.queryKey,i))return!1}if(t!=="all"){const l=s.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||o&&o!==s.state.fetchStatus||a&&!a(s))}function vn(e,s){const{exact:t,status:n,predicate:o,mutationKey:a}=e;if(a){if(!s.options.mutationKey)return!1;if(t){if(ts(s.options.mutationKey)!==ts(a))return!1}else if(!ss(s.options.mutationKey,a))return!1}return!(n&&s.state.status!==n||o&&!o(s))}function Br(e,s){return(s?.queryKeyHashFn||ts)(e)}function ts(e){return JSON.stringify(e,(s,t)=>fr(t)?Object.keys(t).sort().reduce((n,o)=>(n[o]=t[o],n),{}):t)}function ss(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(t=>ss(e[t],s[t])):!1}var vc=Object.prototype.hasOwnProperty;function lo(e,s){if(e===s)return e;const t=wn(e)&&wn(s);if(!t&&!(fr(e)&&fr(s)))return s;const o=(t?e:Object.keys(e)).length,a=t?s:Object.keys(s),i=a.length,c=t?new Array(i):{};let l=0;for(let h=0;h<i;h++){const u=t?h:a[h],d=e[u],p=s[u];if(d===p){c[u]=d,(t?h<o:vc.call(e,u))&&l++;continue}if(d===null||p===null||typeof d!="object"||typeof p!="object"){c[u]=p;continue}const g=lo(d,p);c[u]=g,g===d&&l++}return o===i&&l===o?e:c}function wn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function fr(e){if(!Sn(e))return!1;const s=e.constructor;if(s===void 0)return!0;const t=s.prototype;return!(!Sn(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Sn(e){return Object.prototype.toString.call(e)==="[object Object]"}function wc(e){return new Promise(s=>{mr.setTimeout(s,e)})}function Sc(e,s,t){return typeof t.structuralSharing=="function"?t.structuralSharing(e,s):t.structuralSharing!==!1?lo(e,s):s}function jc(e,s,t=0){const n=[...e,s];return t&&n.length>t?n.slice(1):n}function Nc(e,s,t=0){const n=[s,...e];return t&&n.length>t?n.slice(0,-1):n}var Ur=Symbol();function uo(e,s){return!e.queryFn&&s?.initialPromise?()=>s.initialPromise:!e.queryFn||e.queryFn===Ur?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var _c=class extends qs{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!Ys&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ho=new _c;function kc(){let e,s;const t=new Promise((o,a)=>{e=o,s=a});t.status="pending",t.catch(()=>{});function n(o){Object.assign(t,o),delete t.resolve,delete t.reject}return t.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},t.reject=o=>{n({status:"rejected",reason:o}),s(o)},t}var Cc=fc;function Rc(){let e=[],s=0,t=c=>{c()},n=c=>{c()},o=Cc;const a=c=>{s?e.push(c):o(()=>{t(c)})},i=()=>{const c=e;e=[],c.length&&o(()=>{n(()=>{c.forEach(l=>{t(l)})})})};return{batch:c=>{let l;s++;try{l=c()}finally{s--,s||i()}return l},batchCalls:c=>(...l)=>{a(()=>{c(...l)})},schedule:a,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{o=c}}}var Ae=Rc(),Pc=class extends qs{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!Ys&&window.addEventListener){const s=()=>e(!0),t=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#e}},Ds=new Pc;function Mc(e){return Math.min(1e3*2**e,3e4)}function mo(e){return(e??"online")==="online"?Ds.isOnline():!0}var gr=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function po(e){let s=!1,t=0,n;const o=kc(),a=()=>o.status!=="pending",i=x=>{if(!a()){const y=new gr(x);p(y),e.onCancel?.(y)}},c=()=>{s=!0},l=()=>{s=!1},h=()=>ho.isFocused()&&(e.networkMode==="always"||Ds.isOnline())&&e.canRun(),u=()=>mo(e.networkMode)&&e.canRun(),d=x=>{a()||(n?.(),o.resolve(x))},p=x=>{a()||(n?.(),o.reject(x))},g=()=>new Promise(x=>{n=y=>{(a()||h())&&x(y)},e.onPause?.()}).then(()=>{n=void 0,a()||e.onContinue?.()}),f=()=>{if(a())return;let x;const y=t===0?e.initialPromise:void 0;try{x=y??e.fn()}catch(P){x=Promise.reject(P)}Promise.resolve(x).then(d).catch(P=>{if(a())return;const z=e.retry??(Ys?0:3),E=e.retryDelay??Mc,I=typeof E=="function"?E(t,P):E,K=z===!0||typeof z=="number"&&t<z||typeof z=="function"&&z(t,P);if(s||!K){p(P);return}t++,e.onFail?.(t,P),wc(I).then(()=>h()?void 0:g()).then(()=>{s?p(P):f()})})};return{promise:o,status:()=>o.status,cancel:i,continue:()=>(n?.(),o),cancelRetry:c,continueRetry:l,canStart:u,start:()=>(u()?f():g().then(f),o)}}var fo=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xc(this.gcTime)&&(this.#e=mr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ys?1/0:300*1e3))}clearGcTimeout(){this.#e&&(mr.clearTimeout(this.#e),this.#e=void 0)}},Ec=class extends fo{#e;#t;#s;#n;#r;#a;#i;constructor(e){super(),this.#i=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#s=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=jn(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=jn(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,s){const t=Sc(this.state.data,e,this.options);return this.#o({data:t,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),t}setState(e,s){this.#o({type:"setState",state:e,setStateOptions:s})}cancel(e){const s=this.#r?.promise;return this.#r?.cancel(e),s?s.then(Be).catch(Be):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>bc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ur||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>pr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!yc(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(e,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(l=>l.options.queryFn);c&&this.setOptions(c.options)}const t=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,t.signal)})},o=()=>{const c=uo(this.options,s),h=(()=>{const u={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(u),u})();return this.#i=!1,this.options.persister?this.options.persister(c,h,this):c(h)},i=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:o};return n(c),c})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#o({type:"fetch",meta:i.fetchOptions?.meta}),this.#r=po({initialPromise:s?.initialPromise,fn:i.fetchFn,onCancel:c=>{c instanceof gr&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),t.abort()},onFail:(c,l)=>{this.#o({type:"failed",failureCount:c,error:l})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0});try{const c=await this.#r.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof gr){if(c.silent)return this.#r.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#o({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#o(e){const s=t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Ac(t.data,this.options),fetchMeta:e.meta??null};case"success":const n={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const o=e.error;return{...t,error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=s(this.state),Ae.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function Ac(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mo(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function jn(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,t=s!==void 0,n=t?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function Nn(e){return{onFetch:(s,t)=>{const n=s.options,o=s.fetchOptions?.meta?.fetchMore?.direction,a=s.state.data?.pages||[],i=s.state.data?.pageParams||[];let c={pages:[],pageParams:[]},l=0;const h=async()=>{let u=!1;const d=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},p=uo(s.options,s.fetchOptions),g=async(f,x,y)=>{if(u)return Promise.reject();if(x==null&&f.pages.length)return Promise.resolve(f);const z=(()=>{const V={client:s.client,queryKey:s.queryKey,pageParam:x,direction:y?"backward":"forward",meta:s.options.meta};return d(V),V})(),E=await p(z),{maxPages:I}=s.options,K=y?Nc:jc;return{pages:K(f.pages,E,I),pageParams:K(f.pageParams,x,I)}};if(o&&a.length){const f=o==="backward",x=f?Tc:_n,y={pages:a,pageParams:i},P=x(n,y);c=await g(y,P,f)}else{const f=e??a.length;do{const x=l===0?i[0]??n.initialPageParam:_n(n,c);if(l>0&&x==null)break;c=await g(c,x),l++}while(l<f)}return c};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},t):s.fetchFn=h}}}function _n(e,{pages:s,pageParams:t}){const n=s.length-1;return s.length>0?e.getNextPageParam(s[n],s,t[n],t):void 0}function Tc(e,{pages:s,pageParams:t}){return s.length>0?e.getPreviousPageParam?.(s[0],s,t[0],t):void 0}var Lc=class extends fo{#e;#t;#s;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||Ic(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(s=>s!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const s=()=>{this.#r({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=po({fn:()=>this.options.mutationFn?this.options.mutationFn(e,t):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#r({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const n=this.state.status==="pending",o=!this.#n.canStart();try{if(n)s();else{this.#r({type:"pending",variables:e,isPaused:o}),await this.#s.config.onMutate?.(e,this,t);const i=await this.options.onMutate?.(e,t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:e,isPaused:o})}const a=await this.#n.start();return await this.#s.config.onSuccess?.(a,e,this.state.context,this,t),await this.options.onSuccess?.(a,e,this.state.context,t),await this.#s.config.onSettled?.(a,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(a,null,e,this.state.context,t),this.#r({type:"success",data:a}),a}catch(a){try{throw await this.#s.config.onError?.(a,e,this.state.context,this,t),await this.options.onError?.(a,e,this.state.context,t),await this.#s.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(void 0,a,e,this.state.context,t),a}finally{this.#r({type:"error",error:a})}}finally{this.#s.runNext(this)}}#r(e){const s=t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Ae.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function Ic(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fc=class extends qs{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(e,s,t){const n=new Lc({client:e,mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(s),state:t});return this.add(n),n}add(e){this.#e.add(e);const s=gs(e);if(typeof s=="string"){const t=this.#t.get(s);t?t.push(e):this.#t.set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const s=gs(e);if(typeof s=="string"){const t=this.#t.get(s);if(t)if(t.length>1){const n=t.indexOf(e);n!==-1&&t.splice(n,1)}else t[0]===e&&this.#t.delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=gs(e);if(typeof s=="string"){const n=this.#t.get(s)?.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){const s=gs(e);return typeof s=="string"?this.#t.get(s)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ae.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const s={exact:!0,...e};return this.getAll().find(t=>vn(s,t))}findAll(e={}){return this.getAll().filter(s=>vn(e,s))}notify(e){Ae.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Ae.batch(()=>Promise.all(e.map(s=>s.continue().catch(Be))))}};function gs(e){return e.options.scope?.id}var Dc=class extends qs{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,s,t){const n=s.queryKey,o=s.queryHash??Br(n,s);let a=this.get(o);return a||(a=new Ec({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(s),state:t,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=this.#e.get(e.queryHash);s&&(e.destroy(),s===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ae.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const s={exact:!0,...e};return this.getAll().find(t=>bn(s,t))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(t=>bn(e,t)):s}notify(e){Ae.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Ae.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ae.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Oc=class{#e;#t;#s;#n;#r;#a;#i;#o;constructor(e={}){this.#e=e.queryCache||new Dc,this.#t=e.mutationCache||new Fc,this.#s=e.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#i=ho.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Ds.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#i?.(),this.#i=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),t=this.#e.build(this,s),n=t.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&t.isStaleByTime(pr(s.staleTime,t))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:s,state:t})=>{const n=t.data;return[s,n]})}setQueryData(e,s,t){const n=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(n.queryHash)?.state.data,i=gc(s,a);if(i!==void 0)return this.#e.build(this,n).setData(i,{...t,manual:!0})}setQueriesData(e,s,t){return Ae.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,s,t)]))}getQueryState(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state}removeQueries(e){const s=this.#e;Ae.batch(()=>{s.findAll(e).forEach(t=>{s.remove(t)})})}resetQueries(e,s){const t=this.#e;return Ae.batch(()=>(t.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const t={revert:!0,...s},n=Ae.batch(()=>this.#e.findAll(e).map(o=>o.cancel(t)));return Promise.all(n).then(Be).catch(Be)}invalidateQueries(e,s={}){return Ae.batch(()=>(this.#e.findAll(e).forEach(t=>{t.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},s)))}refetchQueries(e,s={}){const t={...s,cancelRefetch:s.cancelRefetch??!0},n=Ae.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let a=o.fetch(void 0,t);return t.throwOnError||(a=a.catch(Be)),o.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Be)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const t=this.#e.build(this,s);return t.isStaleByTime(pr(s.staleTime,t))?t.fetch(s):Promise.resolve(t.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Be).catch(Be)}fetchInfiniteQuery(e){return e.behavior=Nn(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Be).catch(Be)}ensureInfiniteQueryData(e){return e.behavior=Nn(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ds.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,s){this.#n.set(ts(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...this.#n.values()],t={};return s.forEach(n=>{ss(e,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(e,s){this.#r.set(ts(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...this.#r.values()],t={};return s.forEach(n=>{ss(e,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(e){if(e._defaulted)return e;const s={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=Br(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Ur&&(s.enabled=!1),s}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},zc=m.createContext(void 0),$c=({client:e,children:s})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(zc.Provider,{value:e,children:s}));function go(e){var s,t,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(s=0;s<o;s++)e[s]&&(t=go(e[s]))&&(n&&(n+=" "),n+=t)}else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Vc(){for(var e,s,t=0,n="",o=arguments.length;t<o;t++)(e=arguments[t])&&(s=go(e))&&(n&&(n+=" "),n+=s);return n}const Gr="-",Bc=e=>{const s=Gc(e),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const c=i.split(Gr);return c[0]===""&&c.length!==1&&c.shift(),xo(c,s)||Uc(i)},getConflictingClassGroupIds:(i,c)=>{const l=t[i]||[];return c&&n[i]?[...l,...n[i]]:l}}},xo=(e,s)=>{if(e.length===0)return s.classGroupId;const t=e[0],n=s.nextPart.get(t),o=n?xo(e.slice(1),n):void 0;if(o)return o;if(s.validators.length===0)return;const a=e.join(Gr);return s.validators.find(({validator:i})=>i(a))?.classGroupId},kn=/^\[(.+)\]$/,Uc=e=>{if(kn.test(e)){const s=kn.exec(e)[1],t=s?.substring(0,s.indexOf(":"));if(t)return"arbitrary.."+t}},Gc=e=>{const{theme:s,classGroups:t}=e,n={nextPart:new Map,validators:[]};for(const o in t)xr(t[o],n,o,s);return n},xr=(e,s,t,n)=>{e.forEach(o=>{if(typeof o=="string"){const a=o===""?s:Cn(s,o);a.classGroupId=t;return}if(typeof o=="function"){if(Wc(o)){xr(o(n),s,t,n);return}s.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([a,i])=>{xr(i,Cn(s,a),t,n)})})},Cn=(e,s)=>{let t=e;return s.split(Gr).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},Wc=e=>e.isThemeGetter,Hc=e=>{if(e<1)return{get:()=>{},set:()=>{}};let s=0,t=new Map,n=new Map;const o=(a,i)=>{t.set(a,i),s++,s>e&&(s=0,n=t,t=new Map)};return{get(a){let i=t.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return o(a,i),i},set(a,i){t.has(a)?t.set(a,i):o(a,i)}}},yr="!",br=":",Kc=br.length,qc=e=>{const{prefix:s,experimentalParseClassName:t}=e;let n=o=>{const a=[];let i=0,c=0,l=0,h;for(let f=0;f<o.length;f++){let x=o[f];if(i===0&&c===0){if(x===br){a.push(o.slice(l,f)),l=f+Kc;continue}if(x==="/"){h=f;continue}}x==="["?i++:x==="]"?i--:x==="("?c++:x===")"&&c--}const u=a.length===0?o:o.substring(l),d=Yc(u),p=d!==u,g=h&&h>l?h-l:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:g}};if(s){const o=s+br,a=n;n=i=>i.startsWith(o)?a(i.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(t){const o=n;n=a=>t({className:a,parseClassName:o})}return n},Yc=e=>e.endsWith(yr)?e.substring(0,e.length-1):e.startsWith(yr)?e.substring(1):e,Qc=e=>{const s=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const o=[];let a=[];return n.forEach(i=>{i[0]==="["||s[i]?(o.push(...a.sort(),i),a=[]):a.push(i)}),o.push(...a.sort()),o}},Xc=e=>({cache:Hc(e.cacheSize),parseClassName:qc(e),sortModifiers:Qc(e),...Bc(e)}),Jc=/\s+/,Zc=(e,s)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:o,sortModifiers:a}=s,i=[],c=e.trim().split(Jc);let l="";for(let h=c.length-1;h>=0;h-=1){const u=c[h],{isExternal:d,modifiers:p,hasImportantModifier:g,baseClassName:f,maybePostfixModifierPosition:x}=t(u);if(d){l=u+(l.length>0?" "+l:l);continue}let y=!!x,P=n(y?f.substring(0,x):f);if(!P){if(!y){l=u+(l.length>0?" "+l:l);continue}if(P=n(f),!P){l=u+(l.length>0?" "+l:l);continue}y=!1}const z=a(p).join(":"),E=g?z+yr:z,I=E+P;if(i.includes(I))continue;i.push(I);const K=o(P,y);for(let V=0;V<K.length;++V){const M=K[V];i.push(E+M)}l=u+(l.length>0?" "+l:l)}return l};function el(){let e=0,s,t,n="";for(;e<arguments.length;)(s=arguments[e++])&&(t=yo(s))&&(n&&(n+=" "),n+=t);return n}const yo=e=>{if(typeof e=="string")return e;let s,t="";for(let n=0;n<e.length;n++)e[n]&&(s=yo(e[n]))&&(t&&(t+=" "),t+=s);return t};function tl(e,...s){let t,n,o,a=i;function i(l){const h=s.reduce((u,d)=>d(u),e());return t=Xc(h),n=t.cache.get,o=t.cache.set,a=c,c(l)}function c(l){const h=n(l);if(h)return h;const u=Zc(l,t);return o(l,u),u}return function(){return a(el.apply(null,arguments))}}const Se=e=>{const s=t=>t[e]||[];return s.isThemeGetter=!0,s},bo=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,vo=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sl=/^\d+\/\d+$/,rl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nl=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ol=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,al=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,il=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,St=e=>sl.test(e),ne=e=>!!e&&!Number.isNaN(Number(e)),rt=e=>!!e&&Number.isInteger(Number(e)),sr=e=>e.endsWith("%")&&ne(e.slice(0,-1)),Xe=e=>rl.test(e),cl=()=>!0,ll=e=>nl.test(e)&&!ol.test(e),wo=()=>!1,dl=e=>al.test(e),ul=e=>il.test(e),hl=e=>!G(e)&&!W(e),ml=e=>It(e,No,wo),G=e=>bo.test(e),mt=e=>It(e,_o,ll),rr=e=>It(e,yl,ne),Rn=e=>It(e,So,wo),pl=e=>It(e,jo,ul),xs=e=>It(e,ko,dl),W=e=>vo.test(e),Vt=e=>Ft(e,_o),fl=e=>Ft(e,bl),Pn=e=>Ft(e,So),gl=e=>Ft(e,No),xl=e=>Ft(e,jo),ys=e=>Ft(e,ko,!0),It=(e,s,t)=>{const n=bo.exec(e);return n?n[1]?s(n[1]):t(n[2]):!1},Ft=(e,s,t=!1)=>{const n=vo.exec(e);return n?n[1]?s(n[1]):t:!1},So=e=>e==="position"||e==="percentage",jo=e=>e==="image"||e==="url",No=e=>e==="length"||e==="size"||e==="bg-size",_o=e=>e==="length",yl=e=>e==="number",bl=e=>e==="family-name",ko=e=>e==="shadow",vl=()=>{const e=Se("color"),s=Se("font"),t=Se("text"),n=Se("font-weight"),o=Se("tracking"),a=Se("leading"),i=Se("breakpoint"),c=Se("container"),l=Se("spacing"),h=Se("radius"),u=Se("shadow"),d=Se("inset-shadow"),p=Se("text-shadow"),g=Se("drop-shadow"),f=Se("blur"),x=Se("perspective"),y=Se("aspect"),P=Se("ease"),z=Se("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...I(),W,G],V=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],N=()=>[W,G,l],B=()=>[St,"full","auto",...N()],X=()=>[rt,"none","subgrid",W,G],b=()=>["auto",{span:["full",rt,W,G]},rt,W,G],A=()=>[rt,"auto",W,G],U=()=>["auto","min","max","fr",W,G],_=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...N()],ee=()=>[St,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],D=()=>[e,W,G],Y=()=>[...I(),Pn,Rn,{position:[W,G]}],fe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",gl,ml,{size:[W,G]}],ge=()=>[sr,Vt,mt],re=()=>["","none","full",h,W,G],he=()=>["",ne,Vt,mt],pe=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],w=()=>[ne,sr,Pn,Rn],S=()=>["","none",f,W,G],C=()=>["none",ne,W,G],v=()=>["none",ne,W,G],H=()=>[ne,W,G],ie=()=>[St,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xe],breakpoint:[Xe],color:[cl],container:[Xe],"drop-shadow":[Xe],ease:["in","out","in-out"],font:[hl],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xe],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xe],shadow:[Xe],spacing:["px",ne],text:[Xe],"text-shadow":[Xe],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",St,G,W,y]}],container:["container"],columns:[{columns:[ne,G,W,c]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[rt,"auto",W,G]}],basis:[{basis:[St,"full","auto",c,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ne,St,"auto","initial","none",G]}],grow:[{grow:["",ne,W,G]}],shrink:[{shrink:["",ne,W,G]}],order:[{order:[rt,"first","last","none",W,G]}],"grid-cols":[{"grid-cols":X()}],"col-start-end":[{col:b()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":X()}],"row-start-end":[{row:b()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[..._(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",..._()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":_()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[c,"screen",...ee()]}],"min-w":[{"min-w":[c,"screen","none",...ee()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[i]},...ee()]}],h:[{h:["screen","lh",...ee()]}],"min-h":[{"min-h":["screen","lh","none",...ee()]}],"max-h":[{"max-h":["screen","lh",...ee()]}],"font-size":[{text:["base",t,Vt,mt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,W,rr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",sr,G]}],"font-family":[{font:[fl,G,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,W,G]}],"line-clamp":[{"line-clamp":[ne,"none",W,rr]}],leading:[{leading:[a,...N()]}],"list-image":[{"list-image":["none",W,G]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",W,G]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[ne,"from-font","auto",W,mt]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[ne,"auto",W,G]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",W,G]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",W,G]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:fe()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},rt,W,G],radial:["",W,G],conic:[rt,W,G]},xl,pl]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:ge()}],"gradient-via-pos":[{via:ge()}],"gradient-to-pos":[{to:ge()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ne,W,G]}],"outline-w":[{outline:["",ne,Vt,mt]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",u,ys,xs]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",d,ys,xs]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[ne,mt]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",p,ys,xs]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[ne,W,G]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":w()}],"mask-image-linear-to-pos":[{"mask-linear-to":w()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":w()}],"mask-image-t-to-pos":[{"mask-t-to":w()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":w()}],"mask-image-r-to-pos":[{"mask-r-to":w()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":w()}],"mask-image-b-to-pos":[{"mask-b-to":w()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":w()}],"mask-image-l-to-pos":[{"mask-l-to":w()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":w()}],"mask-image-x-to-pos":[{"mask-x-to":w()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":w()}],"mask-image-y-to-pos":[{"mask-y-to":w()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[W,G]}],"mask-image-radial-from-pos":[{"mask-radial-from":w()}],"mask-image-radial-to-pos":[{"mask-radial-to":w()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":w()}],"mask-image-conic-to-pos":[{"mask-conic-to":w()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:fe()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",W,G]}],filter:[{filter:["","none",W,G]}],blur:[{blur:S()}],brightness:[{brightness:[ne,W,G]}],contrast:[{contrast:[ne,W,G]}],"drop-shadow":[{"drop-shadow":["","none",g,ys,xs]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",ne,W,G]}],"hue-rotate":[{"hue-rotate":[ne,W,G]}],invert:[{invert:["",ne,W,G]}],saturate:[{saturate:[ne,W,G]}],sepia:[{sepia:["",ne,W,G]}],"backdrop-filter":[{"backdrop-filter":["","none",W,G]}],"backdrop-blur":[{"backdrop-blur":S()}],"backdrop-brightness":[{"backdrop-brightness":[ne,W,G]}],"backdrop-contrast":[{"backdrop-contrast":[ne,W,G]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ne,W,G]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ne,W,G]}],"backdrop-invert":[{"backdrop-invert":["",ne,W,G]}],"backdrop-opacity":[{"backdrop-opacity":[ne,W,G]}],"backdrop-saturate":[{"backdrop-saturate":[ne,W,G]}],"backdrop-sepia":[{"backdrop-sepia":["",ne,W,G]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",W,G]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ne,"initial",W,G]}],ease:[{ease:["linear","initial",P,W,G]}],delay:[{delay:[ne,W,G]}],animate:[{animate:["none",z,W,G]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,W,G]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:C()}],"rotate-x":[{"rotate-x":C()}],"rotate-y":[{"rotate-y":C()}],"rotate-z":[{"rotate-z":C()}],scale:[{scale:v()}],"scale-x":[{"scale-x":v()}],"scale-y":[{"scale-y":v()}],"scale-z":[{"scale-z":v()}],"scale-3d":["scale-3d"],skew:[{skew:H()}],"skew-x":[{"skew-x":H()}],"skew-y":[{"skew-y":H()}],transform:[{transform:[W,G,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ie()}],"translate-x":[{"translate-x":ie()}],"translate-y":[{"translate-y":ie()}],"translate-z":[{"translate-z":ie()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",W,G]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",W,G]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[ne,Vt,mt,rr]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wl=tl(vl);function Ce(...e){return wl(Vc(e))}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jl=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,t,n)=>n?n.toUpperCase():t.toLowerCase()),Mn=e=>{const s=jl(e);return s.charAt(0).toUpperCase()+s.slice(1)},Co=(...e)=>e.filter((s,t,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===t).join(" ").trim(),Nl=e=>{for(const s in e)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=m.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:i,...c},l)=>m.createElement("svg",{ref:l,..._l,width:s,height:s,stroke:e,strokeWidth:n?Number(t)*24/Number(s):t,className:Co("lucide",o),...!a&&!Nl(c)&&{"aria-hidden":"true"},...c},[...i.map(([h,u])=>m.createElement(h,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(e,s)=>{const t=m.forwardRef(({className:n,...o},a)=>m.createElement(kl,{ref:a,iconNode:s,className:Co(`lucide-${Sl(Mn(e))}`,`lucide-${e}`,n),...o}));return t.displayName=Mn(e),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],En=Z("activity",Cl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pl=Z("arrow-left",Rl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],es=Z("box",Ml);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],An=Z("camera",El);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ro=Z("chart-column",Al);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rs=Z("circle-check-big",Tl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Il=Z("circle-x",Ll);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yt=Z("circle",Fl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ol=Z("clock",Dl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5v14a9 3 0 0 0 18 0V5",key:"aqi0yr"}]],Po=Z("cylinder",zl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vr=Z("download",$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bl=Z("eye-off",Vl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wr=Z("eye",Ul);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Wl=Z("folder-open",Gl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],wr=Z("folder",Hl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Hr=Z("grid-3x3",Kl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Mo=Z("layers",ql);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Cs=Z("lightbulb",Yl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Xl=Z("list",Ql);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ns=Z("loader-circle",Jl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],ed=Z("lock-open",Zl);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sd=Z("lock",td);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M5 12h14",key:"1ays0h"}]],nt=Z("minus",rd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],od=Z("mouse-pointer",nd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],Eo=Z("move-3d",ad);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],cd=Z("palette",id);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],dd=Z("panel-left-close",ld);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],hd=Z("panel-left",ud);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ue=Z("plus",md);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fd=Z("refresh-cw",pd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Kr=Z("rocket",gd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yd=Z("rotate-ccw",xd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],vd=Z("rotate-cw",bd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qr=Z("save",wd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],jd=Z("scale",Sd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_d=Z("search",Nd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pt=Z("settings",kd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],Rd=Z("shapes",Cd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Tn=Z("shield",Pd);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Os=Z("test-tube",Md);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],os=Z("trash-2",Ed);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bt=Z("triangle-alert",Ad);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ld=Z("upload",Td);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],nr=Z("users",Id);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Dd=Z("zap",Fd),oe=m.forwardRef(({className:e,variant:s="default",size:t="default",...n},o)=>r.jsx("button",{className:Ce("inline-flex items-center justify-center whitespace-nowrap font-medium focus-ring transition-smooth","disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 shadow-md":s==="default"||s==="primary","bg-surface text-text border border-muted hover:bg-muted active:bg-muted/80":s==="surface","text-text hover:bg-muted active:bg-muted/80":s==="ghost","bg-danger text-primary-foreground hover:bg-danger/90 active:bg-danger/80 shadow-md":s==="danger"||s==="destructive","border border-primary text-primary hover:bg-primary hover:text-primary-foreground active:bg-primary/80":s==="outline","text-primary underline-offset-4 hover:underline":s==="link","bg-secondary text-secondary-foreground hover:bg-secondary/80":s==="secondary"},{"h-8 px-3 text-sm rounded-sm":t==="sm","h-10 px-4 text-sm rounded-md":t==="default"||t==="md","h-12 px-6 text-base rounded-lg":t==="lg","h-10 w-10 rounded-md":t==="icon"},e),ref:o,...n}));oe.displayName="Button";const Ao=({className:e})=>{const[s,t]=m.useState(!1);m.useEffect(()=>{const o=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,i=o==="dark"||o===null&&a;t(i),i?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);const n=()=>{const o=!s;t(o),o?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return r.jsx(oe,{variant:"ghost",size:"icon",onClick:n,className:Ce("focus-ring",e),"aria-label":s?"Switch to light mode":"Switch to dark mode",children:s?r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})},Od=[{name:"Design",href:"/design",icon:Kr},{name:"CAD Studio",href:"/cad",icon:pt},{name:"Analysis",href:"/analysis",icon:Ro},{name:"Collections",href:"/collections",icon:Wl}];function zd(){const e=hc();return r.jsxs("div",{className:"min-h-screen bg-background text-foreground space-gradient",children:[r.jsx("nav",{className:"nav-container shadow-lg",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs(Fs,{to:"/design",className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(Kr,{className:"w-5 h-5 text-white"})}),r.jsx("div",{children:r.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-primary to-blue-400 bg-clip-text text-transparent",children:"NASA Habitat Designer"})})]})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex items-center space-x-8",children:Od.map(s=>{const t=s.icon,n=e.pathname===s.href||s.href==="/design"&&e.pathname==="/";return r.jsxs(Fs,{to:s.href,className:Ce("inline-flex items-center gap-2 px-1 pt-1 text-sm font-medium transition-colors",n?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:border-border"),children:[r.jsx(t,{className:"w-4 h-4"}),s.name]},s.name)})}),r.jsx(Ao,{})]})]})})}),r.jsx("main",{className:"flex-1 bg-background",children:r.jsx(co,{})})]})}const xe=m.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:Ce("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));xe.displayName="Card";const Ne=m.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:Ce("flex flex-col space-y-1.5 p-6",e),...s}));Ne.displayName="CardHeader";const _e=m.forwardRef(({className:e,...s},t)=>r.jsx("h3",{ref:t,className:Ce("text-2xl font-semibold leading-none tracking-tight",e),...s}));_e.displayName="CardTitle";const $d=m.forwardRef(({className:e,...s},t)=>r.jsx("p",{ref:t,className:Ce("text-sm text-muted-foreground",e),...s}));$d.displayName="CardDescription";const ye=m.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:Ce("p-6 pt-0",e),...s}));ye.displayName="CardContent";const Vd=m.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:Ce("flex items-center p-6 pt-0",e),...s}));Vd.displayName="CardFooter";const Sr=m.forwardRef(({className:e,type:s,...t},n)=>r.jsx("input",{type:s,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Sr.displayName="Input";const Kt=m.forwardRef(({className:e,...s},t)=>r.jsx("label",{ref:t,className:Ce("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));Kt.displayName="Label";const bs=[{name:"Falcon 9",inner_diameter_m:5.2,inner_height_m:13.1,shape:"OGIVE"},{name:"Falcon Heavy (5.2m)",inner_diameter_m:5.2,inner_height_m:13.1,shape:"OGIVE"},{name:"New Glenn",inner_diameter_m:7,inner_height_m:22,shape:"OGIVE"},{name:"SLS Blk-1",inner_diameter_m:8.4,inner_height_m:27,shape:"CYLINDRICAL"},{name:"Starship (cargo bay)",inner_diameter_m:8,inner_height_m:18,shape:"CYLINDRICAL"}],Bt=[{type:"CREW_SLEEP",label:"Crew Bunk",defaultSize:{w_m:2,l_m:2.2,h_m:2.1},icon:"bed"},{type:"HYGIENE",label:"Hygiene Bay",defaultSize:{w_m:2,l_m:2,h_m:2.2},icon:"shower"},{type:"WASTE",label:"Waste Compartment",defaultSize:{w_m:1.8,l_m:1.8,h_m:2.2},icon:"trash"},{type:"EXERCISE",label:"Exercise (ARED)",defaultSize:{w_m:3,l_m:4,h_m:2.5},icon:"dumbbell"},{type:"FOOD_PREP",label:"Galley",defaultSize:{w_m:3,l_m:3,h_m:2.2},icon:"utensils"},{type:"ECLSS",label:"ECLSS Pallets",defaultSize:{w_m:3,l_m:2.5,h_m:2.3},icon:"fan"},{type:"MEDICAL",label:"Med Bay",defaultSize:{w_m:2.5,l_m:2.5,h_m:2.3},icon:"first-aid"},{type:"MAINTENANCE",label:"Maint. Bench",defaultSize:{w_m:2.5,l_m:2.5,h_m:2.3},icon:"wrench"},{type:"STOWAGE",label:"Stowage Rack",defaultSize:{w_m:2.5,l_m:3.5,h_m:2.3},icon:"boxes"},{type:"RECREATION",label:"Recreation",defaultSize:{w_m:2,l_m:2,h_m:2.2},icon:"gamepad"},{type:"WORKSTATION",label:"Workstation",defaultSize:{w_m:2.2,l_m:2.2,h_m:2.2},icon:"monitor"},{type:"AIRLOCK",label:"Airlock",defaultSize:{w_m:2,l_m:2.2,h_m:2.3},icon:"door"},{type:"GLOVEBOX",label:"Glovebox",defaultSize:{w_m:1.4,l_m:1.8,h_m:2},icon:"flask"},{type:"TRASH_MGMT",label:"Trash Mgmt",defaultSize:{w_m:1.5,l_m:2,h_m:2},icon:"recycle"},{type:"COMMON_AREA",label:"Common Area",defaultSize:{w_m:3,l_m:3,h_m:2.2},icon:"users"},{type:"CUSTOM_CAD",label:"Custom CAD Module",defaultSize:{w_m:2,l_m:2,h_m:2},icon:"settings"}],Bd="https://amine759--nasa-habitat-validator-api.modal.run",Ud="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9";class wt{static async makeRequest(s,t){const n=await fetch(`${Bd}${s}`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":Ud},body:JSON.stringify(t)});if(!n.ok){let o=`NASA Validation API error: ${n.status} ${n.statusText}`;try{const a=await n.json();a.detail&&(o=`NASA API: ${a.detail}`)}catch{}throw new Error(o)}return n.json()}static async validateHabitat(s){return this.makeRequest("/agent",s)}static convertToValidationPayload(s,t,n){return{scenario:{crew_size:t.crew_size||4,mission_duration_days:t.mission_duration_days||180,destination:t.destination||"MARS_SURFACE",fairing:t.fairing||{name:"Falcon 9",inner_diameter_m:5.2,inner_height_m:13.1,shape:"CONE"}},habitat:{shape:n.shape||"CYLINDER",levels:n.levels||1,dimensions:{diameter_m:n.dimensions?.diameter_m||6.5,height_m:n.dimensions?.height_m||12},pressurized_volume_m3:n.pressurized_volume_m3||400,net_habitable_volume_m3:n.net_habitable_volume_m3||300},modules:s.map(o=>({id:o.id,type:o.type,level:o.level||0,position:[o.position[0]||0,o.position[1]||0],size:{w_m:o.size?.w_m||2,l_m:o.size?.l_m||2,h_m:o.size?.h_m||2.2},rotation_deg:o.rotation_deg||0,equipment:o.equipment||[]})),version:"1.0.0"}}static getValidationSummary(s){const t=s.length,n=s.filter(a=>a.valid).length,o=t-n;return{total:t,valid:n,invalid:o,validationScore:t>0?Math.round(n/t*100):0}}static categorizeResults(s){return{global_rules:s.filter(n=>n.rule.startsWith("global_rules")),habitat_rules:s.filter(n=>n.rule.startsWith("habitat_rules")),destination_rules:s.filter(n=>n.rule.startsWith("destination_rules")),functional_rules:s.filter(n=>n.rule.startsWith("functional_rules"))}}}const De=m.forwardRef(({className:e,variant:s="default",...t},n)=>r.jsx("div",{className:Ce("inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",{"bg-muted text-text ring-muted":s==="default"||s==="neutral","status-green ring-success/30":s==="success","status-amber ring-warning/30":s==="warning","status-red ring-danger/30":s==="danger"||s==="destructive","bg-secondary text-secondary-foreground ring-secondary":s==="secondary","border border-primary text-primary bg-transparent ring-primary/30":s==="outline"},e),ref:n,...t}));De.displayName="Badge";const vs=({rule:e})=>{const s=e.valid,t=s?rs:Il,n=s?"text-green-600":"text-red-600";return r.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[r.jsx(t,{className:`w-5 h-5 mt-0.5 ${n}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-sm",children:e.rule}),r.jsx(De,{variant:s?"default":"destructive",children:s?"PASS":"FAIL"})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.explanation})]})]})},zs=({results:e})=>{const s=wt.getValidationSummary(e.results),t=wt.categorizeResults(e.results),n=e.isRealAPIResult!==!1,o=e.apiSource||"NASA Habitat Validation API",a=e.apiError;return r.jsxs("div",{className:"space-y-4",children:[r.jsx(xe,{className:`border-2 ${n?"border-green-500/50 bg-green-50 dark:bg-green-900/20":"border-yellow-500/50 bg-yellow-50 dark:bg-yellow-900/20"}`,children:r.jsx(ye,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[n?r.jsx(rs,{className:"w-5 h-5 text-green-600"}):r.jsx(bt,{className:"w-5 h-5 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${n?"text-green-800 dark:text-green-200":"text-yellow-800 dark:text-yellow-200"}`,children:n?" Live NASA API Results":" Using Local Fallback"}),r.jsxs("p",{className:`text-sm ${n?"text-green-600 dark:text-green-300":"text-yellow-600 dark:text-yellow-300"}`,children:["Source: ",o,a&&` (Error: ${a})`]})]})]})})}),r.jsxs(xe,{children:[r.jsx(Ne,{className:"pb-3",children:r.jsxs(_e,{className:"flex items-center space-x-2",children:[r.jsx(bt,{className:"w-5 h-5"}),r.jsx("span",{children:"NASA Habitat Validation Results"})]})}),r.jsxs(ye,{children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.total}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Rules"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.valid}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Passing"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.invalid}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Failing"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[s.validationScore,"%"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Score"})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${s.validationScore}%`}})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.global_rules.length>0&&r.jsxs(xe,{children:[r.jsx(Ne,{className:"pb-2",children:r.jsx(_e,{className:"text-lg",children:"Global Rules"})}),r.jsx(ye,{className:"space-y-2",children:t.global_rules.map((i,c)=>r.jsx(vs,{rule:i},c))})]}),t.habitat_rules.length>0&&r.jsxs(xe,{children:[r.jsx(Ne,{className:"pb-2",children:r.jsx(_e,{className:"text-lg",children:"Habitat Rules"})}),r.jsx(ye,{className:"space-y-2",children:t.habitat_rules.map((i,c)=>r.jsx(vs,{rule:i},c))})]}),t.destination_rules.length>0&&r.jsxs(xe,{children:[r.jsx(Ne,{className:"pb-2",children:r.jsx(_e,{className:"text-lg",children:"Destination Rules"})}),r.jsx(ye,{className:"space-y-2",children:t.destination_rules.map((i,c)=>r.jsx(vs,{rule:i},c))})]}),t.functional_rules.length>0&&r.jsxs(xe,{children:[r.jsx(Ne,{className:"pb-2",children:r.jsx(_e,{className:"text-lg",children:"Functional Rules"})}),r.jsx(ye,{className:"space-y-2",children:t.functional_rules.map((i,c)=>r.jsx(vs,{rule:i},c))})]})]}),e.suggestions.length>0&&r.jsxs(xe,{children:[r.jsx(Ne,{className:"pb-2",children:r.jsxs(_e,{className:"flex items-center space-x-2",children:[r.jsx(Cs,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{children:"Improvement Suggestions"})]})}),r.jsx(ye,{children:r.jsx("ul",{className:"space-y-2",children:e.suggestions.map((i,c)=>r.jsxs("li",{className:"flex items-start space-x-2",children:[r.jsx("span",{className:"text-yellow-500 mt-1",children:""}),r.jsx("span",{className:"text-sm",children:i})]},c))})})]})]})},Gd="habitat-designer-db",Wd=1,Qe="designs",$s="customShapes";let Ge=null;async function To(){return new Promise((e,s)=>{const t=indexedDB.open(Gd,Wd);t.onerror=()=>s(t.error),t.onsuccess=()=>{Ge=t.result,e()},t.onupgradeneeded=()=>{const n=t.result;if(!n.objectStoreNames.contains(Qe)){const o=n.createObjectStore(Qe,{keyPath:"id"});o.createIndex("name","name",{unique:!1}),o.createIndex("createdAt","createdAt",{unique:!1}),o.createIndex("tags","tags",{unique:!1,multiEntry:!0})}if(!n.objectStoreNames.contains($s)){const o=n.createObjectStore($s,{keyPath:"id"});o.createIndex("name","name",{unique:!1}),o.createIndex("category","category",{unique:!1})}}})}async function Yr(e){if(!Ge)throw new Error("Database not initialized");const s=`design_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,t=new Date,n={...e,id:s,createdAt:t,updatedAt:t};return new Promise((o,a)=>{const l=Ge.transaction([Qe],"readwrite").objectStore(Qe).add(n);l.onsuccess=()=>o(s),l.onerror=()=>a(l.error)})}async function Hd(e){if(!Ge)throw new Error("Database not initialized");return new Promise((s,t)=>{const a=Ge.transaction([Qe],"readonly").objectStore(Qe).get(e);a.onsuccess=()=>s(a.result||null),a.onerror=()=>t(a.error)})}async function Kd(){if(!Ge)throw new Error("Database not initialized");return new Promise((e,s)=>{const o=Ge.transaction([Qe],"readonly").objectStore(Qe).getAll();o.onsuccess=()=>{const a=o.result;a.sort((i,c)=>c.updatedAt.getTime()-i.updatedAt.getTime()),e(a)},o.onerror=()=>s(o.error)})}async function qd(e){if(!Ge)throw new Error("Database not initialized");return new Promise((s,t)=>{const a=Ge.transaction([Qe],"readwrite").objectStore(Qe).delete(e);a.onsuccess=()=>s(),a.onerror=()=>t(a.error)})}async function Lo(e){if(!Ge)throw new Error("Database not initialized");const s=`shape_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,t={...e,id:s,createdAt:new Date};return new Promise((n,o)=>{const c=Ge.transaction([$s],"readwrite").objectStore($s).add(t);c.onsuccess=()=>n(s),c.onerror=()=>o(c.error)})}async function Yd(e){const s=await Hd(e);if(!s)throw new Error("Design not found");return JSON.stringify(s,null,2)}async function Qd(e){try{const s=JSON.parse(e),{id:t,createdAt:n,updatedAt:o,...a}=s;return await Yr({...a,name:`${s.name} (Imported)`})}catch{throw new Error("Invalid design file format")}}To().catch(console.error);function Xd({currentLayout:e,onLoadDesign:s,onSaveSuccess:t}){const[n,o]=m.useState([]),[a,i]=m.useState([]),[c,l]=m.useState(""),[h,u]=m.useState(""),[d,p]=m.useState("grid"),[g,f]=m.useState(!0),[x,y]=m.useState(!1),[P,z]=m.useState(!1),[E,I]=m.useState({name:"",description:"",tags:[],newTag:""});m.useEffect(()=>{K()},[]),m.useEffect(()=>{let _=n;c&&(_=_.filter(L=>L.name.toLowerCase().includes(c.toLowerCase())||L.description?.toLowerCase().includes(c.toLowerCase())||L.tags.some(O=>O.toLowerCase().includes(c.toLowerCase())))),h&&(_=_.filter(L=>L.tags.includes(h))),i(_)},[n,c,h]);const K=async()=>{f(!0);try{const _=await Kd();o(_)}catch(_){console.error("Failed to load designs:",_)}finally{f(!1)}},V=()=>{const _=new Set;return n.forEach(L=>{L.tags.forEach(O=>_.add(O))}),Array.from(_).sort()},M=async()=>{if(!e||!E.name.trim()){alert("Please enter a design name");return}y(!0);try{const _=await Yr({name:E.name,description:E.description,layout:e,tags:E.tags});await K(),z(!1),I({name:"",description:"",tags:[],newTag:""}),t&&t(_),alert("Design saved successfully!")}catch(_){console.error("Failed to save design:",_),alert("Failed to save design. Please try again.")}finally{y(!1)}},N=async _=>{if(confirm("Are you sure you want to delete this design?"))try{await qd(_),await K()}catch(L){console.error("Failed to delete design:",L),alert("Failed to delete design. Please try again.")}},B=async _=>{try{const L=await Yd(_),O=n.find(fe=>fe.id===_),ee=new Blob([L],{type:"application/json"}),D=URL.createObjectURL(ee),Y=document.createElement("a");Y.href=D,Y.download=`${O?.name||"habitat-design"}.json`,Y.click(),URL.revokeObjectURL(D)}catch(L){console.error("Failed to export design:",L),alert("Failed to export design. Please try again.")}},X=_=>{const L=_.target.files?.[0];if(!L)return;const O=new FileReader;O.onload=async ee=>{try{const D=ee.target?.result;await Qd(D),await K(),alert("Design imported successfully!")}catch(D){console.error("Failed to import design:",D),alert("Failed to import design. Please check the file format.")}},O.readAsText(L)},b=()=>{E.newTag.trim()&&!E.tags.includes(E.newTag.trim())&&I(_=>({..._,tags:[..._.tags,_.newTag.trim()],newTag:""}))},A=_=>{I(L=>({...L,tags:L.tags.filter(O=>O!==_)}))},U=_=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(_));return r.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[r.jsx("div",{className:"bg-black/20 border-b border-purple-500/20 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:r.jsx(wr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-300 via-pink-300 to-purple-300 bg-clip-text text-transparent",children:"Design Collections"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Manage your saved habitat designs"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"file",accept:".json",onChange:X,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),r.jsxs(oe,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ld,{className:"w-4 h-4 mr-2"}),"Import"]})]}),e&&r.jsxs(oe,{onClick:()=>z(!0),className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(qr,{className:"w-4 h-4 mr-2"}),"Save Current"]})]})]})}),r.jsx("div",{className:"bg-black/10 border-b border-purple-500/20 p-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(_d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search designs...",value:c,onChange:_=>l(_.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400"})]}),r.jsxs("select",{value:h,onChange:_=>u(_.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",children:[r.jsx("option",{value:"",children:"All Tags"}),V().map(_=>r.jsx("option",{value:_,children:_},_))]}),r.jsxs("div",{className:"flex items-center gap-1 bg-gray-800/30 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded ${d==="grid"?"bg-blue-600":"hover:bg-gray-700/50"}`,children:r.jsx(Hr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded ${d==="list"?"bg-blue-600":"hover:bg-gray-700/50"}`,children:r.jsx(Xl,{className:"w-4 h-4"})})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-400",children:"Loading designs..."})}):a.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(wr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("div",{className:"text-gray-400 mb-2",children:"No designs found"}),r.jsx("p",{className:"text-sm text-gray-500",children:c||h?"Try adjusting your filters":"Create your first habitat design"})]})}):r.jsx("div",{className:d==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-2",children:a.map(_=>r.jsxs("div",{className:`bg-gray-800/30 border border-gray-700/30 rounded-lg p-4 hover:bg-gray-700/30 transition-all ${d==="list"?"flex items-center justify-between":""}`,children:[r.jsxs("div",{className:d==="list"?"flex-1":"",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-lg text-white truncate",children:_.name}),d==="grid"&&r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(oe,{size:"sm",variant:"outline",onClick:()=>s?.(_),children:r.jsx(Wr,{className:"w-3 h-3"})})})]}),_.description&&r.jsx("p",{className:"text-sm text-gray-300 mb-3 line-clamp-2",children:_.description}),_.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:_.tags.map(L=>r.jsx("span",{className:"px-2 py-1 bg-purple-600/30 text-purple-200 text-xs rounded-full",children:L},L))}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ol,{className:"w-3 h-3"}),U(_.updatedAt)]}),r.jsxs("div",{children:[_.layout.modules.length," modules"]})]}),d==="grid"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(oe,{size:"sm",onClick:()=>s?.(_),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Load Design"}),r.jsx(oe,{size:"sm",variant:"outline",onClick:()=>B(_.id),children:r.jsx(vr,{className:"w-3 h-3"})}),r.jsx(oe,{size:"sm",variant:"outline",onClick:()=>N(_.id),className:"hover:bg-red-600/20",children:r.jsx(os,{className:"w-3 h-3"})})]})]}),d==="list"&&r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx(oe,{size:"sm",onClick:()=>s?.(_),children:"Load"}),r.jsx(oe,{size:"sm",variant:"outline",onClick:()=>B(_.id),children:r.jsx(vr,{className:"w-3 h-3"})}),r.jsx(oe,{size:"sm",variant:"outline",onClick:()=>N(_.id),className:"hover:bg-red-600/20",children:r.jsx(os,{className:"w-3 h-3"})})]})]},_.id))})}),P&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Design"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Design Name"}),r.jsx("input",{type:"text",value:E.name,onChange:_=>I(L=>({...L,name:_.target.value})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",placeholder:"Enter design name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),r.jsx("textarea",{value:E.description,onChange:_=>I(L=>({...L,description:_.target.value})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white resize-none",rows:3,placeholder:"Describe your design"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:E.newTag,onChange:_=>I(L=>({...L,newTag:_.target.value})),onKeyPress:_=>_.key==="Enter"&&b(),className:"flex-1 px-3 py-1 bg-gray-800 border border-gray-600 rounded text-sm",placeholder:"Add tag"}),r.jsx(oe,{size:"sm",onClick:b,children:r.jsx(Ue,{className:"w-3 h-3"})})]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:E.tags.map(_=>r.jsxs("span",{className:"px-2 py-1 bg-purple-600/30 text-purple-200 text-xs rounded-full flex items-center gap-1",children:[_,r.jsx("button",{onClick:()=>A(_),className:"hover:text-red-300",children:""})]},_))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx(oe,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),r.jsx(oe,{onClick:M,disabled:x,children:x?"Saving...":"Save Design"})]})]})})]})}const Ut=[{id:"rectangular_module",name:"Rectangular Module",type:"basic",icon:r.jsx(es,{className:"w-5 h-5"}),defaultParams:{width:3,height:2.5,depth:2,wireframe:!1,hasWalls:!1,materialType:"solid",transparency:.8},description:"Standard rectangular habitat module",category:"habitat"},{id:"wireframe_structure",name:"Wireframe Structure",type:"basic",icon:r.jsx(es,{className:"w-5 h-5"}),defaultParams:{width:4,height:3,depth:3,wireframe:!0,frameWidth:.1,frameSpacing:.5,materialType:"wireframe",transparency:1},description:"Structural wireframe for construction",category:"structural"},{id:"walled_room",name:"Room with Walls",type:"composite",icon:r.jsx(es,{className:"w-5 h-5"}),defaultParams:{width:4,height:2.8,depth:4,hasWalls:!0,wallThickness:.2,wallHeight:2.5,materialType:"solid",transparency:.9},description:"Enclosed room with separate walls",category:"habitat"},{id:"cylindrical_module",name:"Cylindrical Module",type:"basic",icon:r.jsx(Po,{className:"w-5 h-5"}),defaultParams:{width:2.5,height:3,depth:2.5,radius:1.25,segments:16,materialType:"solid",transparency:.8},description:"Pressurized cylindrical module",category:"habitat"},{id:"glass_dome",name:"Glass Dome",type:"basic",icon:r.jsx(yt,{className:"w-5 h-5"}),defaultParams:{width:4,height:2,depth:4,radius:2,segments:16,materialType:"glass",transparency:.3},description:"Transparent observation dome",category:"habitat"},{id:"metal_frame",name:"Metal Frame",type:"parametric",icon:r.jsx(yt,{className:"w-5 h-5"}),defaultParams:{width:3,height:3,depth:3,wireframe:!0,frameWidth:.15,materialType:"metal",transparency:1},description:"Heavy duty metal framework",category:"structural"},{id:"airlock_ring",name:"Airlock Ring",type:"parametric",icon:r.jsx(yt,{className:"w-5 h-5"}),defaultParams:{width:2,height:.5,depth:2,radius:1,tubularSegments:8,materialType:"metal",transparency:.8},description:"Ring-shaped airlock chamber",category:"structural"},{id:"composite_lab",name:"Multi-Level Lab",type:"composite",icon:r.jsx(Mo,{className:"w-5 h-5"}),defaultParams:{width:4,height:3.5,depth:3,segments:8,hasWalls:!0,wallThickness:.15,materialType:"solid",transparency:.8},description:"Complex laboratory with multiple levels and walls",category:"habitat"}];function Ln(){const[e,s]=m.useState(Ut[0]),[t,n]=m.useState(Ut[0].defaultParams),[o,a]=m.useState(""),[i,c]=m.useState(""),[l,h]=m.useState(!1),[u,d]=m.useState(null),p=m.useRef(null),g=m.useRef(null),f=m.useRef(null),x=m.useRef(null),y=m.useRef(null),P=m.useRef(null);m.useEffect(()=>{if(!p.current)return;const b=new kr;b.background=new Rt(657946),g.current=b;const A=new On(75,400/300,.1,1e3);A.position.set(5,3,5),A.lookAt(0,0,0),x.current=A;const U=new Cr({antialias:!0});U.setSize(400,300),U.shadowMap.enabled=!0,U.shadowMap.type=Rr,p.current.appendChild(U.domElement),f.current=U;const _=new Pr(4210752,.6);b.add(_);const L=new Rs(16777215,.8);L.position.set(10,10,5),L.castShadow=!0,b.add(L);const O=new Mr(10,20,3355443,3355443);b.add(O);const ee=new ma(2);return b.add(ee),()=>{P.current&&cancelAnimationFrame(P.current),p.current&&U.domElement&&p.current.removeChild(U.domElement),U.dispose()}},[]);const z=m.useCallback(()=>{if(!g.current||!f.current||!x.current)return;y.current&&(g.current.remove(y.current),y.current.geometry&&y.current.geometry.dispose(),Array.isArray(y.current.material)?y.current.material.forEach(O=>O.dispose()):y.current.material&&y.current.material.dispose());const b=new Er,A=E(),U=I("main"),_=new Ee(A,U);_.position.y=t.height/2,b.add(_),t.hasWalls&&K().forEach(ee=>b.add(ee)),t.wireframe&&e.id.includes("frame")&&V().forEach(ee=>b.add(ee)),b.castShadow=!0,b.receiveShadow=!0,g.current.add(b),y.current=b;const L=()=>{y.current&&(y.current.rotation.y+=.005),f.current&&g.current&&x.current&&f.current.render(g.current,x.current),P.current=requestAnimationFrame(L)};P.current&&cancelAnimationFrame(P.current),L()},[e,t]),E=m.useCallback(()=>{const{width:b,height:A,depth:U,radius:_,segments:L}=t;switch(e.id){case"rectangular_module":case"wireframe_structure":case"walled_room":return new de(b,A,U);case"cylindrical_module":return new Ct(_||b/2,_||b/2,A,L||16);case"glass_dome":return new Ar(_||b/2,L||16,(L||16)/2,0,Math.PI*2,0,Math.PI/2);case"metal_frame":return new de(b,A,U);case"airlock_ring":return new zn(_||b/2,A/4,L||8,t.tubularSegments||16);case"composite_lab":return new de(b,A*.7,U);default:return new de(b,A,U)}},[e,t]),I=m.useCallback(b=>{const U={color:b==="wall"?8947848:b==="frame"?11184810:4886754,transparent:!0,opacity:t.transparency||.8};switch(t.materialType){case"wireframe":return new Vn({...U,wireframe:!0,color:65280,opacity:1});case"glass":return new $n({...U,transmission:.9,roughness:.1,metalness:0,clearcoat:1,clearcoatRoughness:.1,color:8965375,opacity:t.transparency||.3});case"metal":return new Wt({...U,metalness:.8,roughness:.2,color:10066329});default:return new Je(U)}},[t]),K=m.useCallback(()=>{const b=[],{width:A,depth:U,wallThickness:_=.2,wallHeight:L}=t,O=L||t.height,ee=I("wall"),D=new de(A,O,_),Y=new Ee(D,ee);Y.position.set(0,O/2,U/2),b.push(Y);const fe=new de(A,O,_),q=new Ee(fe,ee);q.position.set(0,O/2,-U/2),b.push(q);const ge=new de(_,O,U),re=new Ee(ge,ee);re.position.set(-A/2,O/2,0),b.push(re);const he=new de(_,O,U),pe=new Ee(he,ee);return pe.position.set(A/2,O/2,0),b.push(pe),b},[t,I]),V=m.useCallback(()=>{const b=[],{width:A,height:U,depth:_,frameWidth:L=.1,frameSpacing:O=.5}=t,ee=I("frame");for(let D=-A/2;D<=A/2;D+=O)for(let Y=-_/2;Y<=_/2;Y+=O)if(Math.abs(D)===A/2||Math.abs(Y)===_/2){const fe=new de(L,U,L),q=new Ee(fe,ee);q.position.set(D,U/2,Y),b.push(q)}for(let D=-A/2;D<=A/2;D+=O){const Y=new de(L,L,_),fe=new Ee(Y,ee);fe.position.set(D,U,0),b.push(fe)}for(let D=-_/2;D<=_/2;D+=O){const Y=new de(A,L,L),fe=new Ee(Y,ee);fe.position.set(0,U,D),b.push(fe)}return b},[t,I]);m.useEffect(()=>{z()},[z]);const M=(b,A)=>{n(U=>({...U,[b]:A}))},N=b=>{s(b),n(b.defaultParams),a(b.name),c(b.description)},B=async()=>{if(o.trim()){h(!0),d(null);try{const b={name:o.trim(),description:i.trim()||"Custom shape created with Shape Builder",geometryType:e.id,parameters:t,category:"custom"};await Lo(b),d("Shape saved successfully! It's now available in your Collections."),setTimeout(()=>{d(null),a(""),c("")},3e3)}catch(b){console.error("Error saving custom shape:",b),d("Error saving shape. Please try again.")}finally{h(!1)}}},X=()=>{const b={name:o,preset:e.id,parameters:t,description:i,exportedAt:new Date().toISOString()},A=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),U=URL.createObjectURL(A),_=document.createElement("a");_.href=U,_.download=`${o||"custom-shape"}.json`,_.click(),URL.revokeObjectURL(U)};return r.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[r.jsx("div",{className:"bg-black/20 border-b border-purple-500/20 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center",children:r.jsx(Eo,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-300 via-cyan-300 to-blue-300 bg-clip-text text-transparent",children:"Shape Builder"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Create custom 3D habitat modules"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:X,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx(vr,{className:"w-4 h-4"}),"Export"]}),r.jsxs("button",{onClick:B,disabled:l,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[r.jsx(qr,{className:"w-4 h-4"}),l?"Saving...":"Save Shape"]})]})]})}),r.jsxs("div",{className:"flex flex-1",children:[r.jsxs("div",{className:"w-80 bg-black/20 border-r border-purple-500/20 p-4 overflow-y-auto",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Shape Presets"}),r.jsx("div",{className:"space-y-2 mb-6",children:Ut.map(b=>r.jsx("div",{onClick:()=>N(b),className:`p-3 rounded-lg cursor-pointer transition-all ${e.id===b.id?"bg-blue-600/30 border border-blue-500/50":"bg-gray-800/30 hover:bg-gray-700/30 border border-gray-700/30"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"text-blue-400",children:b.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:b.name}),r.jsx("div",{className:"text-xs text-gray-400",children:b.description}),r.jsx("div",{className:"text-xs text-purple-400 capitalize",children:b.category})]})]})},b.id))}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Shape Name"}),r.jsx("input",{type:"text",value:o,onChange:b=>a(b.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400",placeholder:"Enter shape name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Description"}),r.jsx("textarea",{value:i,onChange:b=>c(b.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 resize-none",rows:3,placeholder:"Describe your custom shape"})]})]})]}),r.jsxs("div",{className:"flex-1 flex",children:[r.jsxs("div",{className:"w-80 bg-black/10 border-r border-purple-500/20 p-4 overflow-y-auto",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Parameters"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Width (meters)"}),r.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.1",value:t.width,onChange:b=>M("width",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[t.width.toFixed(1),"m"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Height (meters)"}),r.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.1",value:t.height,onChange:b=>M("height",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[t.height.toFixed(1),"m"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Depth (meters)"}),r.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.1",value:t.depth,onChange:b=>M("depth",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[t.depth.toFixed(1),"m"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Material Type"}),r.jsxs("select",{value:t.materialType||"solid",onChange:b=>M("materialType",b.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",children:[r.jsx("option",{value:"solid",children:"Solid"}),r.jsx("option",{value:"wireframe",children:"Wireframe"}),r.jsx("option",{value:"glass",children:"Glass"}),r.jsx("option",{value:"metal",children:"Metal"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transparency"}),r.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:t.transparency||.8,onChange:b=>M("transparency",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[((t.transparency||.8)*100).toFixed(0),"%"]})]}),r.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("input",{type:"checkbox",id:"hasWalls",checked:t.hasWalls||!1,onChange:b=>M("hasWalls",b.target.checked),className:"rounded"}),r.jsx("label",{htmlFor:"hasWalls",className:"text-sm font-medium",children:"Add Walls"})]}),t.hasWalls&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wall Thickness (meters)"}),r.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.05",value:t.wallThickness||.2,onChange:b=>M("wallThickness",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(t.wallThickness||.2).toFixed(2),"m"]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wall Height (meters)"}),r.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.1",value:t.wallHeight||t.height,onChange:b=>M("wallHeight",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(t.wallHeight||t.height).toFixed(1),"m"]})]})]})]}),(t.wireframe||e.id.includes("frame"))&&r.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3 text-purple-200",children:"Wireframe Settings"}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frame Width (meters)"}),r.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:t.frameWidth||.1,onChange:b=>M("frameWidth",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(t.frameWidth||.1).toFixed(2),"m"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frame Spacing (meters)"}),r.jsx("input",{type:"range",min:"0.2",max:"2.0",step:"0.1",value:t.frameSpacing||.5,onChange:b=>M("frameSpacing",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(t.frameSpacing||.5).toFixed(1),"m"]})]})]}),(e.id.includes("cylindrical")||e.id.includes("dome")||e.id.includes("ring"))&&r.jsx("div",{className:"border-t border-gray-600 pt-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Radius (meters)"}),r.jsx("input",{type:"range",min:"0.2",max:"5",step:"0.1",value:t.radius||t.width/2,onChange:b=>M("radius",parseFloat(b.target.value)),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(t.radius||t.width/2).toFixed(1),"m"]})]})}),(e.id.includes("cylindrical")||e.id.includes("dome")||e.id.includes("cone"))&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Segments"}),r.jsx("input",{type:"range",min:"6",max:"32",step:"1",value:t.segments||16,onChange:b=>M("segments",parseInt(b.target.value)),className:"w-full"}),r.jsx("div",{className:"text-right text-sm text-gray-400",children:t.segments||16})]})]}),r.jsxs("div",{className:"mt-6 flex gap-3",children:[r.jsx("button",{onClick:B,disabled:!o.trim()||l,className:`flex-1 px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 
                         text-white font-medium rounded-lg hover:from-purple-600 hover:to-blue-600 
                         transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
                         shadow-lg hover:shadow-purple-500/25`,children:l?"Saving...":"Save Custom Shape"}),r.jsx("button",{onClick:()=>{s(Ut[0]),n(Ut[0].defaultParams),a(""),c("")},className:`px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg
                         transition-colors duration-200`,children:"Reset"})]}),u&&r.jsx("div",{className:`mt-3 p-3 rounded-lg text-sm ${u.includes("Error")?"bg-red-900/30 border border-red-700/30 text-red-200":"bg-green-900/30 border border-green-700/30 text-green-200"}`,children:u}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-800/30 rounded-lg border border-gray-700/30",children:[r.jsx("h4",{className:"text-sm font-medium mb-2 text-purple-200",children:"Shape Statistics"}),r.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[r.jsxs("div",{children:["Volume: ~",(t.width*t.height*t.depth).toFixed(1)," m"]}),r.jsxs("div",{children:["Type: ",e.type]}),r.jsxs("div",{children:["Category: ",e.category]}),r.jsxs("div",{children:["Material: ",t.materialType||"solid"]}),t.hasWalls&&r.jsxs("div",{children:["Walls: ",t.wallThickness?.toFixed(2),"m thick"]}),t.wireframe&&r.jsxs("div",{children:["Frame: ",t.frameWidth?.toFixed(2),"m beams"]})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-purple-500/20",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-200",children:"3D Preview"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Interactive preview of your custom shape"})]}),r.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:r.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-purple-500/20",children:[r.jsx("div",{ref:p,className:"rounded-lg overflow-hidden border border-gray-600"}),r.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[r.jsxs("button",{onClick:()=>z(),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded flex items-center gap-2 text-sm transition-colors",children:[r.jsx(fd,{className:"w-4 h-4"}),"Refresh"]}),r.jsxs("button",{className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded flex items-center gap-2 text-sm transition-colors",children:[r.jsx(yd,{className:"w-4 h-4"}),"Reset View"]})]})]})})]})]})]})]})}const or=[{id:"box",name:"Cube",type:"box",icon:r.jsx(es,{className:"w-5 h-5"}),category:"basic",description:"Basic cubic shape",defaultParams:{width:2,height:2,depth:2,materialType:"solid",transparency:1}},{id:"cylinder",name:"Cylinder",type:"cylinder",icon:r.jsx(Po,{className:"w-5 h-5"}),category:"basic",description:"Cylindrical shape",defaultParams:{width:2,height:3,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"sphere",name:"Sphere",type:"sphere",icon:r.jsx(yt,{className:"w-5 h-5"}),category:"basic",description:"Spherical shape",defaultParams:{width:2,height:2,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"cone",name:"Cone",type:"cone",icon:r.jsx("div",{className:"w-5 h-5 triangle-up"}),category:"basic",description:"Conical shape",defaultParams:{width:2,height:3,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"torus",name:"Torus",type:"torus",icon:r.jsx(yt,{className:"w-5 h-5"}),category:"basic",description:"Ring/donut shape",defaultParams:{width:2,height:.5,depth:2,radius:1,segments:16,materialType:"solid",transparency:1}},{id:"plane",name:"Plane",type:"plane",icon:r.jsx(nt,{className:"w-5 h-5"}),category:"basic",description:"Flat plane surface",defaultParams:{width:3,height:.1,depth:3,materialType:"solid",transparency:1}},{id:"structural-beam",name:"Support Beam",type:"box",icon:r.jsx(nt,{className:"w-5 h-5 rotate-45"}),category:"structural",description:"Structural support beam",defaultParams:{width:.2,height:3,depth:.2,materialType:"metal",transparency:1}},{id:"connector-node",name:"Connector Node",type:"sphere",icon:r.jsx(yt,{className:"w-5 h-5"}),category:"connector",description:"Connection point between modules",defaultParams:{width:.5,height:.5,depth:.5,radius:.25,segments:8,materialType:"metal",transparency:1}},{id:"frame-structure",name:"Frame Structure",type:"wireframe",icon:r.jsx(Hr,{className:"w-5 h-5"}),category:"structural",description:"Wireframe structural element",defaultParams:{width:2,height:2,depth:2,frameWidth:.1,frameSpacing:.5,materialType:"wireframe",transparency:1}}],Jd=[{id:"layer-1",name:"Main Structure",visible:!0,locked:!1,color:"#8B5CF6",shapes:[]},{id:"layer-2",name:"Support Elements",visible:!0,locked:!1,color:"#06B6D4",shapes:[]},{id:"layer-3",name:"Connectors",visible:!0,locked:!1,color:"#EF4444",shapes:[]}],Zd=({onBackToDesign:e,onSaveDesign:s})=>{const[t,n]=m.useState(new Map),[o,a]=m.useState(Jd),[i,c]=m.useState(new Set),[l,h]=m.useState("layer-1"),[u,d]=m.useState("create"),[p,g]=m.useState(or[0]),[f,x]=m.useState(or[0].defaultParams),[y,P]=m.useState(!0),[z,E]=m.useState(!0),[I,K]=m.useState("shapes"),[V,M]=m.useState("Untitled Project"),[N,B]=m.useState(!1),[X,b]=m.useState(null),A=m.useRef(null),U=m.useRef(null),_=m.useRef(null),L=m.useRef(null),O=m.useRef(null),ee=m.useRef(null),D=m.useRef(new js),Y=m.useRef(new Pt),fe=()=>`shape_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;m.useEffect(()=>{if(!A.current)return;const w=new kr;w.background=new Rt(1710638),U.current=w;const S=30,C=A.current.clientWidth/A.current.clientHeight,v=new pa(-S*C/2,S*C/2,S/2,-S/2,.1,1e3);v.position.set(15,15,15),v.lookAt(0,0,0),L.current=v;const H=new Cr({antialias:!0});H.setSize(A.current.clientWidth,A.current.clientHeight),H.shadowMap.enabled=!0,H.shadowMap.type=Rr,_.current=H,A.current.appendChild(H.domElement);const ie=new Pr(16777215,.8);w.add(ie);const te=new Rs(16777215,1);te.position.set(10,10,5),te.castShadow=!0,te.shadow.mapSize.width=2048,te.shadow.mapSize.height=2048,w.add(te);const Q=new Rs(16777215,.5);if(Q.position.set(-10,10,-5),w.add(Q),y){const R=new Mr(20,20,9133302,3355443);w.add(R)}const ce=new de(1,1,1),le=new Wt({color:16711680}),we=new Ee(ce,le);we.position.set(0,.5,0),we.castShadow=!0,we.receiveShadow=!0,w.add(we),console.log("Added test cube at origin");let Re=!1,be=0,We=0,Me=S;const Le=new js;D.current=Le,Y.current=new Pt,ee.current={camera:v,scene:w,renderer:H,raycaster:D.current,mouse:Y.current};let ae=!1,ue=new je,ke=new je,ze=!1,Pe=null;const is=R=>{if(u==="pan")Re=!0,be=R.clientX,We=R.clientY;else if(u==="create"){const $=H.domElement.getBoundingClientRect();Y.current.x=(R.clientX-$.left)/$.width*2-1,Y.current.y=-((R.clientY-$.top)/$.height)*2+1,Le.setFromCamera(Y.current,v);const F=new Ns(new je(0,1,0),0),se=new je;Le.ray.intersectPlane(F,se),se&&(ze=!0,ue.copy(se),Pe=q(p,{...f,width:.5,height:.5,depth:.5}),Pe.position.copy(se),p.type==="plane"?Pe.position.y=.01:Pe.position.y=(f.height||1)/2,Pe.traverse(T=>{if(T instanceof Ee&&T.material){const J=T.material;J.transparent=!0,J.opacity=.5}}),w.add(Pe),console.log("Started creating shape at:",se))}else if(u==="select"||u==="move"){const $=H.domElement.getBoundingClientRect();Y.current.x=(R.clientX-$.left)/$.width*2-1,Y.current.y=-((R.clientY-$.top)/$.height)*2+1,Le.setFromCamera(Y.current,v);const F=Le.intersectObjects(w.children,!0);if(F.length>0){let T=F[0].object.parent;for(;T&&!T.userData.cadShapeId;)T=T.parent;if(T&&T.userData.cadShapeId){const J=T.userData.cadShapeId,ve=t.get(J);if(ve&&!ve.locked)if(R.ctrlKey||R.metaKey){const st=new Set(i);st.has(J)?st.delete(J):st.add(J),c(st)}else c(new Set([J])),u==="move"&&(ae=!0,ue.copy(F[0].point),ke.copy(T.position))}}else!R.ctrlKey&&!R.metaKey&&c(new Set)}},cs=R=>{if(Re&&u==="pan"){const $=R.clientX-be,F=R.clientY-We,se=.05;v.position.x-=$*se,v.position.z-=F*se,v.lookAt(v.position.x-10,0,v.position.z-10),be=R.clientX,We=R.clientY}else if(ze&&Pe&&u==="create"){const $=H.domElement.getBoundingClientRect();Y.current.x=(R.clientX-$.left)/$.width*2-1,Y.current.y=-((R.clientY-$.top)/$.height)*2+1,Le.setFromCamera(Y.current,v);const F=new Ns(new je(0,1,0),0),se=new je;if(Le.ray.intersectPlane(F,se),se){const T=ue.distanceTo(se),J=Math.max(.5,T*2);Pe.scale.set(J/f.width,J/f.height,J/f.depth),console.log("Updating shape size:",J)}}else if(ae&&u==="move"&&i.size>0){const $=H.domElement.getBoundingClientRect();Y.current.x=(R.clientX-$.left)/$.width*2-1,Y.current.y=-((R.clientY-$.top)/$.height)*2+1,Le.setFromCamera(Y.current,v);const F=new Ns(new je(0,1,0),0),se=new je;if(Le.ray.intersectPlane(F,se),se){const T=se.sub(ue);i.forEach(J=>{const ve=t.get(J);ve&&ve.mesh&&!ve.locked&&ve.mesh.position.copy(ke.clone().add(T))})}}},ls=()=>{if(ze&&Pe){const R=Math.max(Pe.scale.x,.5),$={...f,width:f.width*R,height:f.height*R,depth:f.depth*R};w.remove(Pe);const F=fe(),se=q(p,$);se.position.copy(Pe.position);const T={id:F,name:`${p.name} ${t.size+1}`,type:p.type,geometry:se.children[0]?se.children[0].geometry:null,material:se.children[0]?se.children[0].material:null,position:se.position.clone(),rotation:se.rotation.clone(),scale:se.scale.clone(),visible:!0,locked:!1,parameters:$,layer:l,mesh:se};w.add(se),se.userData={cadShapeId:F},n(J=>new Map(J.set(F,T))),a(J=>J.map(ve=>ve.id===l?{...ve,shapes:[...ve.shapes,F]}:ve)),console.log("Shape created with final size:",R,"at position:",se.position),ze=!1,Pe=null}Re=!1,ae=!1},Ie=R=>{const $=R.deltaY>0?1.1:.9;Me=Math.max(5,Math.min(50,Me*$));const F=A.current?.clientWidth/A.current?.clientHeight;v.left=-Me*F/2,v.right=Me*F/2,v.top=Me/2,v.bottom=-Me/2,v.updateProjectionMatrix()};H.domElement.addEventListener("mousedown",is),H.domElement.addEventListener("mousemove",cs),H.domElement.addEventListener("mouseup",ls),H.domElement.addEventListener("wheel",Ie);const j=()=>{O.current=requestAnimationFrame(j),H.render(w,v)};j();const k=()=>{if(A.current){const R=A.current.clientWidth/A.current.clientHeight;v.left=-Me*R/2,v.right=Me*R/2,v.top=Me/2,v.bottom=-Me/2,v.updateProjectionMatrix(),H.setSize(A.current.clientWidth,A.current.clientHeight)}};return window.addEventListener("resize",k),()=>{O.current&&cancelAnimationFrame(O.current),A.current&&H.domElement&&A.current.removeChild(H.domElement),H.domElement.removeEventListener("mousedown",is),H.domElement.removeEventListener("mousemove",cs),H.domElement.removeEventListener("mouseup",ls),H.domElement.removeEventListener("wheel",Ie),window.removeEventListener("resize",k),H.dispose()}},[y,u]);const q=m.useCallback((w,S)=>{console.log("Creating shape with preset:",w.type,w.name,S);const C=new Er;let v;switch(w.type){case"box":console.log("Creating box geometry"),v=new de(S.width,S.height,S.depth);break;case"cylinder":console.log("Creating cylinder geometry"),v=new Ct(S.radius||S.width/2,S.radius||S.width/2,S.height,S.segments||32);break;case"sphere":console.log("Creating sphere geometry"),v=new Ar(S.radius||S.width/2,S.segments||32,S.segments||16);break;case"cone":console.log("Creating cone geometry"),v=new fa(S.radius||S.width/2,S.height,S.segments||32);break;case"torus":console.log("Creating torus geometry"),v=new zn(S.radius||S.width/2,(S.radius||S.width/2)*.3,S.segments||16,(S.segments||16)*2);break;case"plane":console.log("Creating plane geometry"),v=new Bn(S.width,S.depth),v.rotateX(-Math.PI/2);break;case"wireframe":console.log("Creating wireframe geometry"),v=new de(S.width,S.height,S.depth);break;default:console.log("Creating default box geometry for type:",w.type),v=new de(S.width,S.height,S.depth)}const ie=(()=>{const Q={transparent:(S.transparency||1)<1,opacity:S.transparency||1,wireframe:S.materialType==="wireframe"};switch(S.materialType){case"glass":return new $n({...Q,color:8965375,transmission:.9,roughness:.1,metalness:0,clearcoat:1,clearcoatRoughness:.1});case"metal":return new Wt({...Q,color:10066329,metalness:.8,roughness:.2});case"wireframe":return new Vn({color:9133302,wireframe:!0});default:return new Wt({...Q,color:w.type==="cylinder"?4906624:w.type==="sphere"?16096779:w.type==="cone"?15680580:w.type==="torus"?440020:w.type==="plane"?1096065:9133302,metalness:.1,roughness:.4})}})(),te=new Ee(v,ie);if(te.castShadow=!0,te.receiveShadow=!0,console.log(`Creating shape: ${w.type}`,{geometry:v.type,bounds:v.boundingBox,material:ie.type,params:S}),v.computeBoundingBox(),v.computeBoundingSphere(),C.add(te),S.hasWalls&&S.wallThickness){const Q=new de(S.width+S.wallThickness*2,S.wallHeight||S.height,S.depth+S.wallThickness*2),ce=new Wt({color:6710886,transparent:!0,opacity:.7}),le=new Ee(Q,ce);le.castShadow=!0,le.receiveShadow=!0,C.add(le)}if(w.type==="wireframe"){const Q=new ga(v),ce=new xa({color:9133302,linewidth:S.frameWidth||2}),le=new ya(Q,ce);C.add(le)}return C},[]),ge=()=>{U.current&&i.forEach(C=>{const v=t.get(C);v&&!v.locked&&v.mesh&&U.current.remove(v.mesh)});const w=new Map(t),S=Array.from(i).filter(C=>{const v=t.get(C);return v&&!v.locked});S.forEach(C=>w.delete(C)),n(w),a(C=>C.map(v=>({...v,shapes:v.shapes.filter(H=>!S.includes(H))}))),c(new Set)};m.useEffect(()=>{const w=S=>{switch(S.key==="Delete"||S.key==="Backspace"?i.size>0&&ge():S.key==="Escape"?(c(new Set),pe()):S.key==="a"&&(S.ctrlKey||S.metaKey)?(S.preventDefault(),c(new Set(t.keys())),pe()):S.key==="s"&&(S.ctrlKey||S.metaKey)&&(S.preventDefault(),re()),S.key){case"c":d("create");break;case"v":d("select");break;case"m":d("move");break;case"r":d("rotate");break;case"s":!S.ctrlKey&&!S.metaKey&&d("scale");break;case"h":d("pan");break}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[i,t]),m.useEffect(()=>{pe()},[i]);const re=async()=>{if(V.trim()){B(!0),b(null);try{let w=1/0,S=-1/0,C=1/0,v=-1/0,H=1/0,ie=-1/0;t.forEach(Q=>{const ce=Q.position,le=Q.parameters;w=Math.min(w,ce.x-le.width/2),S=Math.max(S,ce.x+le.width/2),C=Math.min(C,ce.y-le.height/2),v=Math.max(v,ce.y+le.height/2),H=Math.min(H,ce.z-le.depth/2),ie=Math.max(ie,ce.z+le.depth/2)});const te={name:V.trim(),description:`CAD Assembly with ${t.size} components`,geometryType:"assembly",parameters:{width:S-w||5,height:v-C||5,depth:ie-H||5,components:t.size},category:"custom"};if(await Lo(te),b("Project saved successfully! Available in Collections for drag-and-drop."),s){const Q=Array.from(t.values());s({name:V.trim(),shapes:Q,bounds:{width:S-w||5,height:v-C||5,depth:ie-H||5}})}setTimeout(()=>b(null),3e3)}catch(w){console.error("Error saving project:",w),b("Error saving project. Please try again.")}finally{B(!1)}}},he=w=>{if(u!=="select"||!U.current||!L.current||!A.current)return;const S=A.current.getBoundingClientRect(),C=new Pt((w.clientX-S.left)/S.width*2-1,-((w.clientY-S.top)/S.height)*2+1),v=new js;v.setFromCamera(C,L.current);const H=v.intersectObjects(U.current.children,!0);if(H.length>0){let te=H[0].object.parent;for(;te&&!te.userData.cadShapeId;)te=te.parent;if(te&&te.userData.cadShapeId){const Q=te.userData.cadShapeId,ce=t.get(Q);if(ce&&!ce.locked){if(w.ctrlKey||w.metaKey){const le=new Set(i);le.has(Q)?le.delete(Q):le.add(Q),c(le)}else c(new Set([Q]));pe()}}}else!w.ctrlKey&&!w.metaKey&&(c(new Set),pe())},pe=()=>{U.current&&t.forEach((w,S)=>{if(w.mesh){const C=i.has(S);w.mesh.children.forEach(v=>{v instanceof Ee&&(C?(v.material=v.material.clone(),v.material.emissive=new Rt(4473924)):v.material.emissive=new Rt(0))})}})},me=w=>{if(i.size<2){b("Select at least 2 shapes for boolean operations"),setTimeout(()=>b(null),2e3);return}b(`${w} operation would be performed on ${i.size} shapes`),setTimeout(()=>b(null),2e3)};return r.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-black text-white",children:[r.jsxs("div",{className:"h-14 bg-black/20 border-b border-purple-500/30 flex items-center px-4 gap-4",children:[r.jsx("div",{className:"flex items-center gap-2 border-r border-gray-600 pr-4",children:r.jsxs("button",{onClick:e,className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors flex items-center gap-2",title:"Back to Main Design",children:[r.jsx(Pl,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Back to Design"})]})}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("input",{type:"text",value:V,onChange:w=>M(w.target.value),className:"bg-gray-800/50 border border-gray-600 rounded px-3 py-1 text-sm w-48",placeholder:"Project name..."})}),r.jsx("div",{className:"flex items-center gap-2 border-l border-gray-600 pl-4",children:[{tool:"create",icon:Ue,label:"Create - Click & Drag on Canvas"},{tool:"select",icon:od,label:"Select"},{tool:"move",icon:Eo,label:"Move"},{tool:"rotate",icon:vd,label:"Rotate"},{tool:"scale",icon:jd,label:"Scale"}].map(({tool:w,icon:S,label:C})=>r.jsx("button",{onClick:()=>d(w),className:`p-2 rounded transition-colors ${u===w?"bg-purple-500 text-white":"bg-gray-700 hover:bg-gray-600"}`,title:C,children:r.jsx(S,{className:"w-4 h-4"})},w))}),r.jsxs("div",{className:"flex items-center gap-2 border-l border-gray-600 pl-4",children:[r.jsx("button",{onClick:()=>me("union"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Union",children:r.jsx(Ue,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>me("subtract"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Subtract",children:r.jsx(nt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>me("intersect"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Intersect",children:r.jsx(yt,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[r.jsx("button",{onClick:ge,disabled:i.size===0,className:"p-2 bg-red-600 hover:bg-red-700 rounded transition-colors disabled:opacity-50",title:"Delete Selected",children:r.jsx(os,{className:"w-4 h-4"})}),r.jsx("button",{onClick:re,disabled:N||t.size===0,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded transition-colors disabled:opacity-50",children:N?"Saving...":"Save Project"})]})]}),r.jsxs("div",{className:"flex flex-1",children:[r.jsxs("div",{className:"w-48 bg-black/10 border-r border-purple-500/20 flex flex-col",children:[r.jsx("div",{className:"flex border-b border-gray-600",children:[{mode:"shapes",icon:es,label:"Shapes"},{mode:"layers",icon:Mo,label:"Layers"},{mode:"properties",icon:pt,label:"Properties"},{mode:"materials",icon:cd,label:"Materials"}].map(({mode:w,icon:S,label:C})=>r.jsxs("button",{onClick:()=>K(w),className:`flex-1 p-3 text-sm transition-colors ${I===w?"bg-purple-500/20 text-purple-200 border-b-2 border-purple-500":"hover:bg-gray-800/50"}`,children:[r.jsx(S,{className:"w-4 h-4 mx-auto mb-1"}),r.jsx("div",{children:C})]},w))}),r.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[I==="shapes"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Shape Library"}),Object.entries(or.reduce((w,S)=>(w[S.category]||(w[S.category]=[]),w[S.category].push(S),w),{})).map(([w,S])=>r.jsxs("div",{className:"mb-6",children:[r.jsxs("h4",{className:"text-sm font-medium mb-3 text-gray-300 capitalize",children:[w," Shapes"]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(C=>r.jsx("button",{onClick:()=>{console.log("Selected preset:",C.type,C.name),g(C),x(C.defaultParams)},className:`p-3 rounded-lg border transition-all ${p.id===C.id?"border-purple-500 bg-purple-500/20 text-purple-200":"border-gray-600 bg-gray-800/30 hover:border-purple-400 hover:bg-gray-700/50"}`,children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[C.icon,r.jsx("span",{className:"text-xs text-center",children:C.name})]})},C.id))})]},w)),p&&r.jsxs("div",{className:"border-t border-gray-600 pt-4 mt-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3 text-purple-200",children:"Shape Parameters"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Width"}),r.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:f.width,onChange:w=>x(S=>({...S,width:parseFloat(w.target.value)})),className:"w-full"}),r.jsxs("div",{className:"text-xs text-gray-400",children:[f.width.toFixed(1),"m"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Height"}),r.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:f.height,onChange:w=>x(S=>({...S,height:parseFloat(w.target.value)})),className:"w-full"}),r.jsxs("div",{className:"text-xs text-gray-400",children:[f.height.toFixed(1),"m"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Depth"}),r.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:f.depth,onChange:w=>x(S=>({...S,depth:parseFloat(w.target.value)})),className:"w-full"}),r.jsxs("div",{className:"text-xs text-gray-400",children:[f.depth.toFixed(1),"m"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Material"}),r.jsxs("select",{value:f.materialType||"solid",onChange:w=>x(S=>({...S,materialType:w.target.value})),className:"w-full px-2 py-1 bg-gray-800/50 border border-gray-600 rounded text-xs",children:[r.jsx("option",{value:"solid",children:"Solid"}),r.jsx("option",{value:"wireframe",children:"Wireframe"}),r.jsx("option",{value:"glass",children:"Glass"}),r.jsx("option",{value:"metal",children:"Metal"})]})]})]})]}),r.jsxs("div",{className:`w-full mt-4 p-3 bg-gradient-to-r from-green-600/20 to-blue-600/20 
                             border border-green-500/30 text-green-200 font-medium rounded-lg`,children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx(Ue,{className:"w-4 h-4"}),r.jsx("span",{children:"Interactive Creation Mode"})]}),r.jsx("div",{className:"text-xs text-center text-gray-300",children:"Switch to CREATE tool above, then click & drag on the canvas to place and size shapes"})]})]}),I==="layers"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Layers"}),o.map(w=>r.jsx("div",{className:`mb-2 p-3 rounded-lg border transition-colors cursor-pointer ${l===w.id?"border-purple-500 bg-purple-500/20":"border-gray-600 bg-gray-800/30 hover:bg-gray-700/50"}`,onClick:()=>h(w.id),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w.color}}),r.jsx("span",{className:"text-sm font-medium",children:w.name}),r.jsxs("span",{className:"text-xs text-gray-400",children:["(",w.shapes.length,")"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:S=>{S.stopPropagation(),a(C=>C.map(v=>v.id===w.id?{...v,visible:!v.visible}:v))},className:"p-1 hover:bg-gray-600 rounded",children:w.visible?r.jsx(Wr,{className:"w-3 h-3"}):r.jsx(Bl,{className:"w-3 h-3"})}),r.jsx("button",{onClick:S=>{S.stopPropagation(),a(C=>C.map(v=>v.id===w.id?{...v,locked:!v.locked}:v))},className:"p-1 hover:bg-gray-600 rounded",children:w.locked?r.jsx(sd,{className:"w-3 h-3"}):r.jsx(ed,{className:"w-3 h-3"})})]})]})},w.id))]}),I==="properties"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Properties"}),i.size>0?r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:[i.size," shape(s) selected"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position X"}),r.jsx("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",placeholder:"0.0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position Y"}),r.jsx("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",placeholder:"0.0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position Z"}),r.jsx("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",placeholder:"0.0"})]})]})]}):r.jsx("p",{className:"text-sm text-gray-400",children:"Select shapes to edit properties"})]}),I==="materials"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-200",children:"Material Editor"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Material Type"}),r.jsxs("select",{value:f.materialType||"solid",onChange:w=>x(S=>({...S,materialType:w.target.value})),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white",children:[r.jsx("option",{value:"solid",children:"Solid"}),r.jsx("option",{value:"wireframe",children:"Wireframe"}),r.jsx("option",{value:"glass",children:"Glass"}),r.jsx("option",{value:"metal",children:"Metal"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transparency"}),r.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:f.transparency||1,onChange:w=>x(S=>({...S,transparency:parseFloat(w.target.value)})),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[((f.transparency||1)*100).toFixed(0),"%"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"hasWalls",checked:f.hasWalls||!1,onChange:w=>x(S=>({...S,hasWalls:w.target.checked})),className:"rounded"}),r.jsx("label",{htmlFor:"hasWalls",className:"text-sm font-medium",children:"Add Walls"})]}),f.hasWalls&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wall Thickness"}),r.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.05",value:f.wallThickness||.2,onChange:w=>x(S=>({...S,wallThickness:parseFloat(w.target.value)})),className:"w-full"}),r.jsxs("div",{className:"text-right text-sm text-gray-400",children:[(f.wallThickness||.2).toFixed(2),"m"]})]})]})]})]})]}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("div",{ref:A,className:"w-full h-full cursor-crosshair",onClick:he}),r.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>P(!y),className:`p-2 rounded transition-colors ${y?"bg-purple-500":"bg-gray-700 hover:bg-gray-600"}`,title:"Toggle Grid",children:r.jsx(Hr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>E(!z),className:`p-2 rounded transition-colors ${z?"bg-purple-500":"bg-gray-700 hover:bg-gray-600"}`,title:"Snap to Grid",children:r.jsx(Dd,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm rounded-lg p-3",children:r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{children:["Shapes: ",t.size]}),r.jsxs("div",{children:["Selected: ",i.size]}),r.jsxs("div",{className:"text-purple-300",children:["Tool: ",u]}),r.jsxs("div",{children:["Layer: ",o.find(w=>w.id===l)?.name]}),r.jsxs("div",{className:"text-xs text-yellow-300 mt-2",children:[u==="create"&&"Click & drag on canvas to create shapes",u==="select"&&"Click shapes to select them",u==="move"&&"Drag selected shapes to move them",u==="pan"&&"Drag to orbit around the scene"]}),r.jsx("div",{className:"text-xs text-gray-400",children:"Isometric View  Wheel: Zoom  Pan: Drag to move view"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Keys: C=Create, V=Select, M=Move, R=Rotate, S=Scale, H=Pan"})]})}),X&&r.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 
                          bg-black/80 backdrop-blur-sm rounded-lg p-4 max-w-md text-center`,children:r.jsx("div",{className:`text-sm ${X.includes("Error")?"text-red-200":"text-green-200"}`,children:X})})]})]})]})},ws=({label:e,value:s,unit:t,status:n,icon:o})=>r.jsx(xe,{className:"glass",children:r.jsxs(ye,{className:"flex items-center gap-3 p-4",children:[o&&r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-muted",children:o}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:e}),r.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[r.jsx("p",{className:"text-2xl font-bold text-text",children:s}),t&&r.jsx("p",{className:"text-sm text-muted-foreground",children:t}),n&&r.jsxs(De,{variant:n,className:"ml-auto",children:[n==="success"&&"",n==="warning"&&"!",n==="danger"&&""]})]})]})]})}),Io=({nhv:e=0,pressurizedVolume:s=0,utilization:t=0,corridorStatus:n="success"})=>{const o=i=>i>85?"danger":i>70?"warning":"success",a=i=>i<50?"danger":i<100?"warning":"success";return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsx(ws,{label:"Net Habitable Volume",value:e.toFixed(1),unit:"m",status:a(e),icon:r.jsx("div",{className:"text-primary",children:""})}),r.jsx(ws,{label:"Pressurized Volume",value:s.toFixed(1),unit:"m",icon:r.jsx("div",{className:"text-primary",children:""})}),r.jsx(ws,{label:"Utilization",value:t.toFixed(1),unit:"%",status:o(t),icon:r.jsx("div",{className:"text-primary",children:""})}),r.jsx(ws,{label:"Corridor Status",value:n==="success"?"OK":n==="warning"?"CHECK":"BLOCKED",status:n,icon:r.jsx("div",{className:"text-primary",children:""})})]})},qt={CREW_SLEEP:{color:"#3b82f6",icon:"",size:{width:2,height:2.1,depth:2.2},geometry:"sleep_pod"},HYGIENE:{color:"#10b981",icon:"",size:{width:2,height:2.2,depth:2},geometry:"cylinder"},WASTE:{color:"#f59e0b",icon:"",size:{width:1.8,height:2.2,depth:1.8},geometry:"rounded_box"},EXERCISE:{color:"#ef4444",icon:"",size:{width:3,height:2.5,depth:4},geometry:"gym_module"},FOOD_PREP:{color:"#8b5cf6",icon:"",size:{width:3,height:2.2,depth:3},geometry:"kitchen_module"},ECLSS:{color:"#22c55e",icon:"",size:{width:3,height:2.3,depth:2.5},geometry:"technical_rack"},MEDICAL:{color:"#ec4899",icon:"",size:{width:2.5,height:2.3,depth:2.5},geometry:"medical_bay"},MAINTENANCE:{color:"#06b6d4",icon:"",size:{width:2.5,height:2.3,depth:2.5},geometry:"workshop"},CUSTOM_CAD:{color:"#8b5cf6",icon:"",size:{width:2,height:2,depth:2},geometry:"custom"},STOWAGE:{color:"#f97316",icon:"",size:{width:2.5,height:2.3,depth:3.5},geometry:"storage_rack"},RECREATION:{color:"#84cc16",icon:"",size:{width:2,height:2.2,depth:2},geometry:"lounge_pod"},WORKSTATION:{color:"#64748b",icon:"",size:{width:2.2,height:2.2,depth:2.2},geometry:"workstation"},AIRLOCK:{color:"#0ea5e9",icon:"",size:{width:2,height:2.3,depth:2.2},geometry:"airlock_chamber"},GLOVEBOX:{color:"#8b5cf6",icon:"",size:{width:1.4,height:2,depth:1.8},geometry:"science_station"},TRASH_MGMT:{color:"#6b7280",icon:"",size:{width:1.5,height:2,depth:2},geometry:"compactor"},COMMON_AREA:{color:"#f59e0b",icon:"",size:{width:3,height:2.2,depth:3},geometry:"community_space"}};function Vs(e,s=.5){return Math.round(e/s)*s}function eu(e,s){const{w_m:t,h_m:n,l_m:o}=s;switch(e){case"sleep_pod":const a=new ka(Math.min(t,o)/2.2,n-Math.min(t,o)/1.1,4,8);return a.rotateZ(Math.PI/2),a;case"cylinder":return new Ct(t/2,t/2,n,16);case"rounded_box":return new de(t,n,o);case"gym_module":new Er;const c=new de(t,n*.8,o);return new de(t*.8,n*.2,o*.6),c;case"kitchen_module":return new de(t,n,o);case"technical_rack":return new de(t,n*1.2,o*.8);case"medical_bay":return new de(t,n,o);case"workshop":return new de(t,n,o);case"storage_rack":return new de(t,n*1.1,o);case"lounge_pod":return new Ar(t/2,16,12);case"workstation":return new de(t,n,o);case"airlock_chamber":const p=new Ct(t/2,t/2,n,8);return p.rotateZ(Math.PI/2),p;case"science_station":return new de(t,n*1.1,o);case"compactor":return new Ct(t/2.2,t/2,n,12);case"community_space":return new Ct(t/2,t/2,n,8);default:return new de(t,n,o)}}function tu(e,s){const t=s?16776960:e.color;return[new Je({color:t,transparent:!0,opacity:.8}),new Je({color:t,transparent:!0,opacity:.8}),new Je({color:t,transparent:!0,opacity:.9}),new Je({color:t,transparent:!0,opacity:.7}),new Je({color:t,transparent:!0,opacity:.8}),new Je({color:t,transparent:!0,opacity:.8})]}function su(e,s=42,t=8e3,n=800){const o=new Float32Array(t*3),a=new Float32Array(t*3),i=d=>{let p=Math.sin(d++)*1e4;return p-Math.floor(p)};let c=s;for(let d=0;d<t;d++){const p=n*.8+i(c++)*n*.2,g=i(c++)*Math.PI*2,f=Math.acos(2*i(c++)-1);o[d*3]=p*Math.sin(f)*Math.cos(g),o[d*3+1]=p*Math.sin(f)*Math.sin(g),o[d*3+2]=p*Math.cos(f);const x=.3+i(c++)*.7,y=i(c++);y>.8?(a[d*3]=x*.8,a[d*3+1]=x*.9,a[d*3+2]=x):y>.6?(a[d*3]=x,a[d*3+1]=x,a[d*3+2]=x):y>.3?(a[d*3]=x,a[d*3+1]=x*.9,a[d*3+2]=x*.7):(a[d*3]=x,a[d*3+1]=x*.6,a[d*3+2]=x*.4)}const l=new ja;l.setAttribute("position",new en(o,3)),l.setAttribute("color",new en(a,3));const h=new Na({size:2,sizeAttenuation:!1,vertexColors:!0,transparent:!0,opacity:.8}),u=new _a(l,h);return e.add(u),u}function ru({objects:e,setObjects:s,selectedId:t,setSelectedId:n,scenario:o,hoverPointRef:a,isInitialized:i,setIsInitialized:c,sceneRefs:l,onContextMenu:h}){const u=M=>{switch(M){case"MARS_SURFACE":return{background:9127187,ground:13468991,grid:9127187,ambientLight:16757606,directionalLight:16767673,groundTexture:"/textures/ground/mars_surface.webp",skyTexture:"/textures/skybox/sky.webp"};case"LUNAR":case"LUNAR_SURFACE":return{background:1118481,ground:6908265,grid:5592405,ambientLight:13421772,directionalLight:16777215,groundTexture:"/textures/ground/moon-surface-seamless-texture-background-closeup-moon-surface-texture-188679621.webp",skyTexture:"/textures/skybox/sky.webp"};case"LEO":case"SPACE_STATION":return{background:17,ground:3100495,grid:4620980,ambientLight:15135743,directionalLight:16777215,groundTexture:"/textures/ground/space-station-floor.jpg",skyTexture:"/textures/skybox/sky.webp"};case"MARS_TRANSIT":return{background:1644912,ground:3092271,grid:4286945,ambientLight:14739199,directionalLight:15792383,groundTexture:"/textures/ground/ship-deck.jpg",skyTexture:"/textures/skybox/sky.webp"};case"DEEP_SPACE":return{background:0,ground:1842204,grid:6697881,ambientLight:15132410,directionalLight:16777215,groundTexture:"/textures/ground/deep-space-deck.jpg",skyTexture:"/textures/skybox/sky.webp"};default:return{background:2956137,ground:13458524,grid:9127187,ambientLight:16777215,directionalLight:16777215,groundTexture:"/textures/ground/default-surface.jpg",skyTexture:"/textures/skybox/sky.webp"}}},d=m.useRef(null),p=m.useRef(),g=m.useRef(),f=m.useRef(),x=m.useRef(new Map),y=m.useRef(new js),P=m.useRef(new Pt),z=m.useRef(new Ns(new je(0,1,0),0)),E=m.useRef(!1),I=m.useRef(new je),K=m.useRef(),V=m.useRef({isRotating:!1,isPanning:!1,isSpacePressed:!1,previousMouse:{x:0,y:0},spherical:new ba(25,Math.PI/4,0),target:new je(0,0,0),panSpeed:.02,rotateSpeed:.005});return m.useEffect(()=>{if(console.log("Initializing Three.js scene..."),!d.current){console.log("Mount ref not ready");return}try{let M=function(C){C.preventDefault();const v=V.current;if(v.isSpacePressed&&C.button===0){v.isPanning=!0,v.previousMouse={x:C.clientX,y:C.clientY},q.domElement.style.cursor="grabbing";return}if(C.button===0){const H=q.domElement.getBoundingClientRect(),ie=(C.clientX-H.left)/H.width*2-1,te=-((C.clientY-H.top)/H.height)*2+1;P.current.set(ie,te),y.current.setFromCamera(P.current,Y);const Q=Array.from(x.current.values()),ce=y.current.intersectObjects(Q);if(ce.length>0){const le=ce[0].object.userData.id;n(le),E.current=!0;const we=ce[0].object,Re=ce[0].point;I.current.copy(we.position).sub(Re)}else n(null),v.isRotating=!0,v.previousMouse={x:C.clientX,y:C.clientY}}else C.button===2&&(v.isPanning=!0,v.previousMouse={x:C.clientX,y:C.clientY})},N=function(C){const v=q.domElement.getBoundingClientRect(),H=(C.clientX-v.left)/v.width*2-1,ie=-((C.clientY-v.top)/v.height)*2+1;P.current.set(H,ie),y.current.setFromCamera(P.current,Y);const te=new je;if(y.current.ray.intersectPlane(z.current,te),a&&(a.current=te.clone()),E.current&&t){const we=x.current.get(t);if(we){const Re=new je;y.current.ray.intersectPlane(z.current,Re);const be=Re.add(I.current);be.x=Vs(be.x),be.z=Vs(be.z),be.y=Math.max(1,be.y),we.position.copy(be)}return}const Q=V.current,ce=C.clientX-Q.previousMouse.x,le=C.clientY-Q.previousMouse.y;if(Q.isRotating)Q.spherical.theta-=ce*Q.rotateSpeed,Q.spherical.phi+=le*Q.rotateSpeed,Q.spherical.phi=Math.max(.1,Math.min(Math.PI-.1,Q.spherical.phi)),Y.position.setFromSpherical(Q.spherical).add(Q.target),Y.lookAt(Q.target),Q.previousMouse={x:C.clientX,y:C.clientY};else if(Q.isPanning){const we=new je,Re=new je().crossVectors(Y.up,new je().subVectors(Q.target,Y.position).normalize()),be=new je().crossVectors(Re,new je().subVectors(Q.target,Y.position).normalize());we.addScaledVector(Re,-ce*Q.panSpeed),we.addScaledVector(be,le*Q.panSpeed),Q.target.add(we),Y.position.add(we),Q.previousMouse={x:C.clientX,y:C.clientY}}},B=function(){if(E.current&&t){const v=x.current.get(t);if(v){const H=v.position;s(ie=>ie.map(te=>te.id===t?{...te,position:[H.x,H.y,H.z]}:te))}E.current=!1}const C=V.current;C.isRotating=!1,C.isPanning=!1,C.isSpacePressed?q.domElement.style.cursor="move":q.domElement.style.cursor="default"},X=function(C){C.preventDefault();const v=V.current,H=C.deltaY>0?1.1:.9;v.spherical.radius=Math.max(5,Math.min(100,v.spherical.radius*H)),Y.position.setFromSpherical(v.spherical).add(v.target),Y.lookAt(v.target)},b=function(C){C.code==="Space"&&(C.preventDefault(),V.current.isSpacePressed=!0,q.domElement.style.cursor="move")},A=function(C){C.code==="Space"&&(C.preventDefault(),V.current.isSpacePressed=!1,V.current.isPanning=!1,V.current.isRotating=!1,q.domElement.style.cursor="default")},U=function(C){C.preventDefault();const v=q.domElement.getBoundingClientRect(),H=new Pt((C.clientX-v.left)/v.width*2-1,-((C.clientY-v.top)/v.height)*2+1);y.current.setFromCamera(H,Y);const ie=y.current.intersectObjects(ee.children,!0);let te=null;for(const Q of ie)if(Q.object.userData.id){te=Q.object.userData.id;break}h(C.clientX,C.clientY,te)},_=function(){if(K.current=requestAnimationFrame(_),D){const C=D.material;C.opacity=.6+.2*Math.sin(Date.now()*.001)}q.render(ee,Y)},L=function(){if(!d.current)return;const C=d.current.clientWidth,v=d.current.clientHeight;Y.aspect=C/v,Y.updateProjectionMatrix(),q.setSize(C,v)};const O=u(o.destination),ee=new kr;ee.background=new Rt(17),p.current=ee;const D=su(ee,42,6e3,600),Y=new On(75,d.current.clientWidth/d.current.clientHeight,.1,1e3);f.current=Y,l.current.camera=Y;const fe=V.current;Y.position.setFromSpherical(fe.spherical).add(fe.target),Y.lookAt(fe.target);const q=new Cr({antialias:!0,alpha:!1});q.setSize(d.current.clientWidth,d.current.clientHeight),q.shadowMap.enabled=!0,q.shadowMap.type=Rr,q.setClearColor(2956137),g.current=q,l.current.renderer=q,l.current.raycaster=y.current,l.current.plane=z.current,d.current.appendChild(q.domElement);const ge=new Pr(O.ambientLight,.4);ee.add(ge);const re=new Rs(O.directionalLight,.8);re.position.set(10,10,5),re.castShadow=!0,re.shadow.mapSize.width=2048,re.shadow.mapSize.height=2048,ee.add(re);const he=new Bn(100,100),pe=new va;let me;try{console.log(`Loading ground texture: ${O.groundTexture}`);const C=pe.load(O.groundTexture,v=>{console.log("Ground texture loaded successfully"),v.wrapS=Zr,v.wrapT=Zr,v.repeat.set(1,1),v.minFilter=wa,v.magFilter=Sa,v.generateMipmaps=!0,me.map=v,me.needsUpdate=!0},v=>{console.log("Loading ground texture progress:",v)},v=>{console.warn("Failed to load ground texture, using fallback color:",v)});me=new Je({color:O.ground,map:C})}catch(C){console.warn("Error creating texture loader, using fallback color:",C),me=new Je({color:O.ground})}const w=new Ee(he,me);w.rotation.x=-Math.PI/2,w.receiveShadow=!0,ee.add(w),ee.background=new Rt(0);const S=new Mr(50,50,O.grid,O.grid);return S.material.transparent=!0,S.material.opacity=.3,ee.add(S),q.domElement.addEventListener("mousedown",M),q.domElement.addEventListener("mousemove",N),q.domElement.addEventListener("mouseup",B),q.domElement.addEventListener("wheel",X),q.domElement.addEventListener("contextmenu",U),window.addEventListener("keydown",b),window.addEventListener("keyup",A),_(),window.addEventListener("resize",L),c(!0),console.log("Three.js scene initialized successfully"),()=>{console.log("Cleaning up Three.js scene"),window.removeEventListener("resize",L),K.current&&cancelAnimationFrame(K.current),q.domElement&&(q.domElement.removeEventListener("mousedown",M),q.domElement.removeEventListener("mousemove",N),q.domElement.removeEventListener("mouseup",B),q.domElement.removeEventListener("wheel",X),q.domElement.removeEventListener("contextmenu",U)),window.removeEventListener("keydown",b),window.removeEventListener("keyup",A),d.current&&q.domElement&&d.current.removeChild(q.domElement),q.dispose()}}catch(M){console.error("Error initializing Three.js:",M)}},[t,n,s,a,c,o.destination]),m.useEffect(()=>{!p.current||!i||(console.log("Updating objects in scene, count:",e.length),x.current.forEach(M=>{p.current.remove(M),M.geometry.dispose(),Array.isArray(M.material)?M.material.forEach(N=>N.dispose()):M.material.dispose()}),x.current.clear(),e.forEach(M=>{const N=qt[M.type];if(!N)return;const B=t===M.id,X=eu(N.geometry,M.size),b=tu(N,B),A=new Ee(X,b);A.position.set(...M.position),A.rotation.set(...M.rotation||[0,0,0]),A.scale.set(...M.scale||[1,1,1]),A.castShadow=!0,A.receiveShadow=!0,A.userData={id:M.id,type:M.type},p.current.add(A),x.current.set(M.id,A)}))},[e,t,i]),r.jsx("div",{ref:d,className:"w-full h-full bg-background",children:!i&&r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-white text-center",children:[r.jsx(ns,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),r.jsx("p",{children:"Loading 3D Scene..."})]})})})}const jt=(e,s)=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):s}catch(t){return console.warn(`Failed to load ${e} from storage:`,t),s}},Nt=(e,s)=>{try{localStorage.setItem(e,JSON.stringify(s))}catch(t){console.warn(`Failed to save ${e} to storage:`,t)}};function Fo(){const e={SCENARIO:"nasa-habitat-scenario",OBJECTS:"nasa-habitat-objects",SELECTED_ID:"nasa-habitat-selected-id",CAD_DESIGNS:"nasa-habitat-cad-designs",VALIDATION_RESULTS:"nasa-habitat-validation-results",ACTIVE_TAB:"nasa-habitat-active-tab"},[s,t]=m.useState(()=>jt(e.SCENARIO,{crew_size:4,mission_duration_days:900,destination:"MARS_TRANSIT",fairing:bs[2]})),[n,o]=m.useState({shape:"CYLINDER",levels:2,dimensions:{diameter_m:6.5,height_m:12},pressurized_volume_m3:400,net_habitable_volume_m3:300}),[a,i]=m.useState(()=>jt(e.OBJECTS,[])),[c,l]=m.useState(()=>jt(e.SELECTED_ID,null)),[h,u]=m.useState(()=>jt(e.VALIDATION_RESULTS,null)),[d,p]=m.useState({validation:!1}),[g,f]=m.useState(!1),[x,y]=m.useState(1),[P,z]=m.useState(!1),[E,I]=m.useState(!0),[K,V]=m.useState(!0),[M,N]=m.useState(!0),[B,X]=m.useState(!0),[b,A]=m.useState(!0),[U,_]=m.useState(!0),[L,O]=m.useState(()=>jt(e.ACTIVE_TAB,"design")),[ee,D]=m.useState(!1),[Y,fe]=m.useState(!1),[q,ge]=m.useState({visible:!1,x:0,y:0,objectId:null}),[re,he]=m.useState(null),[pe,me]=m.useState(!0),[w,S]=m.useState(null),[C,v]=m.useState(()=>jt(e.CAD_DESIGNS,[])),H=m.useRef(null);m.useEffect(()=>{To().catch(console.error)},[]),m.useEffect(()=>{const j=setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100);return()=>clearTimeout(j)},[U]),m.useEffect(()=>{Nt(e.OBJECTS,a)},[a]),m.useEffect(()=>{Nt(e.SCENARIO,s)},[s]),m.useEffect(()=>{Nt(e.SELECTED_ID,c)},[c]),m.useEffect(()=>{Nt(e.ACTIVE_TAB,L)},[L]),m.useEffect(()=>{Nt(e.CAD_DESIGNS,C)},[C]),m.useEffect(()=>{const j=k=>{k.target};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]),m.useEffect(()=>{const j=k=>{if(!c||k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(k.code)&&k.preventDefault();const R=k.shiftKey?1:.5,$=k.shiftKey?Math.PI/4:Math.PI/8;let F="";i(se=>se.map(T=>{if(T.id!==c)return T;const J={...T};switch(k.code){case"ArrowLeft":J.position=[T.position[0]-R,T.position[1],T.position[2]],F=`Moving Left (${R}m)`;break;case"ArrowRight":J.position=[T.position[0]+R,T.position[1],T.position[2]],F=`Moving Right (${R}m)`;break;case"ArrowUp":k.ctrlKey?(J.position=[T.position[0],T.position[1]+R,T.position[2]],F=`Moving Up (${R}m)`):(J.position=[T.position[0],T.position[1],T.position[2]-R],F=`Moving Forward (${R}m)`);break;case"ArrowDown":k.ctrlKey?(J.position=[T.position[0],T.position[1]-R,T.position[2]],F=`Moving Down (${R}m)`):(J.position=[T.position[0],T.position[1],T.position[2]+R],F=`Moving Backward (${R}m)`);break;case"KeyQ":const ve=T.rotation?.[1]||0;J.rotation=[T.rotation?.[0]||0,ve-$,T.rotation?.[2]||0],F=`Rotating Left (${Math.round($*180/Math.PI)})`;break;case"KeyE":const st=T.rotation?.[1]||0;J.rotation=[T.rotation?.[0]||0,st+$,T.rotation?.[2]||0],F=`Rotating Right (${Math.round($*180/Math.PI)})`;break;case"KeyR":const ds=T.rotation?.[0]||0;J.rotation=[ds+$,T.rotation?.[1]||0,T.rotation?.[2]||0],F=`Pitch Up (${Math.round($*180/Math.PI)})`;break;case"KeyF":const Jr=T.rotation?.[0]||0;J.rotation=[Jr-$,T.rotation?.[1]||0,T.rotation?.[2]||0],F=`Pitch Down (${Math.round($*180/Math.PI)})`;break;case"KeyW":J.position=[T.position[0],T.position[1]+R,T.position[2]],F=`Moving Up (${R}m)`;break;case"KeyS":J.position=[T.position[0],T.position[1]-R,T.position[2]],F=`Moving Down (${R}m)`;break;case"KeyT":const da=T.rotation?.[2]||0;J.rotation=[T.rotation?.[0]||0,T.rotation?.[1]||0,da-$],F=`Roll Left (${Math.round($*180/Math.PI)})`;break;case"KeyG":const ua=T.rotation?.[2]||0;J.rotation=[T.rotation?.[0]||0,T.rotation?.[1]||0,ua+$],F=`Roll Right (${Math.round($*180/Math.PI)})`;break;case"Equal":case"NumpadAdd":if(k.ctrlKey){const ut=T.scale||[1,1,1],ht=.1;J.scale=[Math.min(ut[0]+ht,3),Math.min(ut[1]+ht,3),Math.min(ut[2]+ht,3)],F=`Scaling Up (${Math.round(J.scale[0]*100)}%)`}break;case"Minus":case"NumpadSubtract":if(k.ctrlKey){const ut=T.scale||[1,1,1],ht=.1;J.scale=[Math.max(ut[0]-ht,.2),Math.max(ut[1]-ht,.2),Math.max(ut[2]-ht,.2)],F=`Scaling Down (${Math.round(J.scale[0]*100)}%)`}break;case"KeyX":k.ctrlKey&&(J.rotation=[0,0,0],F="Reset Rotation");break;case"KeyC":k.ctrlKey&&(J.scale=[1,1,1],F="Reset Scale");break}return J})),F&&(S(F),setTimeout(()=>S(null),1500))};return document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}},[c]),m.useEffect(()=>{Nt(e.CAD_DESIGNS,C)},[C]);const ie=m.useCallback(j=>{const k=j.layout;t($=>({...$,crew_size:k.scenario.crew_size,mission_duration_days:k.scenario.mission_duration_days,destination:k.scenario.destination}));const R=k.modules.map($=>({id:$.id,type:$.type,position:[...$.position,0],rotation:[0,0,0],scale:[1,1,1],size:$.size}));i(R),O("design"),u(null),alert(`Loaded design: ${j.name}`)},[]),te=m.useCallback(j=>{const k=`${j.toLowerCase().replace("_","-")}-${x}`;return y(R=>R+1),k},[x]),Q=m.useCallback(()=>({scenario:{crew_size:s.crew_size,mission_duration_days:s.mission_duration_days,destination:s.destination,fairing:{name:s.fairing.name,inner_diameter_m:s.fairing.inner_diameter_m,inner_height_m:s.fairing.inner_height_m,shape:s.fairing.shape==="CYLINDRICAL"?"CYLINDER":"CONE"}},habitat:{shape:n.shape,levels:n.levels,dimensions:n.dimensions,pressurized_volume_m3:n.pressurized_volume_m3,net_habitable_volume_m3:n.net_habitable_volume_m3},modules:a.map(j=>({id:j.id,type:j.type,level:0,position:[j.position[0],j.position[2]],size:j.size,rotation_deg:0,crew_capacity:j.type==="CREW_SLEEP"?1:void 0,equipment:[]})),version:"1.0.0"}),[s,n,a]),ce=m.useCallback(async()=>{const j=Q(),k=new Date().toLocaleString();D(!0);try{const R=await Yr({name:`Habitat Design ${k}`,description:`Design with ${a.length} modules for ${s.destination} mission`,layout:j,tags:["nasa",s.destination.toLowerCase(),`crew-${s.crew_size}`]});alert(`Design saved successfully! ID: ${R}`)}catch(R){console.error("Failed to save design:",R),alert("Failed to save design. Please try again.")}finally{D(!1)}},[a,s,Q]),le=m.useCallback(async()=>{if(a.length===0){alert("No modules to save. Add some modules first.");return}await ce()},[a,ce]),we=m.useRef({camera:null,renderer:null,raycaster:null,plane:null}),Re=m.useCallback((j,k)=>{const{camera:R,renderer:$,raycaster:F,plane:se}=we.current;if(!R||!$||!F||!se)return console.log("Scene not ready for drop calculation"),null;const T=$.domElement.getBoundingClientRect(),J=(j-T.left)/T.width*2-1,ve=-((k-T.top)/T.height)*2+1,st=new Pt(J,ve);F.setFromCamera(st,R);const ds=new je;return F.ray.intersectPlane(se,ds)?ds:null},[]);function be(j){j.preventDefault();const k=j.dataTransfer.getData("module");if(!k)return;const R=Re(j.clientX,j.clientY);if(!R){console.log("Could not calculate drop position");return}const $=te(k),F=qt[k],se=Bt.find(ve=>ve.type===k);if(!F||!se)return;const T=[Vs(R.x),F.size.height/2,Vs(R.z)],J={id:$,type:k,position:T,rotation:[0,0,0],scale:[1,1,1],size:se.defaultSize};console.log("Adding NASA module at:",T,"from drop at:",{x:j.clientX,y:j.clientY}),i(ve=>[...ve,J]),l($)}function We(j){j.preventDefault();const k=Re(j.clientX,j.clientY);k&&H.current&&H.current.copy(k)}const Me=async()=>{p(j=>({...j,validation:!0}));try{const j=a.map(T=>({id:T.id,type:T.type,level:T.level||0,position:[T.position[0],T.position[1]],size:{w_m:T.size.w_m,l_m:T.size.l_m,h_m:T.size.h_m},rotation_deg:T.rotation?T.rotation[1]*(180/Math.PI):0,equipment:[]})),k={crew_size:parseInt(localStorage.getItem("crew_size")||"4"),mission_duration_days:parseInt(localStorage.getItem("mission_duration")||"365"),destination:localStorage.getItem("destination")||"MARS_SURFACE",fairing:n.fairing||bs[0]},R={shape:n.shape||"CYLINDER",levels:n.levels||1,dimensions:n.dimensions||{diameter_m:6.5,height_m:12},pressurized_volume_m3:n.pressurized_volume_m3||400,net_habitable_volume_m3:n.net_habitable_volume_m3||300};console.log(" Sending to NASA API:",{modules:j,scenario:k,habitatData:R});const $=wt.convertToValidationPayload(j,k,R);console.log(" Full API Payload:",$);const F=await wt.validateHabitat($);console.log(" NASA API Response:",F);const se={...F,isRealAPIResult:!0,apiSource:"NASA Habitat Validation API"};u(se),localStorage.setItem(e.VALIDATION_RESULTS,JSON.stringify(se))}catch(j){console.error(" NASA validation API failed:",j);const k={results:[{rule:"api.connection",valid:!1,explanation:`NASA Validation API is currently unavailable: ${j.message||"Network error"}`},{rule:"local.basic_check",valid:a.length>0,explanation:a.length===0?"No modules placed in habitat design":`Local validation: Found ${a.length} modules in design`}],suggestions:["NASA API validation is temporarily unavailable - this is a local fallback",a.length===0?"Add habitat modules to your design before validation":"Try validation again later when NASA API is available","For full NASA compliance validation, ensure the API endpoint is accessible"],isRealAPIResult:!1,apiSource:"Local Fallback (API Unavailable)",apiError:j.message||"Unknown error"};u(k)}p(j=>({...j,validation:!1}))},Le=()=>{i([]),u(null),l(null)},ae=m.useCallback(j=>{i(k=>k.filter(R=>R.id!==j)),c===j&&l(null),ge({visible:!1,x:0,y:0,objectId:null})},[c]),ue=m.useCallback(j=>{const k=a.find(F=>F.id===j);if(!k)return;const R=te(k.type),$={...k,id:R,position:[k.position[0]+2,k.position[1],k.position[2]+2]};i(F=>[...F,$]),l(R),ge({visible:!1,x:0,y:0,objectId:null})},[a,te]),ke=m.useCallback(j=>{const k=a.find(R=>R.id===j);k&&he(k),ge({visible:!1,x:0,y:0,objectId:null})},[a]),ze=m.useCallback(()=>{if(!re)return;const j=te(re.type),k={...re,id:j,position:[re.position[0]+2,re.position[1],re.position[2]+2]};i(R=>[...R,k]),l(j),ge({visible:!1,x:0,y:0,objectId:null})},[re,te]),Pe=m.useCallback((j,k)=>{i(R=>R.map($=>{if($.id===j){const F=$.scale||[1,1,1];return{...$,scale:[F[0]*k,F[1]*k,F[2]*k]}}return $})),ge({visible:!1,x:0,y:0,objectId:null})},[]);m.useEffect(()=>{const j=k=>{k.key==="Delete"&&c?ae(c):k.ctrlKey&&k.key==="c"&&c?ke(c):k.ctrlKey&&k.key==="v"&&re?ze():k.ctrlKey&&k.key==="d"&&c&&(k.preventDefault(),ue(c))};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[c,re,ae,ke,ze,ue]),m.useEffect(()=>{const j=()=>{q.visible&&ge({visible:!1,x:0,y:0,objectId:null})};return document.addEventListener("click",j),()=>document.removeEventListener("click",j)},[q.visible]),m.useCallback(()=>{v([{id:"cad-1",name:"Custom Storage Module",shapes:[{type:"box",width:2,height:2,depth:1,position:[0,0,0]},{type:"cylinder",radius:.5,height:2,position:[1,0,0]}],bounds:{width:3,height:2,depth:1}},{id:"cad-2",name:"Curved Living Space",shapes:[{type:"torus",radius:1.5,height:.3,position:[0,0,0]},{type:"sphere",radius:1,position:[0,1,0]}],bounds:{width:3,height:2,depth:3}}]),alert("CAD designs imported! Check the module library for custom modules.")},[]),m.useCallback(()=>{if(a.length===0){alert("No modules to export to CAD. Add some modules first.");return}const j={name:`Habitat Export ${new Date().toISOString().split("T")[0]}`,objects:a.map(F=>({id:F.id,type:F.type,position:F.position,rotation:F.rotation||[0,0,0],scale:F.scale||[1,1,1],size:F.size})),bounds:{width:Math.max(...a.map(F=>F.position[0]+F.size.w_m))-Math.min(...a.map(F=>F.position[0])),height:Math.max(...a.map(F=>F.size.h_m)),depth:Math.max(...a.map(F=>F.position[2]+F.size.l_m))-Math.min(...a.map(F=>F.position[2]))}},k=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),R=URL.createObjectURL(k),$=document.createElement("a");$.href=R,$.download="habitat-for-cad.json",$.click(),URL.revokeObjectURL(R),alert("Habitat exported to CAD format!")},[a]);const is=m.useCallback(j=>{const k=te("CUSTOM_CAD"),R={id:k,type:"CUSTOM_CAD",position:[0,j.bounds.height/2,0],rotation:[0,0,0],scale:[1,1,1],size:{w_m:j.bounds.width,h_m:j.bounds.height,l_m:j.bounds.depth}};i($=>[...$,R]),l(k),alert(`Added custom CAD module: ${j.name}`)},[te]),cs=()=>{i([]),l(null),t({crew_size:4,mission_duration_days:365,destination:"mars",fairing:"falcon_heavy"});const j=te("CREW_SLEEP"),k=Bt.find(R=>R.type==="CREW_SLEEP");if(k){const R={id:j,type:"CREW_SLEEP",position:[0,1.5,0],rotation:[0,0,0],scale:[1,1,1],size:k.defaultSize};i([R]),l(j)}O("design"),alert("New design created! Added a crew sleep module to get you started.")},ls=()=>{["CREW_SLEEP","HYGIENE","FOOD_PREP","EXERCISE"].forEach((k,R)=>{const $=te(k),F=Bt.find(T=>T.type===k);if(!F)return;const se={id:$,type:k,position:[R*3-4.5,1.5,0],rotation:[0,0,0],scale:[1,1,1],size:F.defaultSize};i(T=>[...T,se])})},Ie=a.find(j=>j.id===c);return r.jsxs("div",{className:"w-full h-screen bg-background text-foreground space-gradient flex flex-col",children:[r.jsx("header",{className:"nav-container shadow-2xl",children:r.jsxs("div",{className:"flex items-center justify-between p-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx(An,{className:"w-6 h-6 text-white drop-shadow-lg"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary to-blue-400 bg-clip-text text-transparent",children:"NASA Habitat Designer"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Professional space habitat layout tool"})]})]}),r.jsxs("nav",{className:"flex items-center gap-1",children:[r.jsxs(oe,{onClick:()=>O("design"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${L==="design"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[r.jsx(Wr,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Design Area"})]}),r.jsxs(oe,{onClick:()=>O("cad"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${L==="cad"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Laboratory CAD"})]}),r.jsxs(oe,{onClick:()=>O("collections"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${L==="collections"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[r.jsx(wr,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Collections"})]}),r.jsxs(oe,{onClick:()=>O("analyses"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${L==="analyses"?"bg-primary text-primary-foreground border-primary/50 shadow-lg":"bg-card text-card-foreground border-border hover:bg-accent hover:text-accent-foreground"} border`,children:[r.jsx(Cs,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Analyses"})]}),r.jsx("div",{className:"w-px h-8 bg-border mx-2"}),r.jsxs(oe,{onClick:le,className:"px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 bg-green-600/80 hover:bg-green-600 text-white border border-green-500/50 shadow-lg",disabled:ee,children:[ee?r.jsx(ns,{className:"w-4 h-4 animate-spin"}):r.jsx(qr,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Save Project"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(oe,{onClick:cs,className:"btn-space px-3 py-2",children:[r.jsx(Ue,{className:"w-4 h-4 mr-1"}),"New"]}),r.jsxs(oe,{onClick:Le,className:"btn-mars px-3 py-2",children:[r.jsx(os,{className:"w-4 h-4 mr-1"}),"Clear"]})]})]})}),r.jsx("div",{className:"flex-1 flex",children:L==="design"?r.jsxs("div",{className:"flex flex-1 relative",children:[U&&r.jsxs("aside",{className:"w-80 nav-container shadow-2xl border-r border-border flex flex-col overflow-y-auto",children:[r.jsx("div",{className:"p-3 border-b border-border bg-card/20",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-primary to-blue-600 rounded-md flex items-center justify-center",children:r.jsx(pt,{className:"w-3 h-3 text-white"})}),r.jsx("span",{className:"font-semibold text-foreground",children:"Mission Control"})]}),r.jsx(oe,{onClick:()=>_(!1),className:"w-8 h-8 p-0 rounded-lg hover:bg-accent",title:"Hide Sidebar",variant:"ghost",size:"sm",children:r.jsx(dd,{className:"w-4 h-4"})})]})}),r.jsxs("div",{className:"p-3 border-b border-border",children:[r.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>N(!M),children:[M?r.jsx(nt,{className:"w-4 h-4"}):r.jsx(Ue,{className:"w-4 h-4"}),"NASA Mission Scenario"]}),M&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(Kt,{className:"text-muted-foreground text-xs",children:"Crew"}),r.jsx(Sr,{type:"number",value:s.crew_size,onChange:j=>t(k=>({...k,crew_size:parseInt(j.target.value)||0})),className:"bg-background border-border text-foreground text-xs h-7 hover:bg-accent/50 transition-colors"})]}),r.jsxs("div",{children:[r.jsx(Kt,{className:"text-muted-foreground text-xs",children:"Days"}),r.jsx(Sr,{type:"number",value:s.mission_duration_days,onChange:j=>t(k=>({...k,mission_duration_days:parseInt(j.target.value)||0})),className:"bg-background border-border text-foreground text-xs h-7 hover:bg-accent/50 transition-colors"})]})]}),r.jsxs("div",{children:[r.jsx(Kt,{className:"text-muted-foreground text-xs",children:"Destination"}),r.jsxs("select",{value:s.destination,onChange:j=>t(k=>({...k,destination:j.target.value})),className:"w-full bg-background border border-border text-foreground text-xs h-7 rounded-md px-2 hover:bg-accent/50 transition-colors focus:ring-1 focus:ring-primary/50",children:[r.jsx("option",{value:"LEO",children:"Low Earth Orbit"}),r.jsx("option",{value:"LUNAR",children:"Lunar Surface"}),r.jsx("option",{value:"MARS_TRANSIT",children:"Mars Transit"}),r.jsx("option",{value:"MARS_SURFACE",children:"Mars Surface"}),r.jsx("option",{value:"DEEP_SPACE",children:"Deep Space"})]})]}),r.jsxs("div",{children:[r.jsx(Kt,{className:"text-muted-foreground text-xs",children:"Launch Vehicle"}),r.jsx("select",{value:s.fairing.name,onChange:j=>{const k=bs.find(R=>R.name===j.target.value);k&&t(R=>({...R,fairing:k}))},className:"w-full bg-background border border-border text-foreground text-xs h-7 rounded-md px-2 hover:bg-accent/50 transition-colors focus:ring-1 focus:ring-primary/50",children:bs.map(j=>r.jsx("option",{value:j.name,children:j.name},j.name))})]})]})]}),r.jsxs("div",{className:"p-3 border-b border-border",children:[r.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>I(!E),children:[E?r.jsx(nt,{className:"w-4 h-4"}):r.jsx(Ue,{className:"w-4 h-4"}),"NASA Functional Areas"]}),E&&r.jsxs("div",{className:"max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:[r.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(qt).map(([j,k])=>{const R=Bt.find($=>$.type===j);return r.jsxs("div",{draggable:!0,onDragStart:$=>$.dataTransfer.setData("module",j),className:"group flex flex-col items-center gap-2 p-2 bg-card/40 hover:bg-primary/20 border border-border hover:border-primary/60 rounded-lg cursor-grab active:cursor-grabbing transition-all duration-200 backdrop-blur-sm hover:shadow-lg",children:[r.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center text-white text-sm shadow-lg flex-shrink-0",style:{backgroundColor:k.color},children:k.icon}),r.jsxs("div",{className:"text-center min-w-0 w-full",children:[r.jsx("div",{className:"font-medium text-foreground text-xs truncate",children:R?.label||j}),r.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[R?.defaultSize.w_m||k.size.width,"",R?.defaultSize.h_m||k.size.height,"",R?.defaultSize.l_m||k.size.depth,"m"]})]})]},j)})}),r.jsxs("div",{className:"text-xs text-muted-foreground text-center mt-2",children:["Scroll to see all ",Object.keys(qt).length," functional areas"]})]})]}),C.length>0&&r.jsxs("div",{className:"p-3 border-b border-border",children:[r.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>V(!K),children:[K?r.jsx(nt,{className:"w-4 h-4"}):r.jsx(Ue,{className:"w-4 h-4"}),"Custom CAD Modules"]}),K&&r.jsx("div",{className:"max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:r.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(j=>r.jsxs("div",{className:"group flex flex-col items-center gap-2 p-2 bg-card/40 hover:bg-orange-500/20 border border-border hover:border-orange-500/60 rounded-lg cursor-pointer transition-all duration-200 backdrop-blur-sm hover:shadow-lg",onClick:()=>is(j),children:[r.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded flex items-center justify-center text-white text-sm shadow-lg flex-shrink-0",children:r.jsx(pt,{className:"w-4 h-4"})}),r.jsxs("div",{className:"text-center min-w-0 w-full",children:[r.jsx("div",{className:"font-medium text-foreground text-xs truncate",children:j.name}),r.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[j.bounds.width.toFixed(1),"",j.bounds.height.toFixed(1),"",j.bounds.depth.toFixed(1),"m"]})]})]},j.id))})})]}),r.jsxs("div",{className:"p-3 border-b border-border",children:[r.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>X(!B),children:[B?r.jsx(nt,{className:"w-4 h-4"}):r.jsx(Ue,{className:"w-4 h-4"}),"Quick Actions"]}),B&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{onClick:ls,className:"w-full btn-space text-xs py-2 h-8",size:"sm",children:[r.jsx(Ue,{className:"w-3 h-3 mr-1"}),"Add Sample Module"]}),r.jsxs(oe,{onClick:()=>O("shapes"),className:"w-full btn-space text-xs py-2 h-8",size:"sm",children:[r.jsx(Rd,{className:"w-3 h-3 mr-1"}),"Custom Shape Builder"]}),r.jsxs(oe,{onClick:()=>O("cad"),className:"w-full btn-space text-xs py-2 h-8",size:"sm",children:[r.jsx(pt,{className:"w-3 h-3 mr-1"}),"CAD Laboratory"]})]})]}),Ie&&r.jsxs("div",{className:"p-4 border-b border-border",children:[r.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2 cursor-pointer hover:text-primary transition-colors",onClick:()=>A(!b),children:[b?r.jsx(nt,{className:"w-4 h-4"}):r.jsx(Ue,{className:"w-4 h-4"}),"Module Inspector"]}),b&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-card/40 border border-border rounded-lg",children:[r.jsxs("div",{className:"font-medium text-foreground capitalize flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:qt[Ie.type]?.icon}),Bt.find(j=>j.type===Ie.type)?.label]}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[r.jsxs("div",{children:["Position: (",Ie.position[0].toFixed(1),"m, ",Ie.position[1].toFixed(1),"m, ",Ie.position[2].toFixed(1),"m)"]}),r.jsxs("div",{children:["Volume: ",(Ie.size.w_m*Ie.size.l_m*Ie.size.h_m).toFixed(1),"m"]}),r.jsxs("div",{children:["Area: ",(Ie.size.w_m*Ie.size.l_m).toFixed(1),"m"]})]})]}),r.jsxs("button",{onClick:()=>{i(j=>j.filter(k=>k.id!==c)),l(null)},className:"w-full flex items-center justify-center gap-2 p-2 text-destructive hover:text-destructive/80 hover:bg-destructive/10 border border-destructive/30 rounded-lg transition-all",children:[r.jsx(os,{className:"w-4 h-4"}),"Remove Module"]})]})]}),r.jsxs("div",{className:"p-4 border-b border-purple-500/20",children:[r.jsx("h3",{className:"font-semibold text-purple-300 mb-3",children:"Mission Status"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"text-sm text-gray-300",children:["Modules: ",r.jsx("span",{className:"font-medium text-purple-300",children:a.length})]}),r.jsxs("div",{className:"text-sm text-gray-300",children:["Total Volume: ",r.jsxs("span",{className:"font-medium text-purple-300",children:[a.reduce((j,k)=>j+k.size.w_m*k.size.l_m*k.size.h_m,0).toFixed(1),"m"]})]}),r.jsxs("div",{className:"text-sm text-gray-300",children:["3D Engine: ",r.jsx("span",{className:"font-medium text-green-300",children:P?"Active":"Loading..."})]})]})]})]}),!U&&r.jsx(oe,{onClick:()=>_(!0),className:"absolute top-4 left-4 z-50 w-8 h-8 p-0 rounded-lg bg-card border border-border hover:bg-accent shadow-lg",title:"Show Sidebar",variant:"ghost",children:r.jsx(hd,{className:"w-4 h-4"})}),r.jsxs("main",{className:"flex-1 relative",onDrop:be,onDragOver:We,children:[r.jsx(ru,{objects:a,setObjects:i,selectedId:c,setSelectedId:l,scenario:s,hoverPointRef:H,isInitialized:P,setIsInitialized:z,sceneRefs:we,onContextMenu:(j,k,R)=>{ge({visible:!0,x:j,y:k,objectId:R})}}),r.jsx("div",{className:"absolute top-6 right-6 glass-morphism rounded-xl p-4 shadow-2xl border border-blue-500/30 glow-blue",children:r.jsxs("div",{className:"text-sm space-y-2",children:[r.jsxs("div",{className:"font-medium text-blue-300 flex items-center gap-2 text-shadow",children:[r.jsx(pt,{className:"w-4 h-4"}),s.destination.replace("_"," ")]}),r.jsxs("div",{className:"text-xs text-gray-300 space-y-1 text-shadow-sm",children:[r.jsxs("div",{children:["Crew: ",s.crew_size," members"]}),r.jsxs("div",{children:["Duration: ",s.mission_duration_days," days"]}),r.jsxs("div",{children:["Vehicle: ",s.fairing.name]}),r.jsxs("div",{children:["Modules: ",a.length]})]})]})}),pe&&r.jsx("div",{className:"absolute bottom-6 right-6 glass-morphism rounded-xl p-3 shadow-2xl border border-purple-500/30 glow-purple max-w-[220px]",children:r.jsxs("div",{className:"text-xs space-y-2",children:[r.jsxs("div",{className:"font-medium text-purple-300 flex items-center justify-between text-shadow",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(An,{className:"w-3 h-3"}),"Controls"]}),r.jsx("button",{onClick:()=>me(!1),className:"text-gray-400 hover:text-white transition-colors text-xs",children:""})]}),r.jsxs("div",{className:"text-gray-300 text-shadow-sm space-y-1",children:[r.jsx("div",{className:"text-[10px] font-medium text-purple-200",children:"Camera:"}),r.jsxs("div",{className:"text-[10px]",children:[" ",r.jsx("kbd",{className:"bg-gray-800/50 px-1 rounded text-[9px]",children:"Space"})," + Drag: Pan"]}),r.jsx("div",{className:"text-[10px]",children:" Mouse wheel: Zoom"})]}),r.jsxs("div",{className:"text-gray-300 text-shadow-sm space-y-1",children:[r.jsx("div",{className:"text-[10px] font-medium text-yellow-200",children:"Objects (when selected):"}),r.jsx("div",{className:"text-[10px]",children:" Arrow keys: Move X/Z  W/S: Height"}),r.jsx("div",{className:"text-[10px]",children:" Q/E: Rotate  R/F/T/G: Pitch/Roll"}),r.jsx("div",{className:"text-[10px]",children:" Hold Shift: Faster movement"})]})]})}),c&&r.jsxs("div",{className:"absolute top-6 left-6 glass-morphism rounded-xl p-3 shadow-2xl border border-yellow-500/40 glow-orange max-w-[280px]",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-300 font-medium mb-2 text-shadow text-xs",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse shadow-lg"}),"Module Selected - Keyboard Controls"]}),r.jsxs("div",{className:"text-[10px] text-gray-300 space-y-1 text-shadow-sm",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:[r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:""})," Move X"]}),r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:""})," Move Z"]}),r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"W/S"})," Height"]}),r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"Q/E"})," Rotate Y"]}),r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"R/F"})," Pitch"]}),r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"T/G"})," Roll"]}),r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"Ctrl+"})," Scale"]}),r.jsxs("div",{children:[r.jsx("kbd",{className:"bg-gray-700/80 px-1 py-0.5 rounded text-[8px]",children:"Shift"})," Fast"]})]}),r.jsx("div",{className:"text-[9px] text-gray-400 mt-2 border-t border-gray-600/50 pt-1",children:"Ctrl+X: Reset rotation  Ctrl+C: Reset scale"})]})]}),w&&r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-black/80 backdrop-blur-sm border border-green-500/50 rounded-lg px-4 py-2 shadow-2xl animate-pulse",children:r.jsxs("div",{className:"flex items-center gap-2 text-green-300 font-medium text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),w]})})]})]}):L==="collections"?r.jsx(Xd,{currentLayout:Q(),onLoadDesign:ie,onSaveSuccess:()=>O("design")}):L==="shapes"?r.jsx(Ln,{}):L==="cad"?r.jsx(Zd,{onBackToDesign:()=>O("design"),onSaveDesign:j=>{v(k=>[...k,{id:Date.now().toString(),name:j.name,shapes:j.shapes,bounds:j.bounds}]),alert(`CAD design "${j.name}" is now available as a custom module!`)}}):L==="analyses"?r.jsx("div",{className:"flex-1 bg-gradient-to-br from-purple-950/20 via-transparent to-pink-950/20 p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h2",{className:"text-3xl font-bold text-purple-200 mb-2 flex items-center gap-3",children:[r.jsx(Cs,{className:"w-8 h-8 text-purple-400"}),"Habitat Analysis Center"]}),r.jsx("p",{className:"text-gray-400",children:"Comprehensive analysis and validation tools for your habitat design"})]}),r.jsx(Io,{nhv:n.net_habitable_volume_m3,pressurizedVolume:n.pressurized_volume_m3,utilization:Math.min(100,a.reduce((j,k)=>j+k.size.w_m*k.size.l_m*k.size.h_m,0)/n.net_habitable_volume_m3*100),corridorStatus:a.length>0?"success":"danger"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(xe,{className:"glass-morphism border-purple-500/30 shadow-xl glow-purple",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-purple-200",children:[r.jsx(rs,{className:"w-5 h-5 text-green-400"}),"NASA Standards Validation"]})}),r.jsxs(ye,{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:"Validate your habitat design against NASA standards and requirements."}),r.jsx(oe,{onClick:Me,disabled:d.validation,className:"w-full btn-nasa",children:d.validation?r.jsxs(r.Fragment,{children:[r.jsx(ns,{className:"w-4 h-4 animate-spin mr-2"}),"Validating Design..."]}):r.jsxs(r.Fragment,{children:[r.jsx(rs,{className:"w-4 h-4 mr-2"}),"Run NASA Validation"]})})]})]}),r.jsxs(xe,{className:"glass-morphism border-orange-500/30 shadow-xl glow-orange",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-orange-200",children:[r.jsx(Cs,{className:"w-5 h-5 text-orange-400"}),"Quick Analysis"]})}),r.jsx(ye,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"bg-gray-800/40 p-3 rounded-lg",children:[r.jsx("div",{className:"text-gray-400",children:"Total Modules"}),r.jsx("div",{className:"text-2xl font-bold text-orange-300",children:a.length})]}),r.jsxs("div",{className:"bg-gray-800/40 p-3 rounded-lg",children:[r.jsx("div",{className:"text-gray-400",children:"Total Volume"}),r.jsxs("div",{className:"text-2xl font-bold text-orange-300",children:[a.reduce((j,k)=>j+k.size.w_m*k.size.l_m*k.size.h_m,0).toFixed(1),"m"]})]})]})})]})]}),h&&r.jsx("div",{className:"mt-6",children:r.jsx(zs,{results:h})})]})}):r.jsx(Ln,{})}),h&&r.jsx("div",{className:"glass-morphism border-t border-purple-500/20 p-4 shadow-2xl",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsx(zs,{results:h})})}),q.visible&&r.jsx("div",{className:"fixed bg-gray-900 border border-gray-600 rounded-lg shadow-xl z-50 py-2 min-w-[160px]",style:{left:q.x,top:q.y,transform:"translate(-50%, 0)"},onClick:j=>j.stopPropagation(),children:q.objectId?r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>Pe(q.objectId,1.2),children:" Zoom In (120%)"}),r.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>Pe(q.objectId,.8),children:" Zoom Out (80%)"}),r.jsx("hr",{className:"border-gray-700 my-1"}),r.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>ue(q.objectId),children:" Duplicate"}),r.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>ke(q.objectId),children:" Copy"}),re&&r.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>ze(),children:" Paste"}),r.jsx("hr",{className:"border-gray-700 my-1"}),r.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-red-800 text-sm text-red-300 flex items-center gap-2",onClick:()=>ae(q.objectId),children:" Delete"})]}):re&&r.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-200 flex items-center gap-2",onClick:()=>ze(),children:" Paste"})})]})}const nu=[{id:"sleep",label:"Sleep",icon:"",color:"zone-sleep"},{id:"hygiene",label:"Hygiene",icon:"",color:"zone-hygiene"},{id:"food",label:"Food",icon:"",color:"zone-food"},{id:"exercise",label:"Exercise",icon:"",color:"zone-exercise"},{id:"medical",label:"Medical",icon:"",color:"zone-medical"},{id:"stowage",label:"Storage",icon:"",color:"zone-stowage"},{id:"work",label:"Work",icon:"",color:"zone-work"},{id:"common",label:"Common",icon:"",color:"zone-common"},{id:"airlock",label:"Airlock",icon:"",color:"zone-airlock"}],ou=({enabled:e,onToggle:s,className:t})=>r.jsxs("div",{className:Ce("space-y-4",t),children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(oe,{variant:e?"primary":"surface",size:"md",onClick:()=>s(!e),className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:e?"":""}),"Zoning Overlay"]}),e&&r.jsx("div",{className:"text-sm text-muted-foreground",children:"Showing functional area zones and adjacency rules"})]}),e&&r.jsxs("div",{className:"glass p-4 rounded-lg animate-fade-in",children:[r.jsx("h4",{className:"text-sm font-medium text-text mb-3",children:"Functional Zones"}),r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-2",children:nu.map(n=>r.jsxs("div",{className:Ce("flex flex-col items-center gap-1 p-2 rounded-md text-xs",n.color),children:[r.jsx("div",{className:"text-base",children:n.icon}),r.jsx("span",{className:"text-center leading-tight",children:n.label})]},n.id))}),r.jsx("div",{className:"mt-4 pt-3 border-t border-muted text-xs text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-0 border-t-2 border-dashed border-success"}),r.jsx("span",{children:"Preferred Adjacent"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-0 border-t-2 border-dotted border-danger"}),r.jsx("span",{children:"Must Separate"})]})]})})]})]});function au(){const[e,s]=Fe.useState(!1);return r.jsx("div",{className:"min-h-screen bg-bg text-text p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-text mb-2",children:" NASA-Tech Design System"}),r.jsx("p",{className:"text-muted-foreground",children:"Professional space habitat design components"})]}),r.jsx(Ao,{})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Mission Metrics"}),r.jsx(Io,{nhv:245.8,pressurizedVolume:320.5,utilization:78.2,corridorStatus:"success"})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Functional Zoning"}),r.jsx(ou,{enabled:e,onToggle:s})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Button Variants"}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx(oe,{variant:"primary",children:"Primary Action"}),r.jsx(oe,{variant:"surface",children:"Surface Button"}),r.jsx(oe,{variant:"ghost",children:"Ghost Button"}),r.jsx(oe,{variant:"danger",children:"Danger Action"}),r.jsx(oe,{variant:"outline",children:"Outline Button"}),r.jsx(oe,{variant:"link",children:"Link Button"})]})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Status Badges"}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx(De,{variant:"neutral",children:"Neutral Status"}),r.jsx(De,{variant:"success",children:" Success"}),r.jsx(De,{variant:"warning",children:"! Warning"}),r.jsx(De,{variant:"danger",children:" Danger"})]})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Glass Surfaces"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(xe,{className:"glass",children:[r.jsx(Ne,{children:r.jsx(_e,{className:"flex items-center gap-2",children:" Lunar Module"})}),r.jsxs(ye,{children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"Habitat module designed for lunar surface operations with enhanced radiation shielding."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(De,{variant:"success",children:"Active"}),r.jsx(De,{variant:"neutral",children:"4 Crew"})]})]})]}),r.jsxs(xe,{className:"glass",children:[r.jsx(Ne,{children:r.jsx(_e,{className:"flex items-center gap-2",children:" Mars Module"})}),r.jsxs(ye,{children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"Long-duration habitat for Mars surface missions with advanced life support systems."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(De,{variant:"warning",children:"Standby"}),r.jsx(De,{variant:"neutral",children:"6 Crew"})]})]})]}),r.jsxs(xe,{className:"glass",children:[r.jsx(Ne,{children:r.jsx(_e,{className:"flex items-center gap-2",children:" Deep Space"})}),r.jsxs(ye,{children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"Multi-year transit habitat with rotating sections for artificial gravity generation."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(De,{variant:"danger",children:"Offline"}),r.jsx(De,{variant:"neutral",children:"8 Crew"})]})]})]})]})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Functional Zone Classes"}),r.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-4",children:[r.jsxs("div",{className:"zone-sleep p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Sleep"})]}),r.jsxs("div",{className:"zone-hygiene p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Hygiene"})]}),r.jsxs("div",{className:"zone-food p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Food"})]}),r.jsxs("div",{className:"zone-exercise p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Exercise"})]}),r.jsxs("div",{className:"zone-medical p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Medical"})]}),r.jsxs("div",{className:"zone-stowage p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Storage"})]}),r.jsxs("div",{className:"zone-work p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Work"})]}),r.jsxs("div",{className:"zone-common p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Common"})]}),r.jsxs("div",{className:"zone-airlock p-4 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"text-xs",children:"Airlock"})]})]})]})]})})}const In={scenario:{crew_size:16,mission_duration_days:365,destination:"MARS_SURFACE",fairing:{name:"Falcon 9",inner_diameter_m:5.2,inner_height_m:13.1,shape:"CONE"}},habitat:{shape:"CYLINDER",levels:2,dimensions:{diameter_m:6.5,height_m:12},pressurized_volume_m3:400,net_habitable_volume_m3:300},modules:[{id:"hygiene-1",type:"HYGIENE",level:0,position:[-1.5,-13.5],size:{w_m:2,l_m:2,h_m:2.2},rotation_deg:0,equipment:[]},{id:"food-prep-2",type:"FOOD_PREP",level:0,position:[-5,13],size:{w_m:3,l_m:3,h_m:2.2},rotation_deg:0,equipment:[]},{id:"medical-4",type:"MEDICAL",level:0,position:[12,2],size:{w_m:2.5,l_m:2.5,h_m:2.3},rotation_deg:0,equipment:[]}],version:"1.0.0"},Do=()=>{const[e,s]=m.useState(null),[t,n]=m.useState(!1),[o,a]=m.useState(null),i=async()=>{n(!0),a(null);try{const c=await wt.validateHabitat(In);s(c)}catch(c){console.error("Validation failed:",c),a(c instanceof Error?c.message:"Validation failed")}finally{n(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(xe,{children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2",children:[r.jsx(Os,{className:"w-5 h-5"}),"NASA Validation API Demo"]})}),r.jsx(ye,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-muted-foreground",children:"Test the NASA Habitat Validation API with a sample Mars surface habitat design."}),r.jsxs(oe,{onClick:i,disabled:t,className:"w-full sm:w-auto",children:[r.jsx(ns,{className:`w-4 h-4 mr-2 ${t?"animate-spin":"hidden"}`}),r.jsx(Os,{className:`w-4 h-4 mr-2 ${t?"hidden":""}`}),t?"Validating...":"Test NASA Validation"]}),o&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:r.jsx("p",{className:"text-red-800 text-sm",children:o})}),r.jsxs("details",{className:"mt-4",children:[r.jsx("summary",{className:"cursor-pointer text-sm font-medium text-muted-foreground hover:text-foreground",children:"View Sample Payload"}),r.jsx("pre",{className:"mt-2 p-3 bg-muted rounded-md text-xs overflow-x-auto",children:JSON.stringify(In,null,2)})]})]})})]}),e&&r.jsx(zs,{results:e})]})};function et(e,s,{checkForDefaultPrevented:t=!0}={}){return function(o){if(e?.(o),t===!1||!o.defaultPrevented)return s?.(o)}}function Qr(e,s=[]){let t=[];function n(a,i){const c=m.createContext(i),l=t.length;t=[...t,i];const h=d=>{const{scope:p,children:g,...f}=d,x=p?.[e]?.[l]||c,y=m.useMemo(()=>f,Object.values(f));return r.jsx(x.Provider,{value:y,children:g})};h.displayName=a+"Provider";function u(d,p){const g=p?.[e]?.[l]||c,f=m.useContext(g);if(f)return f;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[h,u]}const o=()=>{const a=t.map(i=>m.createContext(i));return function(c){const l=c?.[e]||a;return m.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return o.scopeName=e,[n,iu(o,...s)]}function iu(...e){const s=e[0];if(e.length===1)return s;const t=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=n.reduce((c,{useScope:l,scopeName:h})=>{const d=l(a)[`__scope${h}`];return{...c,...d}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return t.scopeName=s.scopeName,t}function Fn(e,s){if(typeof e=="function")return e(s);e!=null&&(e.current=s)}function Oo(...e){return s=>{let t=!1;const n=e.map(o=>{const a=Fn(o,s);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let o=0;o<n.length;o++){const a=n[o];typeof a=="function"?a():Fn(e[o],null)}}}}function Bs(...e){return m.useCallback(Oo(...e),e)}function jr(e){const s=cu(e),t=m.forwardRef((n,o)=>{const{children:a,...i}=n,c=m.Children.toArray(a),l=c.find(du);if(l){const h=l.props.children,u=c.map(d=>d===l?m.Children.count(h)>1?m.Children.only(null):m.isValidElement(h)?h.props.children:null:d);return r.jsx(s,{...i,ref:o,children:m.isValidElement(h)?m.cloneElement(h,void 0,u):null})}return r.jsx(s,{...i,ref:o,children:a})});return t.displayName=`${e}.Slot`,t}function cu(e){const s=m.forwardRef((t,n)=>{const{children:o,...a}=t;if(m.isValidElement(o)){const i=hu(o),c=uu(a,o.props);return o.type!==m.Fragment&&(c.ref=n?Oo(n,i):i),m.cloneElement(o,c)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var lu=Symbol("radix.slottable");function du(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===lu}function uu(e,s){const t={...s};for(const n in s){const o=e[n],a=s[n];/^on[A-Z]/.test(n)?o&&a?t[n]=(...c)=>{const l=a(...c);return o(...c),l}:o&&(t[n]=o):n==="style"?t[n]={...o,...a}:n==="className"&&(t[n]=[o,a].filter(Boolean).join(" "))}return{...e,...t}}function hu(e){let s=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=s&&"isReactWarning"in s&&s.isReactWarning;return t?e.ref:(s=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=s&&"isReactWarning"in s&&s.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}function mu(e){const s=e+"CollectionProvider",[t,n]=Qr(s),[o,a]=t(s,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:y,children:P}=x,z=Fe.useRef(null),E=Fe.useRef(new Map).current;return r.jsx(o,{scope:y,itemMap:E,collectionRef:z,children:P})};i.displayName=s;const c=e+"CollectionSlot",l=jr(c),h=Fe.forwardRef((x,y)=>{const{scope:P,children:z}=x,E=a(c,P),I=Bs(y,E.collectionRef);return r.jsx(l,{ref:I,children:z})});h.displayName=c;const u=e+"CollectionItemSlot",d="data-radix-collection-item",p=jr(u),g=Fe.forwardRef((x,y)=>{const{scope:P,children:z,...E}=x,I=Fe.useRef(null),K=Bs(y,I),V=a(u,P);return Fe.useEffect(()=>(V.itemMap.set(I,{ref:I,...E}),()=>void V.itemMap.delete(I))),r.jsx(p,{[d]:"",ref:K,children:z})});g.displayName=u;function f(x){const y=a(e+"CollectionConsumer",x);return Fe.useCallback(()=>{const z=y.collectionRef.current;if(!z)return[];const E=Array.from(z.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((V,M)=>E.indexOf(V.ref.current)-E.indexOf(M.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:h,ItemSlot:g},f,n]}var Us=globalThis?.document?m.useLayoutEffect:()=>{},pu=Un[" useId ".trim().toString()]||(()=>{}),fu=0;function zo(e){const[s,t]=m.useState(pu());return Us(()=>{t(n=>n??String(fu++))},[e]),s?`radix-${s}`:""}var gu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dt=gu.reduce((e,s)=>{const t=jr(`Primitive.${s}`),n=m.forwardRef((o,a)=>{const{asChild:i,...c}=o,l=i?t:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(l,{...c,ref:a})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});function xu(e){const s=m.useRef(e);return m.useEffect(()=>{s.current=e}),m.useMemo(()=>(...t)=>s.current?.(...t),[])}var yu=Un[" useInsertionEffect ".trim().toString()]||Us;function $o({prop:e,defaultProp:s,onChange:t=()=>{},caller:n}){const[o,a,i]=bu({defaultProp:s,onChange:t}),c=e!==void 0,l=c?e:o;{const u=m.useRef(e!==void 0);m.useEffect(()=>{const d=u.current;d!==c&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=c},[c,n])}const h=m.useCallback(u=>{if(c){const d=vu(u)?u(e):u;d!==e&&i.current?.(d)}else a(u)},[c,e,a,i]);return[l,h]}function bu({defaultProp:e,onChange:s}){const[t,n]=m.useState(e),o=m.useRef(t),a=m.useRef(s);return yu(()=>{a.current=s},[s]),m.useEffect(()=>{o.current!==t&&(a.current?.(t),o.current=t)},[t,o]),[t,n,a]}function vu(e){return typeof e=="function"}var wu=m.createContext(void 0);function Vo(e){const s=m.useContext(wu);return e||s||"ltr"}var ar="rovingFocusGroup.onEntryFocus",Su={bubbles:!1,cancelable:!0},as="RovingFocusGroup",[Nr,Bo,ju]=mu(as),[Nu,Uo]=Qr(as,[ju]),[_u,ku]=Nu(as),Go=m.forwardRef((e,s)=>r.jsx(Nr.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Nr.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Cu,{...e,ref:s})})}));Go.displayName=as;var Cu=m.forwardRef((e,s)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:h,preventScrollOnEntryFocus:u=!1,...d}=e,p=m.useRef(null),g=Bs(s,p),f=Vo(a),[x,y]=$o({prop:i,defaultProp:c??null,onChange:l,caller:as}),[P,z]=m.useState(!1),E=xu(h),I=Bo(t),K=m.useRef(!1),[V,M]=m.useState(0);return m.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(ar,E),()=>N.removeEventListener(ar,E)},[E]),r.jsx(_u,{scope:t,orientation:n,dir:f,loop:o,currentTabStopId:x,onItemFocus:m.useCallback(N=>y(N),[y]),onItemShiftTab:m.useCallback(()=>z(!0),[]),onFocusableItemAdd:m.useCallback(()=>M(N=>N+1),[]),onFocusableItemRemove:m.useCallback(()=>M(N=>N-1),[]),children:r.jsx(Dt.div,{tabIndex:P||V===0?-1:0,"data-orientation":n,...d,ref:g,style:{outline:"none",...e.style},onMouseDown:et(e.onMouseDown,()=>{K.current=!0}),onFocus:et(e.onFocus,N=>{const B=!K.current;if(N.target===N.currentTarget&&B&&!P){const X=new CustomEvent(ar,Su);if(N.currentTarget.dispatchEvent(X),!X.defaultPrevented){const b=I().filter(O=>O.focusable),A=b.find(O=>O.active),U=b.find(O=>O.id===x),L=[A,U,...b].filter(Boolean).map(O=>O.ref.current);Ko(L,u)}}K.current=!1}),onBlur:et(e.onBlur,()=>z(!1))})})}),Wo="RovingFocusGroupItem",Ho=m.forwardRef((e,s)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:o=!1,tabStopId:a,children:i,...c}=e,l=zo(),h=a||l,u=ku(Wo,t),d=u.currentTabStopId===h,p=Bo(t),{onFocusableItemAdd:g,onFocusableItemRemove:f,currentTabStopId:x}=u;return m.useEffect(()=>{if(n)return g(),()=>f()},[n,g,f]),r.jsx(Nr.ItemSlot,{scope:t,id:h,focusable:n,active:o,children:r.jsx(Dt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...c,ref:s,onMouseDown:et(e.onMouseDown,y=>{n?u.onItemFocus(h):y.preventDefault()}),onFocus:et(e.onFocus,()=>u.onItemFocus(h)),onKeyDown:et(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const P=Mu(y,u.orientation,u.dir);if(P!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let E=p().filter(I=>I.focusable).map(I=>I.ref.current);if(P==="last")E.reverse();else if(P==="prev"||P==="next"){P==="prev"&&E.reverse();const I=E.indexOf(y.currentTarget);E=u.loop?Eu(E,I+1):E.slice(I+1)}setTimeout(()=>Ko(E))}}),children:typeof i=="function"?i({isCurrentTabStop:d,hasTabStop:x!=null}):i})})});Ho.displayName=Wo;var Ru={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Pu(e,s){return s!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Mu(e,s,t){const n=Pu(e.key,t);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Ru[n]}function Ko(e,s=!1){const t=document.activeElement;for(const n of e)if(n===t||(n.focus({preventScroll:s}),document.activeElement!==t))return}function Eu(e,s){return e.map((t,n)=>e[(s+n)%e.length])}var Au=Go,Tu=Ho;function Lu(e,s){return m.useReducer((t,n)=>s[t][n]??t,e)}var qo=e=>{const{present:s,children:t}=e,n=Iu(s),o=typeof t=="function"?t({present:n.isPresent}):m.Children.only(t),a=Bs(n.ref,Fu(o));return typeof t=="function"||n.isPresent?m.cloneElement(o,{ref:a}):null};qo.displayName="Presence";function Iu(e){const[s,t]=m.useState(),n=m.useRef(null),o=m.useRef(e),a=m.useRef("none"),i=e?"mounted":"unmounted",[c,l]=Lu(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const h=Ss(n.current);a.current=c==="mounted"?h:"none"},[c]),Us(()=>{const h=n.current,u=o.current;if(u!==e){const p=a.current,g=Ss(h);e?l("MOUNT"):g==="none"||h?.display==="none"?l("UNMOUNT"):l(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),Us(()=>{if(s){let h;const u=s.ownerDocument.defaultView??window,d=g=>{const x=Ss(n.current).includes(CSS.escape(g.animationName));if(g.target===s&&x&&(l("ANIMATION_END"),!o.current)){const y=s.style.animationFillMode;s.style.animationFillMode="forwards",h=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=y)})}},p=g=>{g.target===s&&(a.current=Ss(n.current))};return s.addEventListener("animationstart",p),s.addEventListener("animationcancel",d),s.addEventListener("animationend",d),()=>{u.clearTimeout(h),s.removeEventListener("animationstart",p),s.removeEventListener("animationcancel",d),s.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[s,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:m.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function Ss(e){return e?.animationName||"none"}function Fu(e){let s=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=s&&"isReactWarning"in s&&s.isReactWarning;return t?e.ref:(s=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=s&&"isReactWarning"in s&&s.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var Qs="Tabs",[Du]=Qr(Qs,[Uo]),Yo=Uo(),[Ou,Xr]=Du(Qs),Qo=m.forwardRef((e,s)=>{const{__scopeTabs:t,value:n,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:c,activationMode:l="automatic",...h}=e,u=Vo(c),[d,p]=$o({prop:n,onChange:o,defaultProp:a??"",caller:Qs});return r.jsx(Ou,{scope:t,baseId:zo(),value:d,onValueChange:p,orientation:i,dir:u,activationMode:l,children:r.jsx(Dt.div,{dir:u,"data-orientation":i,...h,ref:s})})});Qo.displayName=Qs;var Xo="TabsList",Jo=m.forwardRef((e,s)=>{const{__scopeTabs:t,loop:n=!0,...o}=e,a=Xr(Xo,t),i=Yo(t);return r.jsx(Au,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:n,children:r.jsx(Dt.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:s})})});Jo.displayName=Xo;var Zo="TabsTrigger",ea=m.forwardRef((e,s)=>{const{__scopeTabs:t,value:n,disabled:o=!1,...a}=e,i=Xr(Zo,t),c=Yo(t),l=ra(i.baseId,n),h=na(i.baseId,n),u=n===i.value;return r.jsx(Tu,{asChild:!0,...c,focusable:!o,active:u,children:r.jsx(Dt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":h,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...a,ref:s,onMouseDown:et(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(n):d.preventDefault()}),onKeyDown:et(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(n)}),onFocus:et(e.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!o&&d&&i.onValueChange(n)})})})});ea.displayName=Zo;var ta="TabsContent",sa=m.forwardRef((e,s)=>{const{__scopeTabs:t,value:n,forceMount:o,children:a,...i}=e,c=Xr(ta,t),l=ra(c.baseId,n),h=na(c.baseId,n),u=n===c.value,d=m.useRef(u);return m.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx(qo,{present:o||u,children:({present:p})=>r.jsx(Dt.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:h,tabIndex:0,...i,ref:s,style:{...e.style,animationDuration:d.current?"0s":void 0},children:p&&a})})});sa.displayName=ta;function ra(e,s){return`${e}-trigger-${s}`}function na(e,s){return`${e}-content-${s}`}var zu=Qo,oa=Jo,aa=ea,ia=sa;const $u=zu,ca=m.forwardRef(({className:e,...s},t)=>r.jsx(oa,{ref:t,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));ca.displayName=oa.displayName;const Yt=m.forwardRef(({className:e,...s},t)=>r.jsx(aa,{ref:t,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));Yt.displayName=aa.displayName;const Qt=m.forwardRef(({className:e,...s},t)=>r.jsx(ia,{ref:t,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));Qt.displayName=ia.displayName;function la(){const[e,s]=m.useState(null),[t,n]=m.useState(!1),[o,a]=m.useState(null),i=m.useCallback(async(l,h,u)=>{n(!0),a(null);try{const d=wt.convertToValidationPayload(l,h,u),p=await wt.validateHabitat(d);s(p)}catch(d){console.error("Habitat validation failed:",d),a(d instanceof Error?d.message:"Validation failed")}finally{n(!1)}},[]),c=m.useCallback(()=>{s(null),a(null)},[]);return{validationResults:e,isValidating:t,validationError:o,validateHabitat:i,clearValidation:c}}const Vu=({modules:e,scenario:s,habitat:t,onValidationComplete:n,className:o=""})=>{const{validationResults:a,isValidating:i,validationError:c,validateHabitat:l}=la(),h=async()=>{await l(e,s,t),n&&a&&n(a)},u=()=>{if(i)return{icon:ns,text:"Validating...",variant:"secondary",disabled:!0};if(c)return{icon:bt,text:"Validation Failed",variant:"destructive",disabled:!1};if(a){const x=a.results.filter(P=>P.valid).length,y=a.results.length;return{icon:rs,text:`Validated (${x}/${y})`,variant:x===y?"default":"secondary",disabled:!1}}return{icon:bt,text:"Validate with NASA Rules",variant:"outline",disabled:!1}},{icon:d,text:p,variant:g,disabled:f}=u();return r.jsxs(oe,{onClick:h,disabled:f||e.length===0,variant:g,className:o,children:[r.jsx(d,{className:`w-4 h-4 mr-2 ${i?"animate-spin":""}`}),p]})},_t={modules:[{id:"hygiene-1",type:"HYGIENE",level:0,position:[-1.5,-13.5,0],size:{w_m:2,l_m:2,h_m:2.2},rotation_deg:0,equipment:[]},{id:"crew-sleep-1",type:"CREW_SLEEP",level:0,position:[2,5,0],size:{w_m:2,l_m:2.2,h_m:2.1},rotation_deg:0,equipment:[]}],scenario:{crew_size:4,mission_duration_days:365,destination:"MARS_SURFACE",fairing:{name:"Falcon 9",inner_diameter_m:5.2,inner_height_m:13.1,shape:"CONE"}},habitat:{shape:"CYLINDER",levels:1,dimensions:{diameter_m:6.5,height_m:12},pressurized_volume_m3:400,net_habitable_volume_m3:300}},Bu=()=>{const{validationResults:e}=la(),[s,t]=m.useState("nasa-validation");return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Ro,{className:"w-8 h-8 text-blue-400"}),r.jsx("h1",{className:"text-4xl font-bold text-white",children:"NASA Mission Analysis"})]}),r.jsx("p",{className:"text-lg text-gray-300",children:"Advanced habitat layout analysis and NASA compliance validation tools"})]}),r.jsxs($u,{value:s,onValueChange:t,className:"space-y-6",children:[r.jsxs(ca,{className:"grid w-full grid-cols-4 bg-slate-800/50 backdrop-blur",children:[r.jsxs(Yt,{value:"nasa-validation",className:"flex items-center gap-2",children:[r.jsx(Tn,{className:"w-4 h-4"}),"NASA Validation"]}),r.jsxs(Yt,{value:"efficiency",className:"flex items-center gap-2",children:[r.jsx(En,{className:"w-4 h-4"}),"Efficiency Analysis"]}),r.jsxs(Yt,{value:"crew-analysis",className:"flex items-center gap-2",children:[r.jsx(nr,{className:"w-4 h-4"}),"Crew Analysis"]}),r.jsxs(Yt,{value:"safety",className:"flex items-center gap-2",children:[r.jsx(bt,{className:"w-4 h-4"}),"Safety Analysis"]})]}),r.jsxs(Qt,{value:"nasa-validation",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(xe,{className:"lg:col-span-1 glass-morphism border-blue-500/30",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-blue-200",children:[r.jsx(Tn,{className:"w-5 h-5"}),"NASA Standards Validation"]})}),r.jsxs(ye,{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-300",children:"Validate your habitat design against official NASA requirements for space missions."}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-gray-200",children:"Current Design"}),r.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[" ",_t.modules.length," modules placed  ",_t.scenario.crew_size," crew members  ",_t.scenario.destination," mission"]})]}),r.jsx(Vu,{modules:_t.modules,scenario:_t.scenario,habitat:_t.habitat,className:"w-full"})]}),r.jsxs("div",{className:"text-xs text-gray-400",children:[r.jsxs("p",{children:[" API Key Status: ","Production"]}),r.jsx("p",{children:"Validation checks NASA standards for crew safety, life support, and mission requirements."})]})]})]}),r.jsx("div",{className:"lg:col-span-2",children:e?r.jsx(zs,{results:e}):r.jsxs(xe,{className:"glass-morphism border-purple-500/30",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-purple-200",children:[r.jsx(Os,{className:"w-5 h-5"}),"Ready for Validation"]})}),r.jsx(ye,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-purple-500/20 rounded-full flex items-center justify-center",children:r.jsx(Kr,{className:"w-8 h-8 text-purple-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"NASA Validation Ready"}),r.jsx("p",{className:"text-gray-400 mb-4",children:'Click "Validate with NASA Rules" to analyze your habitat design against official NASA standards.'}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg",children:[r.jsx("div",{className:"font-medium text-gray-200",children:"Global Rules"}),r.jsx("div",{className:"text-gray-400",children:"Volume per crew, mission duration"})]}),r.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg",children:[r.jsx("div",{className:"font-medium text-gray-200",children:"Habitat Rules"}),r.jsx("div",{className:"text-gray-400",children:"Fairing fit, structural integrity"})]}),r.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg",children:[r.jsx("div",{className:"font-medium text-gray-200",children:"Destination Rules"}),r.jsx("div",{className:"text-gray-400",children:"Mission-specific requirements"})]}),r.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg",children:[r.jsx("div",{className:"font-medium text-gray-200",children:"Functional Rules"}),r.jsx("div",{className:"text-gray-400",children:"Life support, crew facilities"})]})]})]})})]})})]}),r.jsxs(xe,{className:"glass-morphism border-yellow-500/30",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-yellow-200",children:[r.jsx(Os,{className:"w-5 h-5"}),"API Demo & Testing"]})}),r.jsx(ye,{children:r.jsx(Do,{})})]})]}),r.jsx(Qt,{value:"efficiency",className:"space-y-6",children:r.jsxs(xe,{className:"glass-morphism border-green-500/30",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-green-200",children:[r.jsx(En,{className:"w-5 h-5"}),"Volume Utilization & Efficiency"]})}),r.jsxs(ye,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:"75%"}),r.jsx("div",{className:"text-sm text-gray-300",children:"Volume Utilization"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"28m"}),r.jsx("div",{className:"text-sm text-gray-300",children:"Per Crew Member"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"92%"}),r.jsx("div",{className:"text-sm text-gray-300",children:"Space Efficiency"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-slate-800/50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-200 mb-2",children:"Recommendations"}),r.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[r.jsx("li",{children:" Consider multi-purpose modules to improve efficiency"}),r.jsx("li",{children:" Optimize corridor space to maximize habitable volume"}),r.jsx("li",{children:" Review vertical space utilization in tall modules"})]})]})]})]})}),r.jsx(Qt,{value:"crew-analysis",className:"space-y-6",children:r.jsxs(xe,{className:"glass-morphism border-orange-500/30",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-orange-200",children:[r.jsx(nr,{className:"w-5 h-5"}),"Crew Workflow & Proximity Analysis"]})}),r.jsx(ye,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-500/20 rounded-full flex items-center justify-center",children:r.jsx(nr,{className:"w-8 h-8 text-orange-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Crew Analysis Tools"}),r.jsx("p",{className:"text-gray-400",children:"Analyze crew movement patterns, workflow efficiency, and social interaction zones."})]})})]})}),r.jsx(Qt,{value:"safety",className:"space-y-6",children:r.jsxs(xe,{className:"glass-morphism border-red-500/30",children:[r.jsx(Ne,{children:r.jsxs(_e,{className:"flex items-center gap-2 text-red-200",children:[r.jsx(bt,{className:"w-5 h-5"}),"Emergency & Safety Analysis"]})}),r.jsx(ye,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-500/20 rounded-full flex items-center justify-center",children:r.jsx(bt,{className:"w-8 h-8 text-red-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Safety Analysis Tools"}),r.jsx("p",{className:"text-gray-400",children:"Evaluate emergency egress paths, fire safety zones, and critical system redundancy."})]})})]})})]})]})})};function Uu({scale:e=60,onChange:s}){const[t,n]=m.useState([]),[o,a]=m.useState([]),[i,c]=m.useState(null),l=(g,f)=>[Math.round(g/.1)*.1,Math.round(f/.1)*.1],h=(g,f)=>{const x=l(g,f);if(i!==null){const y=[...o];y[i]=[...y[i]||[],x],a(y),s?.({outer:t,holes:y})}else{const y=[...t,x];n(y),s?.({outer:y,holes:o})}},u=()=>{a([...o,[]]),c(o.length)},d=()=>c(null),p=m.useMemo(()=>`0 0 ${5*e} ${5*e}`,[e]);return r.jsxs("div",{className:"border rounded-md overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2 p-2 text-xs",children:[r.jsx("button",{className:"px-2 py-1 border rounded",onClick:u,children:"New hole"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:d,children:"End loop"}),r.jsx("span",{className:"opacity-60",children:"Click to add points. Grid 0.1 m."})]}),r.jsxs("svg",{viewBox:p,width:"100%",height:400,onClick:g=>{const x=g.target.closest("svg").getBoundingClientRect(),y=(g.clientX-x.left)/e,P=(g.clientY-x.top)/e;h(y,P)},children:[r.jsx("defs",{children:r.jsx("pattern",{id:"g",width:e*.5,height:e*.5,patternUnits:"userSpaceOnUse",children:r.jsx("path",{d:`M ${e*.5} 0 L 0 0 0 ${e*.5}`,stroke:"hsl(220 10% 20%)",strokeWidth:"1"})})}),r.jsx("rect",{x:0,y:0,width:5*e,height:5*e,fill:"url(#g)"}),t.length>=2&&r.jsx("polyline",{points:t.map(([g,f])=>`${g*e},${f*e}`).join(" "),fill:"none",stroke:"hsl(200 80% 60%)",strokeWidth:2,vectorEffect:"non-scaling-stroke"}),o.map((g,f)=>g.length>=2&&r.jsx("polyline",{points:g.map(([x,y])=>`${x*e},${y*e}`).join(" "),fill:"none",stroke:"hsl(350 80% 60%)",strokeWidth:2,vectorEffect:"non-scaling-stroke"},f)),[...t,...o.flat()].map((g,f)=>r.jsx("circle",{cx:g[0]*e,cy:g[1]*e,r:3,fill:"white",stroke:"black"},f))]})]})}let Gt=null;const _r=new Map;function Gu(){return Gt||(Gt=new Worker(new URL("/assets/cadWorker-73BXrTju.js",import.meta.url),{type:"module"}),Gt.onmessage=e=>{const{id:s}=e.data||{},t=_r.get(s);t&&t(e.data)},Gt)}async function Dn(e,s={}){const t=Gu(),n=crypto.randomUUID(),o=new Promise(i=>_r.set(n,i));t.postMessage({id:n,...e});const a=await Promise.race([o,new Promise((i,c)=>setTimeout(()=>c(new Error("Worker timeout")),s.timeoutMs??6e3))]);if(_r.delete(n),!a?.ok)throw new Error(a?.error||"Kernel error");return a.result}function Wu({onSaveModule:e}){const[s,t]=m.useState({outer:[]}),[n,o]=m.useState(2.2),[a,i]=m.useState(220),[c,l]=m.useState("CAD Shape"),[h,u]=m.useState(null),d=(s.outer?.length??0)>=3,p=async()=>{if(!d)return;const f=await Dn({type:"PAD_PREVIEW",profile:s,height:n,tess:{chord:.02,angle:30}});u(f),Dn({type:"TESSELLATE_REFINE",shape:f,tess:{chord:.003,angle:15}}).then(u).catch(()=>{})},g=()=>{if(!d)return;const f=s.outer.map(B=>B[0]),x=s.outer.map(B=>B[1]),y=Math.min(...f),P=Math.min(...x),z=Math.max(...f),E=Math.max(...x),I=z-y,K=E-P,V=([B,X])=>[B-y,X-P],M=s.outer.map(V),N=(s.holes||[]).map(B=>B.map(V));e({id:`cad-${crypto.randomUUID()}`,type:"WORKSTATION",level:0,position:[y,P],size:{w_m:I,l_m:K,h_m:n},rotation_deg:0,metadata:{visual:{shape2D:"POLYGON",polygon:M,holes:N,extrude_h_m:n,hue:a,label:c}}})};return r.jsxs("div",{className:"grid grid-cols-[320px_1fr_320px] gap-2 h-full",children:[r.jsxs("div",{className:"border rounded-md p-3 space-y-3",children:[r.jsx("h3",{className:"font-medium",children:"Tools"}),r.jsx("button",{className:"border rounded px-3 py-2 w-full",onClick:p,disabled:!d,children:"Preview Extrude"}),r.jsx("div",{className:"text-xs opacity-60",children:"Draw an outer loop (and holes). Grid 0.1 m."})]}),r.jsx("div",{className:"border rounded-md",children:r.jsx(Uu,{onChange:t})}),r.jsxs("div",{className:"border rounded-md p-3 space-y-3",children:[r.jsx("h3",{className:"font-medium",children:"Inspector"}),r.jsx("label",{className:"text-sm",children:"Height (m)"}),r.jsx("input",{type:"number",step:.1,value:n,onChange:f=>o(parseFloat(f.target.value)||0),className:"w-full border rounded px-2 py-1"}),r.jsx("label",{className:"text-sm",children:"Hue"}),r.jsx("input",{type:"range",min:0,max:360,value:a,onChange:f=>i(parseFloat(f.target.value)||0),className:"w-full"}),r.jsx("label",{className:"text-sm",children:"Label"}),r.jsx("input",{value:c,onChange:f=>l(f.target.value),className:"w-full border rounded px-2 py-1"}),r.jsx("button",{className:"border rounded px-3 py-2 w-full",onClick:g,disabled:!d,children:"Save to Layout"}),r.jsx("div",{className:"text-xs opacity-60",children:"Worker preview  refine. Saves to metadata.visual."})]})]})}const dt=Zi({component:zd}),Hu=lt({getParentRoute:()=>dt,path:"/",component:Fo}),Ku=lt({getParentRoute:()=>dt,path:"/design",component:Fo}),qu=lt({getParentRoute:()=>dt,path:"/analysis",component:Bu}),Yu=lt({getParentRoute:()=>dt,path:"/collections",component:()=>r.jsx("div",{className:"flex items-center justify-center h-full bg-background text-foreground",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Habitat Collections"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage saved habitat layouts and NASA mission templates"}),r.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[r.jsx("p",{className:"text-card-foreground",children:"Coming Soon: Collection features including:"}),r.jsxs("ul",{className:"text-left text-muted-foreground mt-4 space-y-1",children:[r.jsx("li",{children:" Save and load habitat designs"}),r.jsx("li",{children:" NASA mission template library"}),r.jsx("li",{children:" Version history and comparison"}),r.jsx("li",{children:" Export to CAD formats"}),r.jsx("li",{children:" Team collaboration tools"})]})]})]})})}),Qu=lt({getParentRoute:()=>dt,path:"/demo",component:au}),Xu=lt({getParentRoute:()=>dt,path:"/cad",component:()=>r.jsx("div",{className:"h-screen bg-background",children:r.jsx(Wu,{onSaveModule:e=>{console.log("CAD module saved:",e)}})})}),Ju=lt({getParentRoute:()=>dt,path:"/validation",component:Do}),Zu=dt.addChildren([Hu,Ku,qu,Yu,Qu,Xu,Ju]),eh=cc({routeTree:Zu}),th=new Oc({defaultOptions:{queries:{staleTime:300*1e3,retry:1}}});function sh(){return r.jsx($c,{client:th,children:r.jsx(uc,{router:eh})})}Ca.createRoot(document.getElementById("root")).render(r.jsx(Fe.StrictMode,{children:r.jsx(sh,{})}));
